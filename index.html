<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Centro de Estudio DTD - Llamados Técnicos 2025</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        :root {
            --primary: #667eea;
            --secondary: #764ba2;
            --success: #4caf50;
            --danger: #f44336;
            --warning: #ffc107;
            --dark: #1a1a2e;
            --darker: #16213e;
            --text-size: 1;
        }
        
        /* Tamaños de texto dinámicos */
        html {
            font-size: calc(16px * var(--text-size));
        }
        
        html.text-small { --text-size: 0.9; }
        html.text-normal { --text-size: 1; }
        html.text-large { --text-size: 1.15; }
        html.text-xlarge { --text-size: 1.3; }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--dark) 0%, var(--darker) 100%);
            min-height: 100vh;
            color: white;
        }
        
        /* Navegación lateral */
        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            width: 280px;
            height: 100vh;
            background: rgba(0,0,0,0.3);
            padding: 20px;
            overflow-y: auto;
            z-index: 1000;
            transition: transform 0.3s;
        }
        
        .sidebar.hidden {
            transform: translateX(-100%);
        }
        
        .sidebar-header {
            text-align: center;
            padding: 20px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            margin-bottom: 20px;
        }
        
        .sidebar-header h1 {
            font-size: 1.5em;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        /* Botones de tamaño de texto */
        .text-size-btn {
            flex: 1;
            padding: 8px;
            border: 1px solid rgba(255,255,255,0.2);
            background: rgba(255,255,255,0.05);
            color: white;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: bold;
        }
        
        .text-size-btn:hover {
            background: rgba(255,255,255,0.15);
        }
        
        .text-size-btn.active {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-color: transparent;
        }
        
        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 15px;
            margin-bottom: 8px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            border: none;
            background: transparent;
            color: white;
            width: 100%;
            text-align: left;
            font-size: 1em;
        }
        
        .nav-item:hover, .nav-item.active {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
        }
        
        .nav-item-icon { font-size: 1.4em; }
        
        .nav-section {
            font-size: 0.8em;
            text-transform: uppercase;
            opacity: 0.5;
            margin: 20px 0 10px;
            padding-left: 15px;
        }
        
        /* Contenido principal */
        .main-content {
            margin-left: 280px;
            padding: 30px;
            min-height: 100vh;
            transition: margin-left 0.3s;
        }
        
        .main-content.expanded {
            margin-left: 0;
        }
        
        .toggle-sidebar {
            position: fixed;
            top: 15px;
            left: 15px;
            z-index: 1001;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border: none;
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 1.5em;
            display: none;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .toggle-sidebar:active {
            transform: scale(0.95);
        }
        
        /* Secciones */
        .section {
            display: none;
            animation: fadeIn 0.5s;
        }
        
        .section.active { display: block; }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .section-header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .section-header h2 {
            font-size: 2.5em;
            margin-bottom: 10px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .section-header p { opacity: 0.8; font-size: 1.1em; }
        
        /* Conceptos y Teoría */
        .filter-tabs {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin-bottom: 30px;
            padding: 15px;
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
        }
        
        .filter-tab {
            padding: 10px 18px;
            border: 2px solid rgba(255,255,255,0.2);
            background: rgba(255,255,255,0.05);
            color: rgba(255,255,255,0.8);
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.95em;
            font-weight: 500;
        }
        
        .filter-tab:hover {
            background: rgba(255,255,255,0.15);
            border-color: rgba(255,255,255,0.4);
            color: white;
        }
        
        .filter-tab.active {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-color: transparent;
            color: white;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }
        
        .conceptos-container {
            max-width: 900px;
            margin: 0 auto;
        }
        
        .concepto-card {
            background: rgba(255,255,255,0.08);
            border-radius: 16px;
            padding: 25px;
            margin-bottom: 20px;
            border-left: 4px solid var(--primary);
            transition: all 0.3s;
        }
        
        .concepto-card:hover {
            background: rgba(255,255,255,0.1);
            transform: translateX(5px);
        }
        
        .concepto-card h3 {
            color: var(--secondary);
            margin-bottom: 15px;
            font-size: 1.3em;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .concepto-card p {
            line-height: 1.8;
            margin-bottom: 12px;
            color: rgba(255,255,255,0.9);
        }
        
        .concepto-card ul, .concepto-card ol {
            margin: 15px 0;
            padding-left: 25px;
        }
        
        .concepto-card li {
            margin-bottom: 8px;
            line-height: 1.6;
        }
        
        .concepto-card .highlight {
            background: rgba(0, 212, 170, 0.2);
            padding: 15px 20px;
            border-radius: 10px;
            margin: 15px 0;
            border: 1px solid rgba(0, 212, 170, 0.3);
        }
        
        .concepto-card .formula-box {
            background: rgba(102, 126, 234, 0.2);
            padding: 15px 20px;
            border-radius: 10px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 1.1em;
            text-align: center;
            border: 1px solid rgba(102, 126, 234, 0.3);
        }
        
        .concepto-card .warning-box {
            background: rgba(255, 193, 7, 0.15);
            padding: 15px 20px;
            border-radius: 10px;
            margin: 15px 0;
            border-left: 4px solid var(--warning);
        }
        
        .concepto-card .example-box {
            background: rgba(255,255,255,0.05);
            padding: 15px 20px;
            border-radius: 10px;
            margin: 15px 0;
            font-style: italic;
        }
        
        .concepto-card table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            font-size: 0.95em;
        }
        
        .concepto-card th, .concepto-card td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        .concepto-card th {
            background: rgba(102, 126, 234, 0.2);
            color: var(--secondary);
        }
        
        .concepto-card tr:hover {
            background: rgba(255,255,255,0.05);
        }
        
        /* Desafío Rápido - Juego */
        .desafio-screen {
            max-width: 700px;
            margin: 0 auto;
        }
        
        .desafio-intro {
            text-align: center;
            padding: 30px;
            background: rgba(255,255,255,0.05);
            border-radius: 20px;
        }
        
        .desafio-trophy {
            font-size: 4em;
            margin-bottom: 20px;
            animation: bounce 2s infinite;
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        .desafio-intro h3 {
            font-size: 1.8em;
            margin-bottom: 15px;
            color: var(--secondary);
        }
        
        .desafio-rules {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 25px 0;
            text-align: left;
        }
        
        .desafio-rules .rule {
            background: rgba(255,255,255,0.08);
            padding: 12px 15px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .desafio-rules .rule span:first-child {
            font-size: 1.3em;
        }
        
        .desafio-category-select {
            margin: 25px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        
        .desafio-category-select select {
            padding: 12px 20px;
            border-radius: 10px;
            border: 2px solid rgba(255,255,255,0.2);
            background: rgba(255,255,255,0.1);
            color: white;
            font-size: 1em;
            cursor: pointer;
        }
        
        .desafio-highscore {
            background: linear-gradient(135deg, rgba(255,193,7,0.2), rgba(255,152,0,0.2));
            padding: 15px 25px;
            border-radius: 10px;
            margin: 20px auto;
            display: inline-block;
            font-size: 1.2em;
        }
        
        .btn-large {
            padding: 18px 50px;
            font-size: 1.3em;
            margin-top: 20px;
        }
        
        /* HUD del juego */
        .desafio-hud {
            display: flex;
            justify-content: space-around;
            margin-bottom: 30px;
            padding: 15px;
            background: rgba(0,0,0,0.3);
            border-radius: 15px;
        }
        
        .hud-item {
            text-align: center;
            padding: 10px 20px;
        }
        
        .hud-label {
            display: block;
            font-size: 0.85em;
            opacity: 0.8;
            margin-bottom: 5px;
        }
        
        .hud-value {
            font-size: 2em;
            font-weight: bold;
        }
        
        .hud-time .hud-value { color: #ff6b6b; }
        .hud-score .hud-value { color: var(--warning); }
        .hud-combo .hud-value { color: #ff9f43; }
        
        .hud-time.warning .hud-value {
            animation: pulse-red 0.5s infinite;
        }
        
        @keyframes pulse-red {
            0%, 100% { color: #ff6b6b; }
            50% { color: #ff0000; transform: scale(1.1); }
        }
        
        /* Pregunta del juego */
        .desafio-question-container {
            background: rgba(255,255,255,0.08);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            text-align: center;
        }
        
        .desafio-progress {
            font-size: 0.9em;
            opacity: 0.7;
            margin-bottom: 15px;
        }
        
        .desafio-question {
            font-size: 1.3em;
            line-height: 1.6;
        }
        
        /* Opciones */
        .desafio-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }
        
        .desafio-option {
            padding: 18px 20px;
            background: rgba(255,255,255,0.1);
            border: 2px solid rgba(255,255,255,0.2);
            border-radius: 12px;
            color: white;
            font-size: 1.05em;
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
        }
        
        .desafio-option:hover {
            background: rgba(255,255,255,0.2);
            border-color: var(--secondary);
            transform: scale(1.02);
        }
        
        .desafio-option.correct {
            background: rgba(0, 212, 170, 0.3);
            border-color: var(--success);
            animation: correct-flash 0.5s;
        }
        
        .desafio-option.incorrect {
            background: rgba(255, 71, 87, 0.3);
            border-color: var(--danger);
            animation: shake 0.3s;
        }
        
        @keyframes correct-flash {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        
        /* Feedback */
        .desafio-feedback {
            text-align: center;
            margin-top: 20px;
            min-height: 40px;
            font-size: 1.3em;
            font-weight: bold;
        }
        
        .desafio-feedback.correct { color: var(--success); }
        .desafio-feedback.incorrect { color: var(--danger); }
        
        /* Combo popup */
        .combo-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 3em;
            font-weight: bold;
            color: #ff9f43;
            text-shadow: 0 0 20px rgba(255, 159, 67, 0.8);
            animation: combo-pop 0.6s forwards;
            pointer-events: none;
            z-index: 1000;
        }
        
        @keyframes combo-pop {
            0% { transform: translate(-50%, -50%) scale(0.5); opacity: 0; }
            50% { transform: translate(-50%, -50%) scale(1.3); opacity: 1; }
            100% { transform: translate(-50%, -60%) scale(1); opacity: 0; }
        }
        
        /* Resultados */
        .desafio-results-content {
            text-align: center;
            padding: 30px;
            background: rgba(255,255,255,0.05);
            border-radius: 20px;
        }
        
        .results-header {
            margin-bottom: 30px;
        }
        
        .results-emoji {
            font-size: 4em;
            display: block;
            margin-bottom: 15px;
        }
        
        .results-header h3 {
            font-size: 1.8em;
            color: var(--secondary);
        }
        
        .results-score {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            padding: 25px 40px;
            border-radius: 15px;
            display: inline-block;
            margin-bottom: 30px;
        }
        
        .score-label {
            font-size: 0.9em;
            opacity: 0.9;
            margin-bottom: 5px;
        }
        
        .score-value {
            font-size: 3em;
            font-weight: bold;
        }
        
        .results-stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-bottom: 25px;
        }
        
        .result-stat {
            text-align: center;
        }
        
        .result-stat .stat-icon {
            font-size: 1.5em;
            display: block;
            margin-bottom: 5px;
        }
        
        .result-stat .stat-value {
            font-size: 1.8em;
            font-weight: bold;
            display: block;
        }
        
        .result-stat .stat-label {
            font-size: 0.85em;
            opacity: 0.7;
        }
        
        .new-record {
            background: linear-gradient(135deg, #ffd700, #ffb347);
            color: #333;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 25px;
            animation: glow 1s infinite;
        }
        
        @keyframes glow {
            0%, 100% { box-shadow: 0 0 10px rgba(255, 215, 0, 0.5); }
            50% { box-shadow: 0 0 30px rgba(255, 215, 0, 0.8); }
        }
        
        .results-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
        }
        
        /* Estilos compartidos para juegos */
        .game-intro {
            text-align: center;
            padding: 30px;
            background: rgba(255,255,255,0.05);
            border-radius: 20px;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .game-intro-icon {
            font-size: 4em;
            margin-bottom: 20px;
            animation: bounce 2s infinite;
        }
        
        .game-intro h3 {
            font-size: 1.8em;
            margin-bottom: 15px;
            color: var(--secondary);
        }
        
        .game-rules {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 25px 0;
            text-align: left;
        }
        
        .game-rules .rule {
            background: rgba(255,255,255,0.08);
            padding: 12px 15px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .game-highscore {
            background: linear-gradient(135deg, rgba(255,193,7,0.2), rgba(255,152,0,0.2));
            padding: 15px 25px;
            border-radius: 10px;
            margin: 20px auto;
            display: inline-block;
            font-size: 1.2em;
        }
        
        .game-results-content {
            text-align: center;
            padding: 30px;
            background: rgba(255,255,255,0.05);
            border-radius: 20px;
            max-width: 500px;
            margin: 0 auto;
        }
        
        /* MEMORIA TÉCNICA */
        .memoria-screen, .supervivencia-screen {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .memoria-hud, .supervivencia-hud {
            display: flex;
            justify-content: space-around;
            margin-bottom: 30px;
            padding: 15px;
            background: rgba(0,0,0,0.3);
            border-radius: 15px;
        }
        
        .memoria-difficulty, .supervivencia-category-select {
            margin: 25px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        
        .memoria-difficulty select, .supervivencia-category-select select {
            padding: 12px 20px;
            border-radius: 10px;
            border: 2px solid rgba(255,255,255,0.2);
            background: rgba(255,255,255,0.1);
            color: white;
            font-size: 1em;
            cursor: pointer;
        }
        
        .memoria-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
            max-width: 700px;
            margin: 0 auto;
        }
        
        .memoria-card {
            aspect-ratio: 1;
            perspective: 1000px;
            cursor: pointer;
        }
        
        .memoria-card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            transition: transform 0.5s;
            transform-style: preserve-3d;
        }
        
        .memoria-card.flipped .memoria-card-inner {
            transform: rotateY(180deg);
        }
        
        .memoria-card.matched .memoria-card-inner {
            transform: rotateY(180deg);
        }
        
        .memoria-card.matched {
            opacity: 0.7;
            cursor: default;
        }
        
        .memoria-card-front, .memoria-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 10px;
            text-align: center;
            font-size: 0.85em;
            line-height: 1.3;
        }
        
        .memoria-card-front {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            font-size: 2em;
        }
        
        .memoria-card-back {
            background: rgba(255,255,255,0.15);
            transform: rotateY(180deg);
            border: 2px solid rgba(255,255,255,0.3);
        }
        
        .memoria-card-back.concept {
            background: rgba(102, 126, 234, 0.3);
            border-color: var(--primary);
        }
        
        .memoria-card-back.definition {
            background: rgba(0, 212, 170, 0.3);
            border-color: var(--success);
        }
        
        /* SUPERVIVENCIA */
        .supervivencia-question-container {
            background: rgba(255,255,255,0.08);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            text-align: center;
        }
        
        .supervivencia-progress {
            font-size: 0.9em;
            opacity: 0.7;
            margin-bottom: 15px;
        }
        
        .supervivencia-question {
            font-size: 1.3em;
            line-height: 1.6;
        }
        
        .supervivencia-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            max-width: 700px;
            margin: 0 auto;
        }
        
        .supervivencia-option {
            padding: 18px 20px;
            background: rgba(255,255,255,0.1);
            border: 2px solid rgba(255,255,255,0.2);
            border-radius: 12px;
            color: white;
            font-size: 1.05em;
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
        }
        
        .supervivencia-option:hover {
            background: rgba(255,255,255,0.2);
            border-color: var(--secondary);
            transform: scale(1.02);
        }
        
        .supervivencia-option.correct {
            background: rgba(0, 212, 170, 0.3);
            border-color: var(--success);
        }
        
        .supervivencia-option.incorrect {
            background: rgba(255, 71, 87, 0.3);
            border-color: var(--danger);
            animation: shake 0.3s;
        }
        
        .supervivencia-feedback {
            text-align: center;
            margin-top: 20px;
            min-height: 40px;
            font-size: 1.3em;
            font-weight: bold;
        }
        
        .supervivencia-feedback.correct { color: var(--success); }
        .supervivencia-feedback.incorrect { color: var(--danger); }
        
        .hud-lives .hud-value {
            font-size: 1.5em;
            letter-spacing: 5px;
        }
        
        .life-lost {
            animation: life-shake 0.5s;
        }
        
        @keyframes life-shake {
            0%, 100% { transform: translateX(0); }
            20% { transform: translateX(-10px); }
            40% { transform: translateX(10px); }
            60% { transform: translateX(-10px); }
            80% { transform: translateX(10px); }
        }
        
        /* Tarjetas */
        .card {
            background: rgba(255,255,255,0.08);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 20px;
            transition: all 0.3s;
        }
        
        .card:hover {
            background: rgba(255,255,255,0.12);
            transform: translateY(-3px);
        }
        
        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }
        
        /* Botones */
        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }
        
        .btn:hover { transform: scale(1.05); }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
        }
        
        .btn-success { background: var(--success); color: white; }
        .btn-danger { background: var(--danger); color: white; }
        .btn-warning { background: var(--warning); color: #333; }
        .btn-secondary { background: rgba(255,255,255,0.2); color: white; }
        
        /* Botones de opción para examen */
        .option-btn {
            display: flex;
            align-items: center;
            width: 100%;
            padding: 15px 20px;
            margin-bottom: 10px;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 10px;
            background: rgba(255,255,255,0.1);
            color: white;
            font-size: 1em;
            text-align: left;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .option-btn:hover:not(:disabled) {
            background: rgba(255,255,255,0.2);
            border-color: var(--primary);
            transform: translateX(5px);
        }
        
        .option-btn .option-letter {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 32px;
            height: 32px;
            margin-right: 15px;
            border-radius: 50%;
            background: rgba(255,255,255,0.2);
            font-weight: bold;
        }
        
        .option-btn.correct {
            background: rgba(76,175,80,0.3);
            border-color: var(--success);
        }
        
        .option-btn.correct .option-letter {
            background: var(--success);
        }
        
        .option-btn.incorrect {
            background: rgba(244,67,54,0.3);
            border-color: var(--danger);
        }
        
        .option-btn.incorrect .option-letter {
            background: var(--danger);
        }
        
        /* Inputs */
        .input {
            width: 100%;
            padding: 15px;
            border: 2px solid rgba(255,255,255,0.2);
            border-radius: 10px;
            background: rgba(255,255,255,0.1);
            color: white;
            font-size: 1.1em;
            transition: all 0.3s;
        }
        
        .input:focus {
            outline: none;
            border-color: var(--primary);
            background: rgba(255,255,255,0.15);
        }
        
        .input::placeholder { color: rgba(255,255,255,0.5); }
        
        select.input option { background: var(--dark); color: white; }
        
        .input-group { margin-bottom: 20px; }
        .input-group label { display: block; margin-bottom: 8px; font-size: 1.1em; }
        
        /* Stats */
        .stats-grid {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: rgba(255,255,255,0.1);
            padding: 20px 30px;
            border-radius: 15px;
            text-align: center;
            min-width: 130px;
        }
        
        .stat-value { font-size: 2.5em; font-weight: bold; }
        .stat-label { font-size: 0.9em; opacity: 0.8; }
        .stat-card.success .stat-value { color: var(--success); }
        .stat-card.danger .stat-value { color: var(--danger); }
        .stat-card.warning .stat-value { color: var(--warning); }
        
        /* Tabs */
        .tabs {
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 30px;
        }
        
        .tab {
            padding: 12px 25px;
            border: 2px solid rgba(255,255,255,0.3);
            background: transparent;
            color: white;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1em;
        }
        
        .tab:hover, .tab.active {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-color: transparent;
        }
        
        /* Flashcard */
        .flashcard-container { perspective: 1000px; margin-bottom: 30px; }
        
        .flashcard {
            width: 100%;
            max-width: 700px;
            min-height: 350px;
            margin: 0 auto;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s;
            cursor: pointer;
        }
        
        .flashcard.flipped { transform: rotateY(180deg); }
        
        .flashcard-face {
            position: absolute;
            width: 100%;
            min-height: 350px;
            backface-visibility: hidden;
            border-radius: 20px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 40px;
            text-align: center;
        }
        
        .flashcard-front {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
        }
        
        .flashcard-back {
            background: linear-gradient(135deg, #11998e, #38ef7d);
            transform: rotateY(180deg);
        }
        
        .flashcard-category {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(255,255,255,0.2);
            padding: 5px 15px;
            border-radius: 15px;
            font-size: 0.9em;
        }
        
        .flashcard-number {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255,255,255,0.2);
            padding: 5px 15px;
            border-radius: 15px;
            font-size: 0.9em;
        }
        
        .flashcard-content { font-size: 1.4em; line-height: 1.6; }
        .flashcard-hint { position: absolute; bottom: 20px; font-size: 0.9em; opacity: 0.8; }
        
        /* Controls */
        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        /* Progress bar */
        .progress-bar {
            background: rgba(255,255,255,0.2);
            height: 10px;
            border-radius: 5px;
            overflow: hidden;
            margin-bottom: 30px;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            transition: width 0.5s;
        }
        
        /* Pruebas */
        .question-card {
            background: rgba(255,255,255,0.08);
            padding: 25px;
            margin-bottom: 20px;
            border-radius: 15px;
            border-left: 5px solid var(--primary);
        }
        
        .question-number {
            color: var(--primary);
            font-weight: bold;
            font-size: 1.1em;
            margin-bottom: 15px;
        }
        
        .question-text {
            font-size: 1.1em;
            margin-bottom: 20px;
            line-height: 1.6;
        }
        
        .options { display: flex; flex-direction: column; gap: 12px; }
        
        .option {
            padding: 15px 20px;
            border: 2px solid rgba(255,255,255,0.2);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            background: transparent;
            color: white;
            text-align: left;
            font-size: 1em;
        }
        
        .option:hover {
            border-color: var(--primary);
            background: rgba(102,126,234,0.2);
        }
        
        .option.correct {
            background: var(--success) !important;
            border-color: var(--success) !important;
        }
        
        .option.incorrect {
            background: var(--danger) !important;
            border-color: var(--danger) !important;
        }
        
        .option.disabled { cursor: not-allowed; opacity: 0.7; }
        
        .explanation {
            background: rgba(33,150,243,0.2);
            border-left: 5px solid #2196f3;
            padding: 15px 20px;
            margin-top: 15px;
            border-radius: 0 10px 10px 0;
            display: none;
        }
        
        .explanation.show { display: block; }
        
        /* Calculadora */
        .calculator-card {
            background: rgba(255,255,255,0.1);
            border-radius: 20px;
            padding: 40px;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .formula-display {
            background: rgba(0,0,0,0.3);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 30px;
            font-family: 'Courier New', monospace;
            font-size: 1.3em;
        }
        
        .input-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .result-box {
            background: linear-gradient(135deg, #11998e, #38ef7d);
            padding: 30px;
            border-radius: 15px;
            margin-top: 30px;
            text-align: center;
            display: none;
        }
        
        .result-box.show { display: block; }
        .result-box.error { background: linear-gradient(135deg, var(--danger), #e91e63); }
        .result-value { font-size: 3em; font-weight: bold; margin-bottom: 10px; }
        .result-label { font-size: 1.2em; opacity: 0.9; }
        
        .result-details {
            margin-top: 20px;
            text-align: left;
            background: rgba(0,0,0,0.2);
            padding: 20px;
            border-radius: 10px;
        }
        
        .result-details p {
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
        }
        
        /* Mapas conceptuales */
        .layer {
            display: flex;
            align-items: center;
            width: 100%;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .layer-number {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.3em;
            flex-shrink: 0;
        }
        
        .layer-content {
            flex: 1;
            display: flex;
            gap: 15px;
        }
        
        .layer-box {
            flex: 1;
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 20px;
            transition: all 0.3s;
        }
        
        .layer-box:hover {
            background: rgba(255,255,255,0.15);
            transform: translateY(-3px);
        }
        
        .layer-box h4 { margin-bottom: 10px; color: var(--warning); }
        .layer-box ul { list-style: none; font-size: 0.9em; opacity: 0.9; }
        .layer-box li { padding: 3px 0; }
        .layer-box li::before { content: '• '; color: var(--primary); }
        
        /* Ejercicios fill-in */
        .formula-exercise {
            background: rgba(0,0,0,0.3);
            padding: 30px;
            border-radius: 15px;
            font-family: 'Courier New', monospace;
            font-size: 1.4em;
            text-align: center;
            margin-bottom: 25px;
            line-height: 2;
        }
        
        .blank-input {
            background: rgba(255,255,255,0.15);
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 8px;
            padding: 8px 15px;
            color: white;
            font-family: 'Courier New', monospace;
            font-size: 1em;
            width: 100px;
            text-align: center;
        }
        
        .blank-input:focus {
            outline: none;
            border-color: var(--primary);
        }
        
        .blank-input.correct {
            border-color: var(--success);
            background: rgba(76,175,80,0.3);
        }
        
        .blank-input.incorrect {
            border-color: var(--danger);
            background: rgba(244,67,54,0.3);
        }
        
        .feedback {
            margin-top: 20px;
            padding: 20px;
            border-radius: 15px;
            display: none;
        }
        
        .feedback.show { display: block; }
        .feedback.correct { background: rgba(76,175,80,0.3); border: 2px solid var(--success); }
        .feedback.incorrect { background: rgba(244,67,54,0.3); border: 2px solid var(--danger); }
        
        /* Home cards */
        .home-card {
            background: rgba(255,255,255,0.08);
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            transition: all 0.3s;
            cursor: pointer;
            border: 2px solid transparent;
        }
        
        .home-card:hover {
            background: rgba(255,255,255,0.12);
            transform: translateY(-5px);
            border-color: var(--primary);
        }
        
        .home-card-icon { font-size: 3em; margin-bottom: 15px; }
        .home-card h3 { margin-bottom: 10px; font-size: 1.3em; }
        .home-card p { opacity: 0.8; font-size: 0.95em; }
        
        .home-card-tag {
            display: inline-block;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.85em;
            margin-top: 15px;
        }
        
        /* Tip banner */
        .tip-banner {
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
            padding: 20px 25px;
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .tip-icon { font-size: 2.5em; }
        .tip-content h4 { margin-bottom: 5px; color: var(--warning); }
        
        /* Fibra visual */
        .fiber-section {
            display: flex;
            gap: 30px;
            align-items: center;
            background: rgba(255,255,255,0.08);
            padding: 25px;
            border-radius: 20px;
            margin-bottom: 25px;
        }
        
        .fiber-visual {
            width: 150px;
            flex-shrink: 0;
            text-align: center;
        }
        
        .fiber-circle {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            margin: 0 auto;
            position: relative;
        }
        
        .fiber-sm .fiber-circle {
            background: rgba(255,193,7,0.2);
            border: 3px solid rgba(255,193,7,0.5);
        }
        
        .fiber-sm .fiber-circle::after {
            content: '';
            position: absolute;
            width: 15px;
            height: 15px;
            background: var(--warning);
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        
        .fiber-mm .fiber-circle {
            background: rgba(255,152,0,0.2);
            border: 3px solid rgba(255,152,0,0.5);
        }
        
        .fiber-mm .fiber-circle::after {
            content: '';
            position: absolute;
            width: 50px;
            height: 50px;
            background: #ff9800;
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        
        .fiber-info { flex: 1; }
        .fiber-info h3 { font-size: 1.5em; margin-bottom: 10px; }
        
        .fiber-specs {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .fiber-spec {
            background: rgba(255,255,255,0.1);
            padding: 12px;
            border-radius: 10px;
        }
        
        .fiber-spec-label { font-size: 0.85em; opacity: 0.7; }
        .fiber-spec-value { font-weight: bold; font-size: 1.1em; }
        
        /* Responsive */
        @media (max-width: 992px) {
            .sidebar { transform: translateX(-100%); }
            .sidebar.visible { transform: translateX(0); }
            .main-content { margin-left: 0; }
            .toggle-sidebar { display: flex; align-items: center; justify-content: center; }
        }
        
        @media (max-width: 768px) {
            /* Layout general móvil */
            .main-content {
                padding: 15px;
                padding-top: 70px;
            }
            
            .section-header {
                text-align: center;
                margin-bottom: 20px;
            }
            
            .section-header h2 {
                font-size: 1.5em;
            }
            
            .section-header p {
                font-size: 0.9em;
            }
            
            /* Cards y grids */
            .cards-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
            }
            
            .stat-card {
                padding: 12px;
            }
            
            .stat-value {
                font-size: 1.8em;
            }
            
            .stat-label {
                font-size: 0.75em;
            }
            
            /* Tabs responsivos */
            .tabs {
                flex-wrap: wrap;
                gap: 5px;
                padding: 10px;
                justify-content: center;
            }
            
            .tab {
                padding: 10px 14px;
                font-size: 0.85em;
                flex: 0 0 auto;
            }
            
            /* Inputs y formularios */
            .input-row { grid-template-columns: 1fr; }
            
            .input-group {
                margin-bottom: 10px;
            }
            
            .input {
                padding: 12px;
                font-size: 16px; /* Evita zoom en iOS */
            }
            
            /* Botones */
            .btn {
                padding: 14px 20px;
                font-size: 1em;
                width: 100%;
                justify-content: center;
            }
            
            .controls {
                flex-direction: column;
                gap: 10px;
            }
            
            .controls .btn {
                width: 100%;
            }
            
            /* Flashcards móvil */
            .flashcard {
                min-height: 250px;
                margin: 10px 0;
            }
            
            .flashcard-content {
                font-size: 1.1em;
                padding: 20px;
            }
            
            /* Card general */
            .card {
                padding: 18px;
                border-radius: 15px;
            }
            
            /* Calculadoras móvil */
            .calculator-card {
                padding: 18px;
            }
            
            .formula-display {
                font-size: 0.9em;
                padding: 12px;
                overflow-x: auto;
            }
            
            .result-box {
                padding: 18px;
            }
            
            .result-value {
                font-size: 2em;
            }
            
            /* Mapas conceptuales móvil */
            .layer {
                flex-direction: column;
            }
            
            .layer-content {
                flex-direction: column;
                width: 100%;
            }
            
            .fiber-section {
                flex-direction: column;
                text-align: center;
            }
            
            /* Conceptos responsivo */
            .filter-tabs {
                padding: 10px;
                gap: 8px;
                flex-wrap: wrap;
            }
            
            .filter-tab {
                padding: 10px 14px;
                font-size: 0.85em;
            }
            
            .concepto-card {
                padding: 18px;
            }
            
            .concepto-card h3 {
                font-size: 1.15em;
            }
            
            .concepto-card p {
                font-size: 0.95em;
                line-height: 1.7;
            }
            
            .concepto-card table {
                font-size: 0.8em;
                display: block;
                overflow-x: auto;
            }
            
            .concepto-card th, .concepto-card td {
                padding: 8px 6px;
            }
            
            .concepto-card .formula-box {
                font-size: 0.95em;
                padding: 12px;
                overflow-x: auto;
            }
            
            /* V/F móvil */
            #vof-statement {
                font-size: 1.15em !important;
                line-height: 1.5;
            }
            
            #btn-verdadero, #btn-falso {
                padding: 18px !important;
                font-size: 1.1em !important;
            }
            
            #vof-feedback {
                font-size: 0.95em;
            }
            
            /* Examen móvil */
            .exam-question {
                font-size: 1.05em;
            }
            
            .exam-option {
                padding: 14px;
                font-size: 0.95em;
            }
            
            /* Juegos responsivos */
            .desafio-rules, .game-rules {
                grid-template-columns: 1fr;
            }
            
            .desafio-hud, .memoria-hud, .supervivencia-hud {
                flex-direction: row;
                flex-wrap: wrap;
                gap: 10px;
                padding: 15px;
            }
            
            .hud-item {
                flex: 1;
                min-width: 70px;
            }
            
            .hud-value {
                font-size: 1.4em;
            }
            
            .hud-label {
                font-size: 0.7em;
            }
            
            .desafio-options, .supervivencia-options {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .desafio-question, .supervivencia-question {
                font-size: 1.05em;
                padding: 15px;
            }
            
            .results-stats {
                flex-direction: column;
                gap: 15px;
            }
            
            .results-buttons {
                flex-direction: column;
            }
            
            .results-buttons .btn {
                width: 100%;
            }
            
            /* Memoria móvil */
            .memoria-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 8px;
            }
            
            .memoria-card {
                height: 80px;
            }
            
            .memoria-card-back {
                font-size: 0.7em;
                padding: 5px;
            }
            
            /* Home cards móvil */
            .home-card {
                padding: 20px;
            }
            
            .home-card-icon {
                font-size: 2.5em;
            }
            
            .home-card h3 {
                font-size: 1.1em;
            }
            
            /* Progress bar */
            .progress-bar {
                height: 6px;
            }
            
            /* Ejercicios móvil */
            .blank-input {
                width: 60px;
                padding: 8px;
                font-size: 14px;
            }
        }
        
        /* Pantallas muy pequeñas */
        @media (max-width: 400px) {
            .main-content {
                padding: 10px;
                padding-top: 65px;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
            }
            
            .stat-value {
                font-size: 1.5em;
            }
            
            .tabs {
                gap: 4px;
            }
            
            .tab {
                padding: 8px 10px;
                font-size: 0.8em;
            }
            
            .memoria-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .flashcard {
                min-height: 220px;
            }
            
            .concepto-card h3 {
                font-size: 1.05em;
            }
            
            #vof-statement {
                font-size: 1.05em !important;
            }
        }
        
        /* Overlay para cerrar sidebar en móvil */
        .sidebar-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 999;
        }
        
        .sidebar-overlay.visible {
            display: block;
        }
        
        /* Búsqueda Global */
        .search-btn {
            position: fixed;
            top: 15px;
            right: 15px;
            z-index: 1001;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border: none;
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 1.3em;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
            transition: transform 0.2s;
        }
        
        .search-btn:active {
            transform: scale(0.95);
        }
        
        .search-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.85);
            z-index: 2000;
            padding: 20px;
            overflow-y: auto;
        }
        
        .search-modal.visible {
            display: block;
            animation: fadeIn 0.2s;
        }
        
        .search-container {
            max-width: 700px;
            margin: 0 auto;
            padding-top: 20px;
        }
        
        .search-header {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .search-input {
            flex: 1;
            padding: 18px 20px;
            border: 2px solid rgba(255,255,255,0.2);
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            color: white;
            font-size: 1.1em;
            outline: none;
            transition: border-color 0.3s;
        }
        
        .search-input:focus {
            border-color: var(--primary);
        }
        
        .search-input::placeholder {
            color: rgba(255,255,255,0.5);
        }
        
        .search-close {
            padding: 18px 22px;
            background: rgba(255,255,255,0.1);
            border: none;
            border-radius: 15px;
            color: white;
            font-size: 1.2em;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .search-close:hover {
            background: rgba(255,255,255,0.2);
        }
        
        .search-results {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .search-result {
            padding: 18px;
            background: rgba(255,255,255,0.08);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s;
            border-left: 4px solid var(--primary);
        }
        
        .search-result:hover {
            background: rgba(255,255,255,0.15);
            transform: translateX(5px);
        }
        
        .search-result-type {
            font-size: 0.75em;
            text-transform: uppercase;
            opacity: 0.6;
            margin-bottom: 6px;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .search-result-title {
            font-size: 1.05em;
            margin-bottom: 5px;
        }
        
        .search-result-preview {
            font-size: 0.9em;
            opacity: 0.7;
            line-height: 1.4;
        }
        
        .search-result mark {
            background: var(--warning);
            color: black;
            padding: 1px 3px;
            border-radius: 3px;
        }
        
        .search-empty {
            text-align: center;
            padding: 40px;
            opacity: 0.6;
        }
        
        .search-empty-icon {
            font-size: 3em;
            margin-bottom: 15px;
        }
        
        .search-hint {
            text-align: center;
            padding: 30px;
            opacity: 0.5;
            font-size: 0.95em;
        }
        
        .search-stats {
            text-align: center;
            padding: 10px;
            opacity: 0.6;
            font-size: 0.85em;
            margin-bottom: 15px;
        }
        
        /* ============ MODO EXAMEN SIMULADO ============ */
        .examen-config {
            max-width: 600px;
            margin: 0 auto;
            background: linear-gradient(145deg, rgba(102, 126, 234, 0.15), rgba(118, 75, 162, 0.15));
            border: 1px solid rgba(102, 126, 234, 0.3);
            border-radius: 20px;
            padding: 40px;
            text-align: center;
        }
        
        .examen-config h3 {
            font-size: 1.5em;
            margin-bottom: 20px;
            color: #fff;
        }
        
        .examen-options {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin: 30px 0;
        }
        
        .examen-option {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: rgba(255,255,255,0.08);
            padding: 15px 20px;
            border-radius: 12px;
            border: 1px solid rgba(255,255,255,0.1);
        }
        
        .examen-option label {
            font-size: 1.1em;
            display: flex;
            align-items: center;
            gap: 10px;
            color: #fff;
        }
        
        .examen-option select, .examen-option input {
            padding: 10px 15px;
            border-radius: 8px;
            border: 1px solid rgba(102, 126, 234, 0.5);
            background: rgba(26, 26, 46, 0.9);
            color: #fff;
            font-size: 1em;
            min-width: 140px;
        }
        
        .examen-option select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 10px rgba(102, 126, 234, 0.3);
        }
        
        .examen-timer {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            padding: 15px 25px;
            border-radius: 50px;
            font-size: 1.5em;
            font-weight: bold;
            z-index: 100;
            box-shadow: 0 4px 20px rgba(102, 126, 234, 0.5);
            display: flex;
            align-items: center;
            gap: 10px;
            color: #fff;
        }
        
        .examen-timer.warning {
            background: linear-gradient(135deg, #ff9800, #f44336);
            animation: pulse 1s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .examen-progress-bar {
            width: 100%;
            height: 10px;
            background: rgba(255,255,255,0.15);
            border-radius: 5px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .examen-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4caf50, #8bc34a);
            border-radius: 5px;
            transition: width 0.3s;
        }
        
        .examen-question-card {
            background: linear-gradient(145deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05));
            border: 1px solid rgba(255,255,255,0.15);
            border-radius: 20px;
            padding: 40px;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .examen-question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255,255,255,0.15);
        }
        
        .examen-question-num {
            font-size: 0.95em;
            color: rgba(255,255,255,0.8);
            font-weight: 500;
        }
        
        .examen-question-category {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 500;
            color: #fff;
        }
        
        .examen-question-text {
            font-size: 1.3em;
            line-height: 1.6;
            margin-bottom: 30px;
            color: #fff;
        }
        
        .examen-answers {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .examen-answer {
            display: block;
            padding: 18px 25px;
            background: rgba(255,255,255,0.08);
            border: 2px solid rgba(255,255,255,0.15);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: left;
            color: #fff;
            font-size: 1em;
        }
        
        .examen-answer:hover {
            background: rgba(102, 126, 234, 0.2);
            border-color: var(--primary);
            transform: translateX(5px);
        }
        
        .examen-answer.selected {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.3), rgba(118, 75, 162, 0.3));
            border-color: var(--primary);
            box-shadow: 0 0 15px rgba(102, 126, 234, 0.3);
        }
        
        .examen-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            gap: 15px;
        }
        
        .examen-nav-btn {
            padding: 15px 30px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .examen-nav-btn:hover {
            transform: translateY(-2px);
        }
        
        .examen-nav-prev {
            background: rgba(255,255,255,0.15);
            color: white;
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        .examen-nav-prev:hover {
            background: rgba(255,255,255,0.25);
        }
        
        .examen-nav-next {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }
        
        .examen-nav-finish {
            background: linear-gradient(135deg, #4caf50, #2e7d32);
            color: white;
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.4);
        }
        
        .examen-results {
            max-width: 700px;
            margin: 0 auto;
            text-align: center;
        }
        
        .examen-score-circle {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            margin: 30px auto;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-size: 3em;
            font-weight: bold;
            color: #fff;
        }
        
        .examen-score-circle.pass {
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.4), rgba(46, 125, 50, 0.4));
            border: 4px solid #4caf50;
            box-shadow: 0 0 30px rgba(76, 175, 80, 0.4);
        }
        
        .examen-score-circle.fail {
            background: linear-gradient(135deg, rgba(244, 67, 54, 0.4), rgba(183, 28, 28, 0.4));
            border: 4px solid #f44336;
            box-shadow: 0 0 30px rgba(244, 67, 54, 0.4);
        }
        
        .examen-score-label {
            font-size: 0.25em;
            opacity: 0.8;
            margin-top: 5px;
        }
        
        .examen-details {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 30px 0;
        }
        
        .examen-detail {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 15px;
            border: 1px solid rgba(255,255,255,0.1);
        }
        
        .examen-detail-value {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 5px;
            color: #fff;
        }
        
        .examen-detail-label {
            opacity: 0.8;
            font-size: 0.9em;
            color: rgba(255,255,255,0.9);
        }
        
        .examen-review {
            margin-top: 40px;
            text-align: left;
        }
        
        .examen-review-item {
            background: rgba(255,255,255,0.08);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 15px;
            border-left: 4px solid;
        }
        
        .examen-review-item.correct {
            border-color: #4caf50;
            background: rgba(76, 175, 80, 0.1);
        }
        
        .examen-review-item.incorrect {
            border-color: #f44336;
            background: rgba(244, 67, 54, 0.1);
        }
        
        /* ============ REPASO INTELIGENTE ============ */
        .repaso-intro {
            max-width: 700px;
            margin: 0 auto;
            text-align: center;
        }
        
        .repaso-stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 30px 0;
        }
        
        .repaso-stat-card {
            background: rgba(255,255,255,0.08);
            padding: 25px;
            border-radius: 15px;
        }
        
        .repaso-stat-value {
            font-size: 2.5em;
            font-weight: bold;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .repaso-stat-label {
            opacity: 0.7;
            margin-top: 5px;
        }
        
        .repaso-empty {
            background: rgba(255,255,255,0.05);
            padding: 60px;
            border-radius: 20px;
            margin: 30px 0;
        }
        
        .repaso-empty-icon {
            font-size: 4em;
            margin-bottom: 20px;
        }
        
        .repaso-queue {
            margin: 30px 0;
        }
        
        .repaso-queue-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .repaso-queue-items {
            display: flex;
            flex-direction: column;
            gap: 10px;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .repaso-queue-item {
            background: rgba(255,255,255,0.05);
            padding: 15px 20px;
            border-radius: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-left: 4px solid;
        }
        
        .repaso-queue-item.priority-high {
            border-color: #f44336;
        }
        
        .repaso-queue-item.priority-medium {
            border-color: #ff9800;
        }
        
        .repaso-queue-item.priority-low {
            border-color: #4caf50;
        }
        
        .repaso-priority-badge {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: 600;
        }
        
        .repaso-priority-badge.high {
            background: rgba(244, 67, 54, 0.2);
            color: #ff6b6b;
        }
        
        .repaso-priority-badge.medium {
            background: rgba(255, 152, 0, 0.2);
            color: #ffb74d;
        }
        
        .repaso-priority-badge.low {
            background: rgba(76, 175, 80, 0.2);
            color: #81c784;
        }
        
        .repaso-session {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .repaso-card {
            background: rgba(255,255,255,0.08);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 20px;
        }
        
        .repaso-difficulty-btns {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
        }
        
        .repaso-difficulty-btn {
            padding: 15px 25px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
            min-width: 100px;
        }
        
        .repaso-difficulty-btn.easy {
            background: rgba(76, 175, 80, 0.2);
            color: #81c784;
            border: 2px solid rgba(76, 175, 80, 0.3);
        }
        
        .repaso-difficulty-btn.medium {
            background: rgba(255, 152, 0, 0.2);
            color: #ffb74d;
            border: 2px solid rgba(255, 152, 0, 0.3);
        }
        
        .repaso-difficulty-btn.hard {
            background: rgba(244, 67, 54, 0.2);
            color: #ff6b6b;
            border: 2px solid rgba(244, 67, 54, 0.3);
        }
        
        .repaso-difficulty-btn:hover {
            transform: translateY(-3px);
        }
        
        @media (max-width: 768px) {
            .examen-timer {
                top: 70px;
                right: 10px;
                padding: 10px 15px;
                font-size: 1.2em;
            }
            
            .examen-details {
                grid-template-columns: 1fr;
            }
            
            .repaso-stats-grid {
                grid-template-columns: 1fr;
            }
            
            .repaso-difficulty-btns {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="sidebar-overlay" id="sidebar-overlay" onclick="closeSidebar()"></div>
    <button class="toggle-sidebar" onclick="toggleSidebar()">☰</button>
    <button class="search-btn" onclick="openSearch()" title="Buscar (Ctrl+K)">🔍</button>
    
    <!-- Modal de Búsqueda -->
    <div class="search-modal" id="search-modal">
        <div class="search-container">
            <div class="search-header">
                <input type="text" class="search-input" id="search-input" placeholder="Buscar conceptos, preguntas, flashcards..." oninput="performSearch(this.value)" autofocus>
                <button class="search-close" onclick="closeSearch()">✕</button>
            </div>
            <div id="search-hint" class="search-hint">
                💡 Escribe para buscar en flashcards, preguntas V/F, conceptos y más...
            </div>
            <div id="search-results" class="search-results"></div>
        </div>
    </div>
    
    <nav class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h1>📚 Centro de Estudio</h1>
            <p style="font-size: 0.9em; opacity: 0.7; margin-top: 5px;">Llamados Técnicos 2025</p>
        </div>
        
        <button class="nav-item active" onclick="showSection('home')">
            <span class="nav-item-icon">🏠</span>
            <span>Inicio</span>
        </button>
        
        <div class="nav-section">Herramientas de Estudio</div>
        
        <button class="nav-item" onclick="showSection('conceptos')">
            <span class="nav-item-icon">📚</span>
            <span>Conceptos</span>
        </button>
        
        <button class="nav-item" onclick="showSection('flashcards')">
            <span class="nav-item-icon">🎴</span>
            <span>Flashcards</span>
        </button>
        
        <button class="nav-item" onclick="showSection('pruebas')">
            <span class="nav-item-icon">📝</span>
            <span>Pruebas</span>
        </button>
        
        <button class="nav-item" onclick="showSection('vof')">
            <span class="nav-item-icon">✅</span>
            <span>Verdadero/Falso</span>
        </button>
        
        <button class="nav-item" onclick="showSection('ejercicios')">
            <span class="nav-item-icon">✍️</span>
            <span>Ejercicios Fórmulas</span>
        </button>
        
        <button class="nav-item" onclick="showSection('calculadoras')">
            <span class="nav-item-icon">🧮</span>
            <span>Calculadoras</span>
        </button>
        
        <button class="nav-item" onclick="showSection('mapas')">
            <span class="nav-item-icon">🗺️</span>
            <span>Mapas Conceptuales</span>
        </button>
        
        <div class="nav-section">Práctica Avanzada</div>
        
        <button class="nav-item" onclick="showSection('examen')">
            <span class="nav-item-icon">🎓</span>
            <span>Examen Simulado</span>
        </button>
        
        <button class="nav-item" onclick="showSection('repaso')">
            <span class="nav-item-icon">🔄</span>
            <span>Repaso Inteligente</span>
        </button>
        
        <div class="nav-section">Juegos</div>
        
        <button class="nav-item" onclick="showSection('desafio')">
            <span class="nav-item-icon">🎯</span>
            <span>Desafío Rápido</span>
        </button>
        
        <button class="nav-item" onclick="showSection('memoria')">
            <span class="nav-item-icon">🧠</span>
            <span>Memoria Técnica</span>
        </button>
        
        <button class="nav-item" onclick="showSection('supervivencia')">
            <span class="nav-item-icon">❤️</span>
            <span>Supervivencia</span>
        </button>
        
        <div class="nav-section">Progreso</div>
        
        <button class="nav-item" onclick="showSection('dashboard')">
            <span class="nav-item-icon">📊</span>
            <span>Dashboard</span>
        </button>
        
        <div class="nav-section">Ajustes</div>
        
        <div style="padding: 10px 15px;">
            <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
                <span style="font-size: 1.2em;">🔤</span>
                <span style="font-size: 0.9em;">Tamaño de texto</span>
            </div>
            <div style="display: flex; gap: 5px;">
                <button class="text-size-btn" onclick="setTextSize('small')" data-size="small" title="Pequeño">
                    <span style="font-size: 0.75em;">A</span>
                </button>
                <button class="text-size-btn active" onclick="setTextSize('normal')" data-size="normal" title="Normal">
                    <span style="font-size: 0.9em;">A</span>
                </button>
                <button class="text-size-btn" onclick="setTextSize('large')" data-size="large" title="Grande">
                    <span style="font-size: 1.1em;">A</span>
                </button>
                <button class="text-size-btn" onclick="setTextSize('xlarge')" data-size="xlarge" title="Extra Grande">
                    <span style="font-size: 1.3em;">A</span>
                </button>
            </div>
        </div>
        
        <div style="position: absolute; bottom: 20px; left: 20px; right: 20px; text-align: center; opacity: 0.5; font-size: 0.85em;">
            Febrero 2026
        </div>
    </nav>
    
    <main class="main-content" id="main-content">
        <!-- HOME -->
        <section class="section active" id="section-home">
            <div class="section-header">
                <h2>📚 Centro de Estudio DTD</h2>
                <p>Preparación completa para Llamados Técnicos 2025 - IP y Radio</p>
            </div>
            
            <div class="tip-banner">
                <div class="tip-icon">💡</div>
                <div class="tip-content">
                    <h4>Consejo del día</h4>
                    <p id="daily-tip">La primera zona de Fresnel debe estar despejada al menos en un 60% para evitar pérdidas por difracción.</p>
                </div>
            </div>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value">7</div>
                    <div class="stat-label">Materiales</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">600+</div>
                    <div class="stat-label">Preguntas</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">300+</div>
                    <div class="stat-label">Flashcards</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">290+</div>
                    <div class="stat-label">V/F</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">7</div>
                    <div class="stat-label">Calculadoras</div>
                </div>
            </div>
            
            <div class="cards-grid">
                <div class="home-card" onclick="showSection('conceptos')">
                    <div class="home-card-icon">📚</div>
                    <h3>Conceptos y Teoría</h3>
                    <p>Lee y estudia explicaciones detalladas de cada tema</p>
                    <span class="home-card-tag">8 temas</span>
                </div>
                
                <div class="home-card" onclick="showSection('flashcards')">
                    <div class="home-card-icon">🎴</div>
                    <h3>Flashcards</h3>
                    <p>Tarjetas de memoria interactivas con repaso espaciado</p>
                    <span class="home-card-tag">240+ tarjetas</span>
                </div>
                
                <div class="home-card" onclick="showSection('pruebas')">
                    <div class="home-card-icon">📝</div>
                    <h3>Pruebas</h3>
                    <p>Exámenes por tema con explicaciones detalladas</p>
                    <span class="home-card-tag">9 temas</span>
                </div>
                
                <div class="home-card" onclick="showSection('vof')">
                    <div class="home-card-icon">✅</div>
                    <h3>Verdadero/Falso</h3>
                    <p>Decide si cada afirmación es correcta o incorrecta</p>
                    <span class="home-card-tag">225+ preguntas</span>
                </div>
                
                <div class="home-card" onclick="showSection('ejercicios')">
                    <div class="home-card-icon">✍️</div>
                    <h3>Ejercicios</h3>
                    <p>Completa las fórmulas para memorizarlas</p>
                    <span class="home-card-tag">70+ ejercicios</span>
                </div>
                
                <div class="home-card" onclick="showSection('calculadoras')">
                    <div class="home-card-icon">🧮</div>
                    <h3>Calculadoras</h3>
                    <p>Herramientas para cálculos técnicos</p>
                    <span class="home-card-tag">6 calculadoras</span>
                </div>
                
                <div class="home-card" onclick="showSection('mapas')">
                    <div class="home-card-icon">🗺️</div>
                    <h3>Mapas Conceptuales</h3>
                    <p>Diagramas visuales interactivos</p>
                    <span class="home-card-tag">5 mapas</span>
                </div>
                
                <div class="home-card" onclick="showSection('desafio')">
                    <div class="home-card-icon">🎯</div>
                    <h3>Desafío Rápido</h3>
                    <p>60 segundos para responder. ¡Combos y puntuación!</p>
                    <span class="home-card-tag">🔥 Juego</span>
                </div>
                
                <div class="home-card" onclick="showSection('memoria')">
                    <div class="home-card-icon">🧠</div>
                    <h3>Memoria Técnica</h3>
                    <p>Encuentra parejas concepto-definición</p>
                    <span class="home-card-tag">🎮 Juego</span>
                </div>
                
                <div class="home-card" onclick="showSection('supervivencia')">
                    <div class="home-card-icon">❤️</div>
                    <h3>Supervivencia</h3>
                    <p>3 vidas. ¿Cuántas preguntas puedes responder?</p>
                    <span class="home-card-tag">💀 Juego</span>
                </div>
                
                <div class="home-card" onclick="showSection('examen')" style="border: 2px solid rgba(102, 126, 234, 0.5);">
                    <div class="home-card-icon">🎓</div>
                    <h3>Examen Simulado</h3>
                    <p>Timer + preguntas aleatorias. ¡Simula el examen real!</p>
                    <span class="home-card-tag">⭐ Nuevo</span>
                </div>
                
                <div class="home-card" onclick="showSection('repaso')" style="border: 2px solid rgba(102, 126, 234, 0.5);">
                    <div class="home-card-icon">🔄</div>
                    <h3>Repaso Inteligente</h3>
                    <p>Prioriza preguntas que fallaste antes</p>
                    <span class="home-card-tag">⭐ Nuevo</span>
                </div>
                
                <div class="home-card" onclick="showSection('dashboard')">
                    <div class="home-card-icon">📊</div>
                    <h3>Dashboard</h3>
                    <p>Seguimiento de tu progreso</p>
                    <span class="home-card-tag">Analíticas</span>
                </div>
            </div>
        </section>
        
        <!-- DESAFÍO RÁPIDO -->
        <section class="section" id="section-desafio">
            <div class="section-header">
                <h2>🎯 Desafío Rápido</h2>
                <p>60 segundos para responder. ¡Acumula combos y bate tu récord!</p>
            </div>
            
            <!-- Pantalla de inicio del juego -->
            <div id="desafio-start" class="desafio-screen">
                <div class="desafio-intro">
                    <div class="desafio-trophy">🏆</div>
                    <h3>¿Listo para el desafío?</h3>
                    <p>Responde correctamente la mayor cantidad de preguntas en 60 segundos.</p>
                    
                    <div class="desafio-rules">
                        <div class="rule"><span>⚡</span> Respuesta correcta: +10 pts</div>
                        <div class="rule"><span>🔥</span> Combo x2, x3, x4...: multiplicador</div>
                        <div class="rule"><span>❌</span> Error: pierdes el combo</div>
                        <div class="rule"><span>⏱️</span> 60 segundos de tiempo</div>
                    </div>
                    
                    <div class="desafio-category-select">
                        <label>Categoría:</label>
                        <select id="desafio-category">
                            <option value="all">🎲 Todas las categorías</option>
                            <option value="radio">📡 Radio</option>
                            <option value="ip">🌐 Redes IP</option>
                            <option value="fibra">💡 Fibra Óptica</option>
                            <option value="bert">📊 BERT/RFC2544</option>
                        </select>
                    </div>
                    
                    <div class="desafio-highscore">
                        <span>🏆 Récord:</span>
                        <span id="desafio-record">0</span> pts
                    </div>
                    
                    <button class="btn btn-primary btn-large" onclick="startDesafio()">
                        🚀 ¡Comenzar!
                    </button>
                </div>
            </div>
            
            <!-- Pantalla del juego -->
            <div id="desafio-game" class="desafio-screen" style="display: none;">
                <div class="desafio-hud">
                    <div class="hud-item hud-time">
                        <span class="hud-label">⏱️ Tiempo</span>
                        <span class="hud-value" id="desafio-timer">60</span>
                    </div>
                    <div class="hud-item hud-score">
                        <span class="hud-label">⭐ Puntos</span>
                        <span class="hud-value" id="desafio-score">0</span>
                    </div>
                    <div class="hud-item hud-combo">
                        <span class="hud-label">🔥 Combo</span>
                        <span class="hud-value" id="desafio-combo">x1</span>
                    </div>
                </div>
                
                <div class="desafio-question-container">
                    <div class="desafio-progress">
                        <span id="desafio-question-num">1</span>
                    </div>
                    <div class="desafio-question" id="desafio-question">
                        Cargando pregunta...
                    </div>
                </div>
                
                <div class="desafio-options" id="desafio-options">
                    <!-- Opciones dinámicas -->
                </div>
                
                <div class="desafio-feedback" id="desafio-feedback"></div>
            </div>
            
            <!-- Pantalla de resultados -->
            <div id="desafio-results" class="desafio-screen" style="display: none;">
                <div class="desafio-results-content">
                    <div class="results-header">
                        <span class="results-emoji" id="results-emoji">🎉</span>
                        <h3 id="results-title">¡Tiempo!</h3>
                    </div>
                    
                    <div class="results-score">
                        <div class="score-label">Puntuación Final</div>
                        <div class="score-value" id="final-score">0</div>
                    </div>
                    
                    <div class="results-stats">
                        <div class="result-stat">
                            <span class="stat-icon">✅</span>
                            <span class="stat-value" id="result-correct">0</span>
                            <span class="stat-label">Correctas</span>
                        </div>
                        <div class="result-stat">
                            <span class="stat-icon">❌</span>
                            <span class="stat-value" id="result-incorrect">0</span>
                            <span class="stat-label">Incorrectas</span>
                        </div>
                        <div class="result-stat">
                            <span class="stat-icon">🔥</span>
                            <span class="stat-value" id="result-max-combo">x1</span>
                            <span class="stat-label">Mejor Combo</span>
                        </div>
                    </div>
                    
                    <div class="new-record" id="new-record" style="display: none;">
                        🏆 ¡NUEVO RÉCORD! 🏆
                    </div>
                    
                    <div class="results-buttons">
                        <button class="btn btn-primary" onclick="startDesafio()">🔄 Jugar de nuevo</button>
                        <button class="btn btn-secondary" onclick="showDesafioStart()">📋 Menú</button>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- MEMORIA TÉCNICA -->
        <section class="section" id="section-memoria">
            <div class="section-header">
                <h2>🧠 Memoria Técnica</h2>
                <p>Encuentra las parejas: concepto ↔ definición</p>
            </div>
            
            <div id="memoria-start" class="memoria-screen">
                <div class="game-intro">
                    <div class="game-intro-icon">🧠</div>
                    <h3>¿Listo para entrenar tu memoria?</h3>
                    <p>Voltea las cartas y encuentra las parejas. Cada par correcto son puntos.</p>
                    
                    <div class="game-rules">
                        <div class="rule"><span>🎴</span> Voltea 2 cartas por turno</div>
                        <div class="rule"><span>✅</span> Par correcto: +100 pts</div>
                        <div class="rule"><span>🔄</span> Menos intentos = más puntos</div>
                        <div class="rule"><span>🏆</span> Completa todos los pares</div>
                    </div>
                    
                    <div class="memoria-difficulty">
                        <label>Dificultad:</label>
                        <select id="memoria-pairs">
                            <option value="6">Fácil (6 pares)</option>
                            <option value="8" selected>Normal (8 pares)</option>
                            <option value="12">Difícil (12 pares)</option>
                        </select>
                    </div>
                    
                    <div class="game-highscore">
                        <span>🏆 Récord:</span>
                        <span id="memoria-record">0</span> pts
                    </div>
                    
                    <button class="btn btn-primary btn-large" onclick="startMemoria()">
                        🚀 ¡Jugar!
                    </button>
                </div>
            </div>
            
            <div id="memoria-game" class="memoria-screen" style="display: none;">
                <div class="memoria-hud">
                    <div class="hud-item">
                        <span class="hud-label">🎴 Pares</span>
                        <span class="hud-value" id="memoria-found">0/8</span>
                    </div>
                    <div class="hud-item">
                        <span class="hud-label">🔄 Intentos</span>
                        <span class="hud-value" id="memoria-attempts">0</span>
                    </div>
                    <div class="hud-item">
                        <span class="hud-label">⭐ Puntos</span>
                        <span class="hud-value" id="memoria-score">0</span>
                    </div>
                </div>
                
                <div class="memoria-grid" id="memoria-grid">
                    <!-- Cartas dinámicas -->
                </div>
            </div>
            
            <div id="memoria-results" class="memoria-screen" style="display: none;">
                <div class="game-results-content">
                    <div class="results-header">
                        <span class="results-emoji" id="memoria-emoji">🎉</span>
                        <h3 id="memoria-title">¡Completado!</h3>
                    </div>
                    
                    <div class="results-score">
                        <div class="score-label">Puntuación</div>
                        <div class="score-value" id="memoria-final-score">0</div>
                    </div>
                    
                    <div class="results-stats">
                        <div class="result-stat">
                            <span class="stat-icon">🎴</span>
                            <span class="stat-value" id="memoria-result-pairs">0</span>
                            <span class="stat-label">Pares</span>
                        </div>
                        <div class="result-stat">
                            <span class="stat-icon">🔄</span>
                            <span class="stat-value" id="memoria-result-attempts">0</span>
                            <span class="stat-label">Intentos</span>
                        </div>
                    </div>
                    
                    <div class="new-record" id="memoria-new-record" style="display: none;">
                        🏆 ¡NUEVO RÉCORD! 🏆
                    </div>
                    
                    <div class="results-buttons">
                        <button class="btn btn-primary" onclick="startMemoria()">🔄 Jugar de nuevo</button>
                        <button class="btn btn-secondary" onclick="showMemoriaStart()">📋 Menú</button>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- MODO SUPERVIVENCIA -->
        <section class="section" id="section-supervivencia">
            <div class="section-header">
                <h2>❤️ Modo Supervivencia</h2>
                <p>3 vidas, sin límite de tiempo. ¿Cuánto puedes aguantar?</p>
            </div>
            
            <div id="supervivencia-start" class="supervivencia-screen">
                <div class="game-intro">
                    <div class="game-intro-icon">❤️</div>
                    <h3>¿Puedes sobrevivir?</h3>
                    <p>Responde sin presión de tiempo, pero cada error te cuesta una vida.</p>
                    
                    <div class="game-rules">
                        <div class="rule"><span>❤️</span> Empiezas con 3 vidas</div>
                        <div class="rule"><span>✅</span> Correcta: +10 pts</div>
                        <div class="rule"><span>❌</span> Error: pierdes 1 vida</div>
                        <div class="rule"><span>💀</span> Sin vidas = Game Over</div>
                    </div>
                    
                    <div class="supervivencia-category-select">
                        <label>Categoría:</label>
                        <select id="supervivencia-category">
                            <option value="all">🎲 Todas</option>
                            <option value="radio">📡 Radio</option>
                            <option value="ip">🌐 Redes IP</option>
                            <option value="fibra">💡 Fibra</option>
                            <option value="bert">📊 BERT</option>
                        </select>
                    </div>
                    
                    <div class="game-highscore">
                        <span>🏆 Récord:</span>
                        <span id="supervivencia-record">0</span> pts
                    </div>
                    
                    <button class="btn btn-primary btn-large" onclick="startSupervivencia()">
                        🚀 ¡Comenzar!
                    </button>
                </div>
            </div>
            
            <div id="supervivencia-game" class="supervivencia-screen" style="display: none;">
                <div class="supervivencia-hud">
                    <div class="hud-item hud-lives">
                        <span class="hud-label">❤️ Vidas</span>
                        <span class="hud-value" id="supervivencia-lives">❤️❤️❤️</span>
                    </div>
                    <div class="hud-item">
                        <span class="hud-label">⭐ Puntos</span>
                        <span class="hud-value" id="supervivencia-score">0</span>
                    </div>
                    <div class="hud-item">
                        <span class="hud-label">📊 Racha</span>
                        <span class="hud-value" id="supervivencia-streak">0</span>
                    </div>
                </div>
                
                <div class="supervivencia-question-container">
                    <div class="supervivencia-progress">
                        <span id="supervivencia-question-num">Pregunta 1</span>
                    </div>
                    <div class="supervivencia-question" id="supervivencia-question">
                        Cargando...
                    </div>
                </div>
                
                <div class="supervivencia-options" id="supervivencia-options">
                    <!-- Opciones dinámicas -->
                </div>
                
                <div class="supervivencia-feedback" id="supervivencia-feedback"></div>
            </div>
            
            <div id="supervivencia-results" class="supervivencia-screen" style="display: none;">
                <div class="game-results-content">
                    <div class="results-header">
                        <span class="results-emoji" id="supervivencia-emoji">💀</span>
                        <h3 id="supervivencia-title">Game Over</h3>
                    </div>
                    
                    <div class="results-score">
                        <div class="score-label">Puntuación Final</div>
                        <div class="score-value" id="supervivencia-final-score">0</div>
                    </div>
                    
                    <div class="results-stats">
                        <div class="result-stat">
                            <span class="stat-icon">✅</span>
                            <span class="stat-value" id="supervivencia-result-correct">0</span>
                            <span class="stat-label">Correctas</span>
                        </div>
                        <div class="result-stat">
                            <span class="stat-icon">🔥</span>
                            <span class="stat-value" id="supervivencia-result-streak">0</span>
                            <span class="stat-label">Mejor Racha</span>
                        </div>
                    </div>
                    
                    <div class="new-record" id="supervivencia-new-record" style="display: none;">
                        🏆 ¡NUEVO RÉCORD! 🏆
                    </div>
                    
                    <div class="results-buttons">
                        <button class="btn btn-primary" onclick="startSupervivencia()">🔄 Intentar de nuevo</button>
                        <button class="btn btn-secondary" onclick="showSupervivenciaStart()">📋 Menú</button>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- EXAMEN SIMULADO -->
        <section class="section" id="section-examen">
            <div class="section-header">
                <h2>🎓 Examen Simulado</h2>
                <p>Simula las condiciones reales del examen</p>
            </div>
            
            <!-- Configuración -->
            <div id="examen-config" class="examen-config">
                <div style="font-size: 4em; margin-bottom: 20px;">📝</div>
                <h3>Configura tu examen</h3>
                <p style="opacity: 0.7; margin-bottom: 20px;">Elige las opciones para tu simulación</p>
                
                <div class="examen-options">
                    <div class="examen-option">
                        <label>📊 Cantidad de preguntas:</label>
                        <select id="examen-cantidad">
                            <option value="10">10 preguntas</option>
                            <option value="20" selected>20 preguntas</option>
                            <option value="30">30 preguntas</option>
                            <option value="50">50 preguntas</option>
                        </select>
                    </div>
                    
                    <div class="examen-option">
                        <label>⏱️ Tiempo límite:</label>
                        <select id="examen-tiempo">
                            <option value="10">10 minutos</option>
                            <option value="20" selected>20 minutos</option>
                            <option value="30">30 minutos</option>
                            <option value="45">45 minutos</option>
                            <option value="60">60 minutos</option>
                        </select>
                    </div>
                    
                    <div class="examen-option">
                        <label>📚 Categoría:</label>
                        <select id="examen-categoria">
                            <option value="all">🎲 Todas las categorías</option>
                            <option value="radio">📡 Radio</option>
                            <option value="ip">🌐 Redes IP</option>
                            <option value="fibra">💡 Fibra</option>
                            <option value="bert">📊 BERT</option>
                        </select>
                    </div>
                    
                    <div class="examen-option">
                        <label>✅ Porcentaje aprobación:</label>
                        <select id="examen-aprobacion">
                            <option value="60">60%</option>
                            <option value="70" selected>70%</option>
                            <option value="80">80%</option>
                        </select>
                    </div>
                </div>
                
                <button class="btn btn-primary btn-large" onclick="startExamen()" style="margin-top: 20px;">
                    🚀 Comenzar Examen
                </button>
            </div>
            
            <!-- Examen en curso -->
            <div id="examen-active" style="display: none;">
                <div class="examen-timer" id="examen-timer">
                    <span>⏱️</span>
                    <span id="examen-time-display">20:00</span>
                </div>
                
                <div class="examen-progress-bar">
                    <div class="examen-progress-fill" id="examen-progress" style="width: 0%;"></div>
                </div>
                
                <div class="examen-question-card">
                    <div class="examen-question-header">
                        <span class="examen-question-num" id="examen-question-num">Pregunta 1 de 20</span>
                        <span class="examen-question-category" id="examen-question-cat">📡 Radio</span>
                    </div>
                    
                    <div class="examen-question-text" id="examen-question-text">
                        Cargando pregunta...
                    </div>
                    
                    <div class="examen-answers" id="examen-answers">
                        <!-- Opciones dinámicas -->
                    </div>
                    
                    <div class="examen-navigation">
                        <button class="examen-nav-btn examen-nav-prev" id="examen-prev" onclick="examenPrev()">
                            ← Anterior
                        </button>
                        <button class="examen-nav-btn examen-nav-next" id="examen-next" onclick="examenNext()">
                            Siguiente →
                        </button>
                    </div>
                </div>
                
                <div style="text-align: center; margin-top: 20px;">
                    <button class="btn btn-secondary" onclick="finishExamen()">
                        📋 Finalizar y Ver Resultados
                    </button>
                </div>
            </div>
            
            <!-- Resultados -->
            <div id="examen-results" class="examen-results" style="display: none;">
                <div style="font-size: 3em;" id="examen-result-emoji">🎉</div>
                <h2 id="examen-result-title">¡Examen Completado!</h2>
                
                <div class="examen-score-circle pass" id="examen-score-circle">
                    <span id="examen-score-percent">85%</span>
                    <span class="examen-score-label">Puntuación</span>
                </div>
                
                <div class="examen-details">
                    <div class="examen-detail">
                        <div class="examen-detail-value" id="examen-correct">17</div>
                        <div class="examen-detail-label">✅ Correctas</div>
                    </div>
                    <div class="examen-detail">
                        <div class="examen-detail-value" id="examen-incorrect">3</div>
                        <div class="examen-detail-label">❌ Incorrectas</div>
                    </div>
                    <div class="examen-detail">
                        <div class="examen-detail-value" id="examen-time-taken">15:23</div>
                        <div class="examen-detail-label">⏱️ Tiempo</div>
                    </div>
                </div>
                
                <div class="examen-review" id="examen-review">
                    <h3 style="margin-bottom: 20px;">📝 Revisión de respuestas incorrectas:</h3>
                    <!-- Revisión dinámica -->
                </div>
                
                <div style="margin-top: 30px; display: flex; gap: 15px; justify-content: center;">
                    <button class="btn btn-primary" onclick="showExamenConfig()">🔄 Nuevo Examen</button>
                    <button class="btn btn-secondary" onclick="showSection('home')">🏠 Inicio</button>
                </div>
            </div>
        </section>
        
        <!-- REPASO INTELIGENTE -->
        <section class="section" id="section-repaso">
            <div class="section-header">
                <h2>🔄 Repaso Inteligente</h2>
                <p>Sistema de repaso espaciado - prioriza lo que más te cuesta</p>
            </div>
            
            <!-- Vista principal -->
            <div id="repaso-main" class="repaso-intro">
                <div class="repaso-stats-grid">
                    <div class="repaso-stat-card">
                        <div class="repaso-stat-value" id="repaso-pendientes">0</div>
                        <div class="repaso-stat-label">Pendientes de repaso</div>
                    </div>
                    <div class="repaso-stat-card">
                        <div class="repaso-stat-value" id="repaso-dominadas">0</div>
                        <div class="repaso-stat-label">Dominadas</div>
                    </div>
                    <div class="repaso-stat-card">
                        <div class="repaso-stat-value" id="repaso-total-sesiones">0</div>
                        <div class="repaso-stat-label">Sesiones completadas</div>
                    </div>
                </div>
                
                <div id="repaso-empty" class="repaso-empty">
                    <div class="repaso-empty-icon">🎯</div>
                    <h3>¡Todavía no hay preguntas para repasar!</h3>
                    <p style="opacity: 0.7; margin-top: 10px;">Las preguntas que falles en pruebas, flashcards y V/F se agregarán aquí automáticamente.</p>
                    <p style="opacity: 0.7; margin-top: 5px;">Ve a practicar y vuelve después.</p>
                    <button class="btn btn-primary" onclick="showSection('pruebas')" style="margin-top: 20px;">
                        📝 Ir a Pruebas
                    </button>
                </div>
                
                <div id="repaso-queue" class="repaso-queue" style="display: none;">
                    <div class="repaso-queue-header">
                        <h3>📋 Cola de Repaso</h3>
                        <button class="btn btn-secondary" onclick="clearRepasoQueue()" style="padding: 8px 15px; font-size: 0.9em;">
                            🗑️ Limpiar todo
                        </button>
                    </div>
                    
                    <div class="repaso-queue-items" id="repaso-queue-items">
                        <!-- Items dinámicos -->
                    </div>
                    
                    <button class="btn btn-primary btn-large" onclick="startRepasoSession()" style="width: 100%; margin-top: 20px;">
                        🚀 Comenzar Sesión de Repaso
                    </button>
                </div>
            </div>
            
            <!-- Sesión de repaso -->
            <div id="repaso-session" class="repaso-session" style="display: none;">
                <div class="examen-progress-bar">
                    <div class="examen-progress-fill" id="repaso-progress" style="width: 0%;"></div>
                </div>
                
                <div class="repaso-card">
                    <div style="text-align: center; margin-bottom: 20px;">
                        <span id="repaso-session-num">1 / 5</span>
                    </div>
                    
                    <div id="repaso-question-container">
                        <div class="examen-question-text" id="repaso-question">
                            Cargando...
                        </div>
                        
                        <div class="examen-answers" id="repaso-answers">
                            <!-- Opciones dinámicas -->
                        </div>
                    </div>
                    
                    <div id="repaso-feedback" style="display: none; margin-top: 20px; padding: 20px; border-radius: 12px;">
                        <div id="repaso-feedback-text"></div>
                        
                        <p style="margin-top: 20px; text-align: center;">¿Qué tan difícil te resultó?</p>
                        
                        <div class="repaso-difficulty-btns">
                            <button class="repaso-difficulty-btn easy" onclick="rateRepaso('easy')">
                                <span>😊</span>
                                <span>Fácil</span>
                            </button>
                            <button class="repaso-difficulty-btn medium" onclick="rateRepaso('medium')">
                                <span>🤔</span>
                                <span>Normal</span>
                            </button>
                            <button class="repaso-difficulty-btn hard" onclick="rateRepaso('hard')">
                                <span>😓</span>
                                <span>Difícil</span>
                            </button>
                        </div>
                    </div>
                </div>
                
                <div style="text-align: center;">
                    <button class="btn btn-secondary" onclick="endRepasoSession()">
                        ⏹️ Terminar sesión
                    </button>
                </div>
            </div>
            
            <!-- Resultados sesión -->
            <div id="repaso-results" style="display: none; text-align: center; max-width: 600px; margin: 0 auto;">
                <div style="font-size: 4em; margin-bottom: 20px;">🎉</div>
                <h2>¡Sesión Completada!</h2>
                
                <div class="repaso-stats-grid" style="margin: 30px 0;">
                    <div class="repaso-stat-card">
                        <div class="repaso-stat-value" id="repaso-session-correct">0</div>
                        <div class="repaso-stat-label">Correctas</div>
                    </div>
                    <div class="repaso-stat-card">
                        <div class="repaso-stat-value" id="repaso-session-reviewed">0</div>
                        <div class="repaso-stat-label">Repasadas</div>
                    </div>
                    <div class="repaso-stat-card">
                        <div class="repaso-stat-value" id="repaso-session-remaining">0</div>
                        <div class="repaso-stat-label">Quedan pendientes</div>
                    </div>
                </div>
                
                <div style="display: flex; gap: 15px; justify-content: center;">
                    <button class="btn btn-primary" onclick="showRepasoMain()">📋 Ver Cola</button>
                    <button class="btn btn-secondary" onclick="showSection('home')">🏠 Inicio</button>
                </div>
            </div>
        </section>
        
        <!-- CONCEPTOS Y TEORÍA -->
        <section class="section" id="section-conceptos">
            <div class="section-header">
                <h2>📚 Conceptos y Teoría</h2>
                <p>Estudia las explicaciones detalladas de cada tema</p>
            </div>
            
            <div class="filter-tabs" id="conceptos-tabs">
                <button class="filter-tab active" data-topic="radio">📡 Radio</button>
                <button class="filter-tab" data-topic="propagacion">🌊 Propagación</button>
                <button class="filter-tab" data-topic="redes">🌐 Redes IP</button>
                <button class="filter-tab" data-topic="ethernet">🔌 Ethernet</button>
                <button class="filter-tab" data-topic="fibra">💡 Fibra Óptica</button>
                <button class="filter-tab" data-topic="gpon">🏠 GPON/FTTH</button>
                <button class="filter-tab" data-topic="bert">📊 BERT/RFC2544</button>
                <button class="filter-tab" data-topic="seguridad">🔒 Seguridad</button>
            </div>
            
            <div id="conceptos-content" class="conceptos-container">
                <!-- Contenido dinámico -->
            </div>
        </section>
        
        <!-- FLASHCARDS -->
        <section class="section" id="section-flashcards">
            <div class="section-header">
                <h2>🎴 Flashcards</h2>
                <p>Haz clic en la tarjeta para ver la respuesta</p>
            </div>
            
            <div class="stats-grid">
                <div class="stat-card success">
                    <div class="stat-value" id="fc-correct">0</div>
                    <div class="stat-label">✓ Correctas</div>
                </div>
                <div class="stat-card danger">
                    <div class="stat-value" id="fc-incorrect">0</div>
                    <div class="stat-label">✗ A Repasar</div>
                </div>
                <div class="stat-card warning">
                    <div class="stat-value" id="fc-remaining">0</div>
                    <div class="stat-label">📚 Restantes</div>
                </div>
            </div>
            
            <div class="tabs" id="fc-tabs">
                <button class="tab active" data-category="all">📚 Todas</button>
                <button class="tab" data-category="radio">📡 Radio</button>
                <button class="tab" data-category="ip">🌐 IP/Redes</button>
                <button class="tab" data-category="fibra">💡 Fibra</button>
                <button class="tab" data-category="formulas">🧮 Fórmulas</button>
            </div>
            
            <div class="progress-bar">
                <div class="progress-fill" id="fc-progress" style="width: 0%"></div>
            </div>
            
            <div class="flashcard-container">
                <div class="flashcard" id="flashcard" onclick="flipCard()">
                    <div class="flashcard-face flashcard-front">
                        <span class="flashcard-category" id="fc-category">Categoría</span>
                        <span class="flashcard-number" id="fc-number">1/50</span>
                        <div class="flashcard-content" id="fc-question">Pregunta</div>
                        <div class="flashcard-hint">👆 Clic para ver respuesta</div>
                    </div>
                    <div class="flashcard-face flashcard-back">
                        <span class="flashcard-category" id="fc-category-back">Categoría</span>
                        <span class="flashcard-number" id="fc-number-back">1/50</span>
                        <div class="flashcard-content" id="fc-answer">Respuesta</div>
                        <div class="flashcard-hint">¿Lo sabías?</div>
                    </div>
                </div>
            </div>
            
            <div class="controls">
                <button class="btn btn-danger" onclick="markCard(false)">❌ No lo sabía</button>
                <button class="btn btn-warning" onclick="skipCard()">⏭️ Saltar</button>
                <button class="btn btn-success" onclick="markCard(true)">✅ Lo sabía</button>
            </div>
            
            <div style="text-align: center; margin-top: 30px;">
                <button class="btn btn-secondary" onclick="resetFlashcards()">🔄 Reiniciar</button>
            </div>
        </section>
        
        <!-- PRUEBAS -->
        <section class="section" id="section-pruebas">
            <div class="section-header">
                <h2>📝 Pruebas por Tema</h2>
                <p>Selecciona un tema para comenzar</p>
            </div>
            
            <div class="tabs" id="test-tabs">
                <button class="tab active" data-test="propagacion">📡 Propagación</button>
                <button class="tab" data-test="minilink">🔧 Minilink</button>
                <button class="tab" data-test="tcpip">🌐 TCP/IP</button>
                <button class="tab" data-test="redesbasico">🔌 Redes Básico</button>
                <button class="tab" data-test="bert">📊 BERT</button>
                <button class="tab" data-test="rfc2544">📈 RFC 2544</button>
                <button class="tab" data-test="fibra">💡 Fibra</button>
                <button class="tab" data-test="transceptores">🔌 Transceptores</button>
                <button class="tab" data-test="avanzado">🎓 Avanzado</button>
            </div>
            
            <div class="stats-grid">
                <div class="stat-card success">
                    <div class="stat-value" id="test-correct">0</div>
                    <div class="stat-label">Correctas</div>
                </div>
                <div class="stat-card danger">
                    <div class="stat-value" id="test-incorrect">0</div>
                    <div class="stat-label">Incorrectas</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="test-score">0%</div>
                    <div class="stat-label">Puntuación</div>
                </div>
            </div>
            
            <div class="progress-bar">
                <div class="progress-fill" id="test-progress" style="width: 0%"></div>
            </div>
            
            <div id="test-container">
                <!-- Preguntas se cargan aquí -->
            </div>
            
            <div style="text-align: center; margin-top: 30px;">
                <button class="btn btn-secondary" onclick="resetTest()">🔄 Reiniciar Prueba</button>
            </div>
        </section>
        
        <!-- VERDADERO O FALSO -->
        <section class="section" id="section-vof">
            <div class="section-header">
                <h2>✅ Verdadero o Falso</h2>
                <p>Decide si cada afirmación es correcta o incorrecta</p>
            </div>
            
            <div class="stats-grid">
                <div class="stat-card success">
                    <div class="stat-value" id="vof-correct">0</div>
                    <div class="stat-label">Correctas</div>
                </div>
                <div class="stat-card danger">
                    <div class="stat-value" id="vof-incorrect">0</div>
                    <div class="stat-label">Incorrectas</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="vof-remaining">0</div>
                    <div class="stat-label">Restantes</div>
                </div>
            </div>
            
            <div class="tabs" id="vof-tabs">
                <button class="tab active" data-category="all">📚 Todos</button>
                <button class="tab" data-category="radio">📡 Radio</button>
                <button class="tab" data-category="ip">🌐 IP/Redes</button>
                <button class="tab" data-category="fibra">💡 Fibra</button>
                <button class="tab" data-category="bert">🔬 BERT/RFC</button>
            </div>
            
            <!-- Pantalla de inicio V/F -->
            <div class="card" id="vof-start" style="text-align: center; padding: 40px;">
                <h3 style="margin-bottom: 20px;">🎯 Prueba de Verdadero o Falso</h3>
                <p style="margin-bottom: 30px; opacity: 0.8;">Lee cada afirmación y decide si es verdadera o falsa.<br>¡Pon a prueba tus conocimientos!</p>
                <button class="btn btn-primary" onclick="startVoF()" style="font-size: 1.3em; padding: 20px 50px;">▶️ Comenzar</button>
            </div>
            
            <!-- Pregunta V/F -->
            <div class="card" id="vof-question" style="display: none;">
                <div style="text-align: center; margin-bottom: 10px; opacity: 0.6;" id="vof-counter">Pregunta 1 de 20</div>
                <div style="background: rgba(255,255,255,0.05); padding: 25px; border-radius: 15px; margin-bottom: 25px;">
                    <p style="font-size: 1.3em; line-height: 1.6; text-align: center;" id="vof-statement">Afirmación aquí</p>
                </div>
                <div style="display: flex; gap: 20px; justify-content: center;">
                    <button class="btn btn-success" onclick="answerVoF(true)" id="btn-verdadero" style="flex: 1; max-width: 200px; font-size: 1.2em; padding: 20px;">
                        ✅ VERDADERO
                    </button>
                    <button class="btn btn-danger" onclick="answerVoF(false)" id="btn-falso" style="flex: 1; max-width: 200px; font-size: 1.2em; padding: 20px;">
                        ❌ FALSO
                    </button>
                </div>
                <div id="vof-feedback" style="display: none; margin-top: 25px; padding: 20px; border-radius: 12px; text-align: center;"></div>
                <div style="text-align: center; margin-top: 20px;">
                    <button class="btn btn-primary" onclick="nextVoF()" id="vof-next-btn" style="display: none;">Siguiente →</button>
                </div>
            </div>
            
            <!-- Resultado V/F -->
            <div class="card" id="vof-result" style="display: none;">
                <h3 style="text-align: center; margin-bottom: 20px;">📊 Resultado Final</h3>
                <div style="text-align: center; font-size: 4em; margin-bottom: 20px;" id="vof-final-emoji">🎉</div>
                <div style="text-align: center; font-size: 2.5em; font-weight: bold; margin-bottom: 10px;" id="vof-final-score">0%</div>
                <div style="text-align: center; margin-bottom: 30px;" id="vof-final-text">Resultado</div>
                <div id="vof-review"></div>
                <div style="text-align: center; margin-top: 30px;">
                    <button class="btn btn-primary" onclick="startVoF()">🔄 Repetir</button>
                </div>
            </div>
        </section>
        
        <!-- EJERCICIOS -->
        <section class="section" id="section-ejercicios">
            <div class="section-header">
                <h2>✍️ Ejercicios de Fórmulas</h2>
                <p>Completa los espacios en blanco</p>
            </div>
            
            <div class="stats-grid">
                <div class="stat-card success">
                    <div class="stat-value" id="ex-correct">0</div>
                    <div class="stat-label">✓ Correctas</div>
                </div>
                <div class="stat-card danger">
                    <div class="stat-value" id="ex-incorrect">0</div>
                    <div class="stat-label">✗ Incorrectas</div>
                </div>
            </div>
            
            <div class="tabs" id="ex-tabs">
                <button class="tab active" data-category="all">📚 Todas</button>
                <button class="tab" data-category="radio">📡 Radio</button>
                <button class="tab" data-category="optica">💡 Óptica</button>
                <button class="tab" data-category="redes">🌐 Redes</button>
            </div>
            
            <div class="progress-bar">
                <div class="progress-fill" id="ex-progress" style="width: 0%"></div>
            </div>
            
            <div id="exercise-container" class="card">
                <!-- Ejercicio se carga aquí -->
            </div>
            
            <div class="controls" style="margin-top: 20px;">
                <button class="btn btn-secondary" onclick="prevExercise()">← Anterior</button>
                <button class="btn btn-primary" id="check-exercise-btn" onclick="checkExercise()">Verificar</button>
                <button class="btn btn-secondary" id="next-exercise-btn" onclick="nextExercise()" disabled>Siguiente →</button>
            </div>
        </section>
        
        <!-- CALCULADORAS -->
        <section class="section" id="section-calculadoras">
            <div class="section-header">
                <h2>🧮 Calculadoras Técnicas</h2>
                <p>Herramientas para cálculos de radioenlaces, fibra y redes</p>
            </div>
            
            <div class="tabs" id="calc-tabs">
                <button class="tab active" data-calc="fresnel">📡 Fresnel</button>
                <button class="tab" data-calc="power">💡 Power Budget</button>
                <button class="tab" data-calc="pon">🔱 PON/FTTH</button>
                <button class="tab" data-calc="subnet">🌐 Subnetting</button>
                <button class="tab" data-calc="link">📶 Link Budget</button>
                <button class="tab" data-calc="wavelength">🌊 Longitud Onda</button>
                <button class="tab" data-calc="ber">📊 BER</button>
            </div>
            
            <div id="calc-container">
                <!-- Calculadora Fresnel -->
                <div class="calculator-card" id="calc-fresnel">
                    <h3 style="text-align: center; margin-bottom: 20px;">📡 Zona de Fresnel</h3>
                    <div class="formula-display">rF = 17.3 × √(d₁ × d₂ / (f × d))</div>
                    
                    <div class="input-group">
                        <label>Distancia total (km)</label>
                        <input type="number" class="input" id="fresnel-d" placeholder="Ej: 10">
                    </div>
                    <div class="input-row">
                        <div class="input-group">
                            <label>Distancia d₁ (km)</label>
                            <input type="number" class="input" id="fresnel-d1" placeholder="Ej: 5">
                        </div>
                        <div class="input-group">
                            <label>Frecuencia (GHz)</label>
                            <input type="number" class="input" id="fresnel-f" placeholder="Ej: 7">
                        </div>
                    </div>
                    
                    <button class="btn btn-primary" style="width: 100%;" onclick="calcFresnel()">Calcular</button>
                    
                    <div class="result-box" id="fresnel-result">
                        <div class="result-value" id="fresnel-value">0 m</div>
                        <div class="result-label">Radio 1ª Zona de Fresnel</div>
                        <div class="result-details" id="fresnel-details"></div>
                    </div>
                </div>
                
                <!-- Calculadora Power Budget -->
                <div class="calculator-card" id="calc-power" style="display: none;">
                    <h3 style="text-align: center; margin-bottom: 20px;">💡 Power Budget Óptico</h3>
                    <div class="formula-display">Power Budget = Tx min - Rx sensibilidad</div>
                    
                    <div class="input-row">
                        <div class="input-group">
                            <label>Tx mínimo (dBm)</label>
                            <input type="number" class="input" id="pb-tx" placeholder="Ej: -5">
                        </div>
                        <div class="input-group">
                            <label>Rx sensibilidad (dBm)</label>
                            <input type="number" class="input" id="pb-rx" placeholder="Ej: -28">
                        </div>
                    </div>
                    <div class="input-row">
                        <div class="input-group">
                            <label>Distancia (km)</label>
                            <input type="number" class="input" id="pb-dist" placeholder="Ej: 20">
                        </div>
                        <div class="input-group">
                            <label>Atenuación (dB/km)</label>
                            <input type="number" class="input" id="pb-att" value="0.35">
                        </div>
                    </div>
                    <div class="input-row">
                        <div class="input-group">
                            <label>Empalmes</label>
                            <input type="number" class="input" id="pb-splices" value="0">
                        </div>
                        <div class="input-group">
                            <label>Conectores</label>
                            <input type="number" class="input" id="pb-conn" value="4">
                        </div>
                    </div>
                    
                    <button class="btn btn-primary" style="width: 100%;" onclick="calcPowerBudget()">Calcular</button>
                    
                    <div class="result-box" id="pb-result">
                        <div class="result-value" id="pb-value">0 dB</div>
                        <div class="result-label" id="pb-status">Estado</div>
                        <div class="result-details" id="pb-details"></div>
                    </div>
                </div>
                
                <!-- Calculadora Subnetting -->
                <div class="calculator-card" id="calc-subnet" style="display: none;">
                    <h3 style="text-align: center; margin-bottom: 20px;">🌐 Subnetting</h3>
                    <div class="formula-display">Hosts = 2^(32 - prefijo) - 2</div>
                    
                    <div class="input-row">
                        <div class="input-group">
                            <label>Dirección IP</label>
                            <input type="text" class="input" id="subnet-ip" placeholder="192.168.10.0">
                        </div>
                        <div class="input-group">
                            <label>Prefijo CIDR</label>
                            <select class="input" id="subnet-cidr">
                                <option value="24">/24 (255.255.255.0)</option>
                                <option value="25">/25 (255.255.255.128)</option>
                                <option value="26">/26 (255.255.255.192)</option>
                                <option value="27">/27 (255.255.255.224)</option>
                                <option value="28">/28 (255.255.255.240)</option>
                                <option value="29">/29 (255.255.255.248)</option>
                                <option value="30">/30 (255.255.255.252)</option>
                            </select>
                        </div>
                    </div>
                    
                    <button class="btn btn-primary" style="width: 100%;" onclick="calcSubnet()">Calcular</button>
                    
                    <div class="result-box" id="subnet-result">
                        <div class="result-value" id="subnet-value">0</div>
                        <div class="result-label">Hosts utilizables</div>
                        <div class="result-details" id="subnet-details"></div>
                    </div>
                </div>
                
                <!-- Calculadora Link Budget -->
                <div class="calculator-card" id="calc-link" style="display: none;">
                    <h3 style="text-align: center; margin-bottom: 20px;">📶 Link Budget Radio</h3>
                    <div class="formula-display">ABF = 92.4 + 20×log(f) + 20×log(d)</div>
                    
                    <div class="input-row">
                        <div class="input-group">
                            <label>Potencia Tx (dBm)</label>
                            <input type="number" class="input" id="lb-ptx" placeholder="Ej: 20">
                        </div>
                        <div class="input-group">
                            <label>Frecuencia (GHz)</label>
                            <input type="number" class="input" id="lb-freq" placeholder="Ej: 7">
                        </div>
                    </div>
                    <div class="input-row">
                        <div class="input-group">
                            <label>Distancia (km)</label>
                            <input type="number" class="input" id="lb-dist" placeholder="Ej: 10">
                        </div>
                        <div class="input-group">
                            <label>Sensibilidad Rx (dBm)</label>
                            <input type="number" class="input" id="lb-sens" placeholder="Ej: -80">
                        </div>
                    </div>
                    <div class="input-row">
                        <div class="input-group">
                            <label>Ganancia Tx (dBi)</label>
                            <input type="number" class="input" id="lb-gtx" placeholder="Ej: 35">
                        </div>
                        <div class="input-group">
                            <label>Ganancia Rx (dBi)</label>
                            <input type="number" class="input" id="lb-grx" placeholder="Ej: 35">
                        </div>
                    </div>
                    
                    <button class="btn btn-primary" style="width: 100%;" onclick="calcLinkBudget()">Calcular</button>
                    
                    <div class="result-box" id="lb-result">
                        <div class="result-value" id="lb-value">0 dB</div>
                        <div class="result-label" id="lb-status">Fade Margin</div>
                        <div class="result-details" id="lb-details"></div>
                    </div>
                </div>
                
                <!-- Calculadora Wavelength -->
                <div class="calculator-card" id="calc-wavelength" style="display: none;">
                    <h3 style="text-align: center; margin-bottom: 20px;">🌊 Longitud de Onda</h3>
                    <div class="formula-display">λ (cm) = 30 / f (GHz)</div>
                    
                    <div class="input-group">
                        <label>Frecuencia (GHz)</label>
                        <input type="number" class="input" id="wl-freq" placeholder="Ej: 7">
                    </div>
                    
                    <button class="btn btn-primary" style="width: 100%;" onclick="calcWavelength()">Calcular</button>
                    
                    <div class="result-box" id="wl-result">
                        <div class="result-value" id="wl-value">0 cm</div>
                        <div class="result-label">Longitud de onda</div>
                        <div class="result-details" id="wl-details"></div>
                    </div>
                </div>
                
                <!-- Calculadora PON/FTTH -->
                <div class="calculator-card" id="calc-pon" style="display: none;">
                    <h3 style="text-align: center; margin-bottom: 20px;">🔱 Pérdidas PON/FTTH</h3>
                    <div class="formula-display">Pérdida Total = Fibra + Splitters + Conectores + Empalmes</div>
                    
                    <div class="input-row">
                        <div class="input-group">
                            <label>Distancia fibra (km)</label>
                            <input type="number" class="input" id="pon-dist" placeholder="Ej: 15" step="0.1">
                        </div>
                        <div class="input-group">
                            <label>Atenuación (dB/km)</label>
                            <input type="number" class="input" id="pon-att" value="0.35" step="0.01">
                        </div>
                    </div>
                    
                    <h4 style="margin: 15px 0 10px; opacity: 0.8;">Splitters (seleccionar los usados):</h4>
                    <div class="input-row">
                        <div class="input-group">
                            <label>Splitter 1:2 (3.5 dB)</label>
                            <input type="number" class="input" id="pon-sp2" placeholder="0" min="0" value="0">
                        </div>
                        <div class="input-group">
                            <label>Splitter 1:4 (7 dB)</label>
                            <input type="number" class="input" id="pon-sp4" placeholder="0" min="0" value="0">
                        </div>
                    </div>
                    <div class="input-row">
                        <div class="input-group">
                            <label>Splitter 1:8 (10.5 dB)</label>
                            <input type="number" class="input" id="pon-sp8" placeholder="0" min="0" value="0">
                        </div>
                        <div class="input-group">
                            <label>Splitter 1:16 (14 dB)</label>
                            <input type="number" class="input" id="pon-sp16" placeholder="0" min="0" value="0">
                        </div>
                    </div>
                    <div class="input-row">
                        <div class="input-group">
                            <label>Splitter 1:32 (17 dB)</label>
                            <input type="number" class="input" id="pon-sp32" placeholder="0" min="0" value="0">
                        </div>
                        <div class="input-group">
                            <label>Splitter 1:64 (20 dB)</label>
                            <input type="number" class="input" id="pon-sp64" placeholder="0" min="0" value="0">
                        </div>
                    </div>
                    
                    <div class="input-row">
                        <div class="input-group">
                            <label>Conectores (0.5 dB c/u)</label>
                            <input type="number" class="input" id="pon-conn" placeholder="Ej: 4" min="0" value="4">
                        </div>
                        <div class="input-group">
                            <label>Empalmes (0.1 dB c/u)</label>
                            <input type="number" class="input" id="pon-splice" placeholder="Ej: 3" min="0" value="3">
                        </div>
                    </div>
                    
                    <div class="input-row">
                        <div class="input-group">
                            <label>OLT Tx mínimo (dBm)</label>
                            <input type="number" class="input" id="pon-olt-tx" value="3" step="0.1">
                        </div>
                        <div class="input-group">
                            <label>ONT Rx sensibilidad (dBm)</label>
                            <input type="number" class="input" id="pon-ont-rx" value="-28" step="0.1">
                        </div>
                    </div>
                    
                    <button class="btn btn-primary" style="width: 100%;" onclick="calcPON()">Calcular Pérdidas</button>
                    
                    <div class="result-box" id="pon-result">
                        <div class="result-value" id="pon-value">0 dB</div>
                        <div class="result-label" id="pon-status">Pérdida Total</div>
                        <div class="result-details" id="pon-details"></div>
                    </div>
                    
                    <div style="margin-top: 20px; padding: 15px; background: rgba(255,255,255,0.05); border-radius: 10px;">
                        <h4 style="margin-bottom: 10px;">📋 Referencia de Pérdidas por Splitter:</h4>
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; font-size: 0.9em;">
                            <div>1:2 → <strong>3.5 dB</strong></div>
                            <div>1:4 → <strong>7 dB</strong></div>
                            <div>1:8 → <strong>10.5 dB</strong></div>
                            <div>1:16 → <strong>14 dB</strong></div>
                            <div>1:32 → <strong>17 dB</strong></div>
                            <div>1:64 → <strong>20 dB</strong></div>
                        </div>
                        <p style="margin-top: 10px; opacity: 0.7; font-size: 0.85em;">Power Budget típico GPON Clase B+: <strong>28 dB</strong></p>
                    </div>
                </div>
                
                <!-- Calculadora BER -->
                <div class="calculator-card" id="calc-ber" style="display: none;">
                    <h3 style="text-align: center; margin-bottom: 20px;">📊 Tasa de Error (BER)</h3>
                    <div class="formula-display">BER = Bits error / Bits totales</div>
                    
                    <div class="input-row">
                        <div class="input-group">
                            <label>Bits con error</label>
                            <input type="number" class="input" id="ber-errors" placeholder="Ej: 1">
                        </div>
                        <div class="input-group">
                            <label>Bits totales</label>
                            <input type="text" class="input" id="ber-total" placeholder="Ej: 1000000000">
                        </div>
                    </div>
                    
                    <button class="btn btn-primary" style="width: 100%;" onclick="calcBER()">Calcular</button>
                    
                    <div class="result-box" id="ber-result">
                        <div class="result-value" id="ber-value">0</div>
                        <div class="result-label" id="ber-status">BER</div>
                        <div class="result-details" id="ber-details"></div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- MAPAS CONCEPTUALES -->
        <section class="section" id="section-mapas">
            <div class="section-header">
                <h2>🗺️ Mapas Conceptuales</h2>
                <p>Diagramas visuales para entender conceptos clave</p>
            </div>
            
            <div class="tabs" id="map-tabs">
                <button class="tab active" data-map="osi">🌐 OSI/TCP-IP</button>
                <button class="tab" data-map="ethernet">🔌 Ethernet/Redes</button>
                <button class="tab" data-map="gpon">🔱 GPON/FTTH</button>
                <button class="tab" data-map="fibra">💡 Fibra</button>
                <button class="tab" data-map="radio">📡 Config. Radio</button>
                <button class="tab" data-map="transceptores">🔌 Transceptores</button>
                <button class="tab" data-map="avanzado">🎓 Avanzado</button>
            </div>
            
            <div id="map-container">
                <!-- Mapa GPON/FTTH -->
                <div class="card" id="map-gpon" style="display: none;">
                    <h3 style="text-align: center; margin-bottom: 30px;">🔱 Arquitectura GPON / FTTH</h3>
                    
                    <!-- Diagrama Visual -->
                    <div style="background: linear-gradient(135deg, rgba(102,126,234,0.1), rgba(118,75,162,0.1)); border-radius: 15px; padding: 25px; margin-bottom: 25px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 15px;">
                            <!-- OLT -->
                            <div style="text-align: center; flex: 1; min-width: 120px;">
                                <div style="font-size: 3em;">🏢</div>
                                <div style="font-weight: bold; color: var(--primary);">OLT</div>
                                <div style="font-size: 0.8em; opacity: 0.8;">Central</div>
                                <div style="font-size: 0.75em; background: rgba(255,255,255,0.1); padding: 5px; border-radius: 5px; margin-top: 5px;">
                                    Tx: 1490nm ↓<br>Rx: 1310nm ↑
                                </div>
                            </div>
                            
                            <!-- Fibra Troncal -->
                            <div style="flex: 0.5; text-align: center;">
                                <div style="height: 4px; background: linear-gradient(90deg, #ffc107, #ff9800); margin: 20px 0;"></div>
                                <div style="font-size: 0.8em;">Fibra Troncal<br>(hasta 20km)</div>
                            </div>
                            
                            <!-- Splitter -->
                            <div style="text-align: center; flex: 1; min-width: 120px;">
                                <div style="font-size: 2.5em;">🔀</div>
                                <div style="font-weight: bold; color: var(--warning);">SPLITTER</div>
                                <div style="font-size: 0.8em; opacity: 0.8;">Pasivo (sin energía)</div>
                                <div style="font-size: 0.75em; background: rgba(255,255,255,0.1); padding: 5px; border-radius: 5px; margin-top: 5px;">
                                    1:32 = 17dB<br>1:64 = 20dB
                                </div>
                            </div>
                            
                            <!-- Fibra Distribución -->
                            <div style="flex: 0.5; text-align: center;">
                                <div style="height: 4px; background: linear-gradient(90deg, #4caf50, #8bc34a); margin: 20px 0;"></div>
                                <div style="font-size: 0.8em;">Fibra Drop</div>
                            </div>
                            
                            <!-- ONTs -->
                            <div style="text-align: center; flex: 1; min-width: 120px;">
                                <div style="font-size: 2em;">🏠 🏠 🏠</div>
                                <div style="font-weight: bold; color: var(--success);">ONT/ONU</div>
                                <div style="font-size: 0.8em; opacity: 0.8;">Usuarios</div>
                                <div style="font-size: 0.75em; background: rgba(255,255,255,0.1); padding: 5px; border-radius: 5px; margin-top: 5px;">
                                    Hasta 128 por PON
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Velocidades GPON -->
                    <h4 style="text-align: center; margin: 25px 0 15px;">📊 Velocidades PON</h4>
                    <div class="cards-grid" style="grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));">
                        <div class="card" style="text-align: center; border-top: 4px solid #2196f3;">
                            <h4 style="color: #2196f3;">GPON</h4>
                            <div style="font-size: 1.1em;">↓ 2.488 Gbps</div>
                            <div style="font-size: 1.1em;">↑ 1.244 Gbps</div>
                            <div style="font-size: 0.8em; opacity: 0.7; margin-top: 5px;">ITU-T G.984</div>
                        </div>
                        <div class="card" style="text-align: center; border-top: 4px solid #9c27b0;">
                            <h4 style="color: #9c27b0;">XG-PON</h4>
                            <div style="font-size: 1.1em;">↓ 10 Gbps</div>
                            <div style="font-size: 1.1em;">↑ 2.5 Gbps</div>
                            <div style="font-size: 0.8em; opacity: 0.7; margin-top: 5px;">ITU-T G.987</div>
                        </div>
                        <div class="card" style="text-align: center; border-top: 4px solid #4caf50;">
                            <h4 style="color: #4caf50;">XGS-PON</h4>
                            <div style="font-size: 1.1em;">↓ 10 Gbps</div>
                            <div style="font-size: 1.1em;">↑ 10 Gbps</div>
                            <div style="font-size: 0.8em; opacity: 0.7; margin-top: 5px;">Simétrico</div>
                        </div>
                        <div class="card" style="text-align: center; border-top: 4px solid #ff9800;">
                            <h4 style="color: #ff9800;">NG-PON2</h4>
                            <div style="font-size: 1.1em;">↓ 40 Gbps</div>
                            <div style="font-size: 1.1em;">↑ 10 Gbps</div>
                            <div style="font-size: 0.8em; opacity: 0.7; margin-top: 5px;">TWDM</div>
                        </div>
                    </div>
                    
                    <!-- Características -->
                    <h4 style="text-align: center; margin: 25px 0 15px;">⚙️ Características GPON</h4>
                    <div class="cards-grid">
                        <div class="card" style="border-left: 4px solid var(--primary);">
                            <h4>📤 Downstream (OLT→ONT)</h4>
                            <ul style="list-style: none; opacity: 0.9;">
                                <li>• Broadcast a todas las ONTs</li>
                                <li>• Cada ONT filtra sus datos</li>
                                <li>• Cifrado AES por seguridad</li>
                                <li>• λ = 1490 nm</li>
                            </ul>
                        </div>
                        <div class="card" style="border-left: 4px solid var(--success);">
                            <h4>📥 Upstream (ONT→OLT)</h4>
                            <ul style="list-style: none; opacity: 0.9;">
                                <li>• TDMA (ventanas de tiempo)</li>
                                <li>• OLT asigna slots a cada ONT</li>
                                <li>• Ranging para sincronización</li>
                                <li>• λ = 1310 nm</li>
                            </ul>
                        </div>
                    </div>
                    
                    <!-- Elementos -->
                    <h4 style="text-align: center; margin: 25px 0 15px;">🔧 Elementos de Red PON</h4>
                    <div class="cards-grid" style="grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));">
                        <div class="card" style="text-align: center;">
                            <div style="font-size: 2em;">🏢</div>
                            <h4>OLT</h4>
                            <p style="font-size: 0.9em;">Optical Line Terminal</p>
                            <ul style="list-style: none; font-size: 0.85em; opacity: 0.9;">
                                <li>En la central</li>
                                <li>Gestiona toda la PON</li>
                                <li>Conexión a red core</li>
                            </ul>
                        </div>
                        <div class="card" style="text-align: center;">
                            <div style="font-size: 2em;">🔀</div>
                            <h4>Splitter</h4>
                            <p style="font-size: 0.9em;">Divisor Óptico Pasivo</p>
                            <ul style="list-style: none; font-size: 0.85em; opacity: 0.9;">
                                <li>No requiere energía</li>
                                <li>1:2 hasta 1:128</li>
                                <li>Divide potencia óptica</li>
                            </ul>
                        </div>
                        <div class="card" style="text-align: center;">
                            <div style="font-size: 2em;">📦</div>
                            <h4>ONT/ONU</h4>
                            <p style="font-size: 0.9em;">Optical Network Terminal</p>
                            <ul style="list-style: none; font-size: 0.85em; opacity: 0.9;">
                                <li>En casa del cliente</li>
                                <li>Conversión óptico-eléctrico</li>
                                <li>Puertos ETH, WiFi, Tel</li>
                            </ul>
                        </div>
                        <div class="card" style="text-align: center;">
                            <div style="font-size: 2em;">🏗️</div>
                            <h4>MDU</h4>
                            <p style="font-size: 0.9em;">Multi Dwelling Unit</p>
                            <ul style="list-style: none; font-size: 0.85em; opacity: 0.9;">
                                <li>Para edificios</li>
                                <li>Múltiples puertos</li>
                                <li>VDSL2 o Ethernet</li>
                            </ul>
                        </div>
                    </div>
                    
                    <!-- Power Budget -->
                    <h4 style="text-align: center; margin: 25px 0 15px;">💡 Power Budget GPON</h4>
                    <div class="card" style="background: linear-gradient(135deg, rgba(76,175,80,0.2), rgba(33,150,243,0.2));">
                        <div style="text-align: center; margin-bottom: 15px;">
                            <span style="font-size: 1.3em; font-weight: bold;">Clase B+ = 28 dB</span>
                            <span style="margin: 0 15px;">|</span>
                            <span style="font-size: 1.3em; font-weight: bold;">Clase C+ = 32 dB</span>
                        </div>
                        <table style="width: 100%; border-collapse: collapse; font-size: 0.9em;">
                            <tr style="background: rgba(255,255,255,0.1);">
                                <th style="padding: 8px; text-align: left;">Elemento</th>
                                <th style="padding: 8px; text-align: center;">Pérdida típica</th>
                            </tr>
                            <tr><td style="padding: 8px;">Fibra SM @1310nm</td><td style="text-align: center;">0.35 dB/km</td></tr>
                            <tr style="background: rgba(255,255,255,0.05);"><td style="padding: 8px;">Fibra SM @1490nm</td><td style="text-align: center;">0.25 dB/km</td></tr>
                            <tr><td style="padding: 8px;">Splitter 1:32</td><td style="text-align: center;">17 dB</td></tr>
                            <tr style="background: rgba(255,255,255,0.05);"><td style="padding: 8px;">Splitter 1:64</td><td style="text-align: center;">20 dB</td></tr>
                            <tr><td style="padding: 8px;">Conector SC/APC</td><td style="text-align: center;">0.3-0.5 dB</td></tr>
                            <tr style="background: rgba(255,255,255,0.05);"><td style="padding: 8px;">Empalme fusión</td><td style="text-align: center;">0.1 dB</td></tr>
                        </table>
                    </div>
                    
                    <!-- Protocolos -->
                    <h4 style="text-align: center; margin: 25px 0 15px;">📡 Protocolos y Gestión</h4>
                    <div class="cards-grid">
                        <div class="card" style="text-align: center; background: rgba(156,39,176,0.1);">
                            <h4>GEM</h4>
                            <p>GPON Encapsulation Method</p>
                            <div style="font-size: 0.85em; opacity: 0.8;">Encapsula Ethernet, TDM, etc.</div>
                        </div>
                        <div class="card" style="text-align: center; background: rgba(33,150,243,0.1);">
                            <h4>OMCI</h4>
                            <p>ONT Management & Control</p>
                            <div style="font-size: 0.85em; opacity: 0.8;">Gestión remota de ONTs</div>
                        </div>
                        <div class="card" style="text-align: center; background: rgba(76,175,80,0.1);">
                            <h4>PLOAM</h4>
                            <p>Physical Layer OAM</p>
                            <div style="font-size: 0.85em; opacity: 0.8;">Activación, ranging, alarmas</div>
                        </div>
                    </div>
                </div>
                
                <!-- Mapa OSI -->
                <div class="card" id="map-osi">
                    <h3 style="text-align: center; margin-bottom: 30px;">Modelo OSI vs TCP/IP</h3>
                    
                    <div class="layer">
                        <div class="layer-number">7</div>
                        <div class="layer-content">
                            <div class="layer-box" style="background: rgba(156,39,176,0.2);">
                                <h4>Aplicación</h4>
                                <ul><li>HTTP, FTP, DNS</li><li>SMTP, POP3</li></ul>
                            </div>
                        </div>
                    </div>
                    
                    <div class="layer">
                        <div class="layer-number">6</div>
                        <div class="layer-content">
                            <div class="layer-box" style="background: rgba(103,58,183,0.2);">
                                <h4>Presentación</h4>
                                <ul><li>Formato datos</li><li>Cifrado</li></ul>
                            </div>
                        </div>
                    </div>
                    
                    <div class="layer">
                        <div class="layer-number">5</div>
                        <div class="layer-content">
                            <div class="layer-box" style="background: rgba(63,81,181,0.2);">
                                <h4>Sesión</h4>
                                <ul><li>Control diálogos</li><li>Sincronización</li></ul>
                            </div>
                        </div>
                    </div>
                    
                    <div class="layer">
                        <div class="layer-number">4</div>
                        <div class="layer-content">
                            <div class="layer-box" style="background: rgba(33,150,243,0.2);">
                                <h4>Transporte</h4>
                                <ul><li>TCP: Conexión, confiable</li><li>UDP: Sin conexión, rápido</li><li>Puertos 0-65535</li></ul>
                            </div>
                        </div>
                    </div>
                    
                    <div class="layer">
                        <div class="layer-number">3</div>
                        <div class="layer-content">
                            <div class="layer-box" style="background: rgba(0,188,212,0.2);">
                                <h4>Red</h4>
                                <ul><li>IP: 32 bits (IPv4)</li><li>Routing: RIP, OSPF</li><li>ICMP, ARP, NAT</li></ul>
                            </div>
                        </div>
                    </div>
                    
                    <div class="layer">
                        <div class="layer-number">2</div>
                        <div class="layer-content">
                            <div class="layer-box" style="background: rgba(76,175,80,0.2);">
                                <h4>Enlace</h4>
                                <ul><li>MAC: 48 bits</li><li>Ethernet, WiFi</li><li>Switch opera aquí</li></ul>
                            </div>
                        </div>
                    </div>
                    
                    <div class="layer">
                        <div class="layer-number">1</div>
                        <div class="layer-content">
                            <div class="layer-box" style="background: rgba(255,152,0,0.2);">
                                <h4>Física</h4>
                                <ul><li>Cables: UTP, Fibra</li><li>Conectores: RJ-45, LC</li><li>Hub opera aquí</li></ul>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Mapa Ethernet/Redes -->
                <div class="card" id="map-ethernet" style="display: none;">
                    <h3 style="text-align: center; margin-bottom: 30px;">🔌 Conceptos de Redes y Ethernet</h3>
                    
                    <!-- Clasificación de Redes -->
                    <div class="cards-grid">
                        <div class="card" style="border-top: 4px solid var(--primary);">
                            <h4 style="color: var(--primary);">🏢 LAN</h4>
                            <p>Local Area Network</p>
                            <ul style="list-style: none; opacity: 0.9;">
                                <li>• Área: Edificio/Campus</li>
                                <li>• Alta velocidad</li>
                                <li>• Propiedad privada</li>
                            </ul>
                        </div>
                        <div class="card" style="border-top: 4px solid var(--success);">
                            <h4 style="color: var(--success);">🌆 MAN</h4>
                            <p>Metropolitan Area Network</p>
                            <ul style="list-style: none; opacity: 0.9;">
                                <li>• Área: Ciudad</li>
                                <li>• Media velocidad</li>
                                <li>• Interconecta LANs</li>
                            </ul>
                        </div>
                        <div class="card" style="border-top: 4px solid var(--warning);">
                            <h4 style="color: var(--warning);">🌍 WAN</h4>
                            <p>Wide Area Network</p>
                            <ul style="list-style: none; opacity: 0.9;">
                                <li>• Área: País/Continente</li>
                                <li>• Menor velocidad</li>
                                <li>• Líneas arrendadas</li>
                            </ul>
                        </div>
                    </div>
                    
                    <!-- Dispositivos por Capa -->
                    <h4 style="text-align: center; margin: 30px 0 20px;">📍 Dispositivos por Capa</h4>
                    <div class="cards-grid">
                        <div class="card" style="text-align: center; border-left: 4px solid #ff9800;">
                            <div style="font-size: 2em;">🔌</div>
                            <h4>Hub</h4>
                            <p style="font-weight: bold; color: #ff9800;">Capa 1 - Física</p>
                            <ul style="list-style: none; font-size: 0.9em;">
                                <li>Repite a TODOS</li>
                                <li>Causa colisiones</li>
                                <li>Half Duplex</li>
                            </ul>
                        </div>
                        <div class="card" style="text-align: center; border-left: 4px solid #4caf50;">
                            <div style="font-size: 2em;">🔀</div>
                            <h4>Switch</h4>
                            <p style="font-weight: bold; color: #4caf50;">Capa 2 - Enlace</p>
                            <ul style="list-style: none; font-size: 0.9em;">
                                <li>Envía solo al destino</li>
                                <li>Usa direcciones MAC</li>
                                <li>Full Duplex</li>
                            </ul>
                        </div>
                        <div class="card" style="text-align: center; border-left: 4px solid #2196f3;">
                            <div style="font-size: 2em;">🌐</div>
                            <h4>Router</h4>
                            <p style="font-weight: bold; color: #2196f3;">Capa 3 - Red</p>
                            <ul style="list-style: none; font-size: 0.9em;">
                                <li>Interconecta redes</li>
                                <li>Usa direcciones IP</li>
                                <li>Detiene broadcasts</li>
                            </ul>
                        </div>
                    </div>
                    
                    <!-- Trama Ethernet -->
                    <h4 style="text-align: center; margin: 30px 0 20px;">📦 Trama Ethernet</h4>
                    <div class="card" style="background: linear-gradient(135deg, rgba(33,150,243,0.2), rgba(156,39,176,0.2));">
                        <div style="display: flex; flex-wrap: wrap; gap: 5px; justify-content: center; text-align: center;">
                            <div style="background: rgba(255,255,255,0.1); padding: 10px; border-radius: 5px; min-width: 80px;">
                                <div style="font-weight: bold;">Preámbulo</div>
                                <div style="font-size: 0.8em;">8 bytes</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.1); padding: 10px; border-radius: 5px; min-width: 80px;">
                                <div style="font-weight: bold;">MAC Dest</div>
                                <div style="font-size: 0.8em;">6 bytes</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.1); padding: 10px; border-radius: 5px; min-width: 80px;">
                                <div style="font-weight: bold;">MAC Orig</div>
                                <div style="font-size: 0.8em;">6 bytes</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.1); padding: 10px; border-radius: 5px; min-width: 60px;">
                                <div style="font-weight: bold;">Tipo</div>
                                <div style="font-size: 0.8em;">2 bytes</div>
                            </div>
                            <div style="background: rgba(76,175,80,0.3); padding: 10px; border-radius: 5px; min-width: 120px;">
                                <div style="font-weight: bold;">DATOS</div>
                                <div style="font-size: 0.8em;">46-1500 bytes</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.1); padding: 10px; border-radius: 5px; min-width: 60px;">
                                <div style="font-weight: bold;">FCS</div>
                                <div style="font-size: 0.8em;">4 bytes</div>
                            </div>
                        </div>
                        <div style="text-align: center; margin-top: 15px; opacity: 0.8;">
                            <p>Tamaño total: <strong>64 - 1518 bytes</strong> | MTU: <strong>1500 bytes</strong></p>
                        </div>
                    </div>
                    
                    <!-- Puertos Importantes -->
                    <h4 style="text-align: center; margin: 30px 0 20px;">🚪 Puertos TCP/UDP Importantes</h4>
                    <div class="cards-grid" style="grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));">
                        <div class="card" style="text-align: center; padding: 15px;">
                            <div style="font-size: 1.5em; font-weight: bold; color: var(--primary);">20/21</div>
                            <div>FTP</div>
                        </div>
                        <div class="card" style="text-align: center; padding: 15px;">
                            <div style="font-size: 1.5em; font-weight: bold; color: var(--danger);">22</div>
                            <div>SSH</div>
                        </div>
                        <div class="card" style="text-align: center; padding: 15px;">
                            <div style="font-size: 1.5em; font-weight: bold; color: var(--warning);">23</div>
                            <div>Telnet</div>
                        </div>
                        <div class="card" style="text-align: center; padding: 15px;">
                            <div style="font-size: 1.5em; font-weight: bold; color: var(--success);">53</div>
                            <div>DNS</div>
                        </div>
                        <div class="card" style="text-align: center; padding: 15px;">
                            <div style="font-size: 1.5em; font-weight: bold; color: #2196f3;">80</div>
                            <div>HTTP</div>
                        </div>
                        <div class="card" style="text-align: center; padding: 15px;">
                            <div style="font-size: 1.5em; font-weight: bold; color: #9c27b0;">443</div>
                            <div>HTTPS</div>
                        </div>
                    </div>
                    
                    <!-- IPs Privadas -->
                    <h4 style="text-align: center; margin: 30px 0 20px;">🔒 Rangos de IPs Privadas</h4>
                    <div class="cards-grid">
                        <div class="card" style="border-left: 4px solid var(--primary);">
                            <h4 style="color: var(--primary);">Clase A</h4>
                            <p style="font-family: monospace; font-size: 1.1em;">10.0.0.0/8</p>
                            <p style="opacity: 0.8;">10.0.0.0 - 10.255.255.255</p>
                        </div>
                        <div class="card" style="border-left: 4px solid var(--success);">
                            <h4 style="color: var(--success);">Clase B</h4>
                            <p style="font-family: monospace; font-size: 1.1em;">172.16.0.0/12</p>
                            <p style="opacity: 0.8;">172.16.0.0 - 172.31.255.255</p>
                        </div>
                        <div class="card" style="border-left: 4px solid var(--warning);">
                            <h4 style="color: var(--warning);">Clase C</h4>
                            <p style="font-family: monospace; font-size: 1.1em;">192.168.0.0/16</p>
                            <p style="opacity: 0.8;">192.168.0.0 - 192.168.255.255</p>
                        </div>
                    </div>
                    
                    <!-- TCP vs UDP -->
                    <h4 style="text-align: center; margin: 30px 0 20px;">⚖️ TCP vs UDP</h4>
                    <div class="cards-grid">
                        <div class="card" style="border-top: 4px solid var(--success);">
                            <h4 style="color: var(--success);">TCP</h4>
                            <ul style="list-style: none;">
                                <li>✅ Orientado a conexión</li>
                                <li>✅ Confiable (ACKs)</li>
                                <li>✅ Control de flujo</li>
                                <li>✅ Ordenado</li>
                                <li>❌ Más lento</li>
                                <li>📋 HTTP, FTP, SSH</li>
                            </ul>
                        </div>
                        <div class="card" style="border-top: 4px solid var(--warning);">
                            <h4 style="color: var(--warning);">UDP</h4>
                            <ul style="list-style: none;">
                                <li>❌ Sin conexión</li>
                                <li>❌ No confiable</li>
                                <li>❌ Sin control flujo</li>
                                <li>❌ Sin orden</li>
                                <li>✅ Más rápido</li>
                                <li>📋 DNS, VoIP, Stream</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <!-- Mapa Fibra -->
                <div class="card" id="map-fibra" style="display: none;">
                    <h3 style="text-align: center; margin-bottom: 30px;">Tipos de Fibra Óptica</h3>
                    
                    <div class="fiber-section fiber-sm">
                        <div class="fiber-visual">
                            <div class="fiber-circle"></div>
                            <p style="margin-top: 10px;">Núcleo pequeño</p>
                        </div>
                        <div class="fiber-info">
                            <h3>🟡 Monomodo (SM) - Amarilla</h3>
                            <p>Un solo modo de propagación. Ideal para largas distancias.</p>
                            <div class="fiber-specs">
                                <div class="fiber-spec">
                                    <div class="fiber-spec-label">Núcleo</div>
                                    <div class="fiber-spec-value">8-10 μm</div>
                                </div>
                                <div class="fiber-spec">
                                    <div class="fiber-spec-label">Atenuación 1550nm</div>
                                    <div class="fiber-spec-value">~0.22 dB/km</div>
                                </div>
                                <div class="fiber-spec">
                                    <div class="fiber-spec-label">Distancia</div>
                                    <div class="fiber-spec-value">>100 km</div>
                                </div>
                                <div class="fiber-spec">
                                    <div class="fiber-spec-label">Fuente</div>
                                    <div class="fiber-spec-value">Láser</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="fiber-section fiber-mm">
                        <div class="fiber-visual">
                            <div class="fiber-circle"></div>
                            <p style="margin-top: 10px;">Núcleo grande</p>
                        </div>
                        <div class="fiber-info">
                            <h3>🟠 Multimodo (MM) - Naranja</h3>
                            <p>Múltiples modos. Económica para distancias cortas.</p>
                            <div class="fiber-specs">
                                <div class="fiber-spec">
                                    <div class="fiber-spec-label">Núcleo</div>
                                    <div class="fiber-spec-value">50-62.5 μm</div>
                                </div>
                                <div class="fiber-spec">
                                    <div class="fiber-spec-label">Atenuación</div>
                                    <div class="fiber-spec-value">~3 dB/km</div>
                                </div>
                                <div class="fiber-spec">
                                    <div class="fiber-spec-label">Distancia</div>
                                    <div class="fiber-spec-value">Hasta 2 km</div>
                                </div>
                                <div class="fiber-spec">
                                    <div class="fiber-spec-label">Fuente</div>
                                    <div class="fiber-spec-value">LED/VCSEL</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="cards-grid" style="margin-top: 30px;">
                        <div class="card">
                            <h4 style="color: var(--warning); margin-bottom: 10px;">📉 Pérdidas Típicas</h4>
                            <ul style="list-style: none;">
                                <li>• Empalme fusión: ~0.1 dB</li>
                                <li>• Conector: ~0.75 dB</li>
                            </ul>
                        </div>
                        <div class="card">
                            <h4 style="color: var(--warning); margin-bottom: 10px;">🔌 Conectores</h4>
                            <ul style="list-style: none;">
                                <li>• LC: Más usado, pequeño</li>
                                <li>• SC: Push-pull</li>
                                <li>• MPO: Multi-fibra</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <!-- Mapa Radio -->
                <div class="card" id="map-radio" style="display: none;">
                    <h3 style="text-align: center; margin-bottom: 30px;">Configuraciones de Radioenlaces</h3>
                    
                    <div class="cards-grid">
                        <div class="card">
                            <h4 style="color: var(--warning); margin-bottom: 15px;">ACCP</h4>
                            <p style="margin-bottom: 10px;"><strong>Adjacent Channel Co-Polarization</strong></p>
                            <ul style="list-style: none; opacity: 0.9;">
                                <li>• Canales adyacentes</li>
                                <li>• Misma polarización (V-V)</li>
                                <li>• Antena simple polarización</li>
                                <li>• XPIC no requerido</li>
                            </ul>
                        </div>
                        
                        <div class="card">
                            <h4 style="color: var(--warning); margin-bottom: 15px;">ACAP</h4>
                            <p style="margin-bottom: 10px;"><strong>Adjacent Channel Alternate Polarized</strong></p>
                            <ul style="list-style: none; opacity: 0.9;">
                                <li>• Canales adyacentes</li>
                                <li>• Polarización alternada (V-H)</li>
                                <li>• Antena doble polarización</li>
                                <li>• XPIC no requerido</li>
                            </ul>
                        </div>
                        
                        <div class="card">
                            <h4 style="color: var(--warning); margin-bottom: 15px;">CCDP</h4>
                            <p style="margin-bottom: 10px;"><strong>Co-Channel Dual Polarized</strong></p>
                            <ul style="list-style: none; opacity: 0.9;">
                                <li>• Mismo canal</li>
                                <li>• V + H simultánea</li>
                                <li>• Antena doble polarización</li>
                                <li style="color: var(--success);">• ✓ XPIC requerido</li>
                                <li>• Duplica capacidad</li>
                            </ul>
                        </div>
                        
                        <div class="card">
                            <h4 style="color: var(--warning); margin-bottom: 15px;">1+1 Hot Standby</h4>
                            <p style="margin-bottom: 10px;"><strong>Con Diversidad de Espacio</strong></p>
                            <ul style="list-style: none; opacity: 0.9;">
                                <li>• 2 RAUs por sitio</li>
                                <li>• 2 antenas por sitio</li>
                                <li>• Protección hardware + diversidad</li>
                                <li>• Conmutación automática</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="card" style="margin-top: 20px;">
                        <h4 style="color: var(--warning); margin-bottom: 15px;">⚡ XPIC - Cross-Polar Interference Canceller</h4>
                        <p>Cancela la interferencia entre polarizaciones cruzadas. Requerido únicamente en configuración CCDP para permitir duplicar la capacidad del enlace usando el mismo canal en ambas polarizaciones.</p>
                    </div>
                </div>
                
                <!-- Mapa Transceptores -->
                <div class="card" id="map-transceptores" style="display: none;">
                    <h3 style="text-align: center; margin-bottom: 30px;">Transceptores Ópticos</h3>
                    
                    <div class="cards-grid">
                        <div class="card" style="text-align: center;">
                            <div style="font-size: 2.5em; margin-bottom: 10px;">🔌</div>
                            <h4>SFP</h4>
                            <p style="color: var(--success); font-size: 1.2em; font-weight: bold;">1G / 2.5G</p>
                        </div>
                        <div class="card" style="text-align: center;">
                            <div style="font-size: 2.5em; margin-bottom: 10px;">🔌</div>
                            <h4>SFP+</h4>
                            <p style="color: var(--success); font-size: 1.2em; font-weight: bold;">10G</p>
                        </div>
                        <div class="card" style="text-align: center;">
                            <div style="font-size: 2.5em; margin-bottom: 10px;">🔌</div>
                            <h4>QSFP+</h4>
                            <p style="color: var(--success); font-size: 1.2em; font-weight: bold;">40G</p>
                        </div>
                        <div class="card" style="text-align: center;">
                            <div style="font-size: 2.5em; margin-bottom: 10px;">🔌</div>
                            <h4>QSFP28</h4>
                            <p style="color: var(--success); font-size: 1.2em; font-weight: bold;">100G</p>
                        </div>
                    </div>
                    
                    <h4 style="text-align: center; margin: 30px 0 20px;">Alcances por Tipo</h4>
                    
                    <div class="cards-grid">
                        <div class="card" style="text-align: center; border-top: 4px solid var(--success);">
                            <h4>SR - Short Reach</h4>
                            <p style="font-size: 1.5em; font-weight: bold; margin: 10px 0;">~100-300m</p>
                            <p style="opacity: 0.8;">Fibra Multimodo</p>
                        </div>
                        <div class="card" style="text-align: center; border-top: 4px solid #2196f3;">
                            <h4>LR - Long Reach</h4>
                            <p style="font-size: 1.5em; font-weight: bold; margin: 10px 0;">~10 km</p>
                            <p style="opacity: 0.8;">Fibra Monomodo</p>
                        </div>
                        <div class="card" style="text-align: center; border-top: 4px solid #9c27b0;">
                            <h4>ER - Extended</h4>
                            <p style="font-size: 1.5em; font-weight: bold; margin: 10px 0;">~40 km</p>
                            <p style="opacity: 0.8;">Fibra Monomodo</p>
                        </div>
                        <div class="card" style="text-align: center; border-top: 4px solid var(--danger);">
                            <h4>ZR - Very Long</h4>
                            <p style="font-size: 1.5em; font-weight: bold; margin: 10px 0;">~80 km+</p>
                            <p style="opacity: 0.8;">Fibra Monomodo</p>
                        </div>
                    </div>
                </div>
                
                <!-- Mapa Avanzado -->
                <div class="card" id="map-avanzado" style="display: none;">
                    <h3 style="text-align: center; margin-bottom: 30px;">📚 Conceptos Avanzados Críticos</h3>
                    
                    <div class="cards-grid">
                        <div class="card" style="border-left: 4px solid var(--primary);">
                            <h4 style="color: var(--primary); margin-bottom: 15px;">📡 Radio Propagación</h4>
                            <ul style="list-style: none;">
                                <li>• <strong>k = 4/3</strong>: Factor corrección Tierra</li>
                                <li>• <strong>Radio efectivo</strong>: ~8,500 km</li>
                                <li>• <strong>dN/dh</strong>: -40 N/km típico</li>
                                <li>• <strong>O₂ absorción</strong>: ~60 GHz</li>
                                <li>• <strong>H₂O absorción</strong>: ~23 GHz</li>
                                <li>• <strong>ITU zonas lluvia</strong>: 16</li>
                            </ul>
                        </div>
                        
                        <div class="card" style="border-left: 4px solid var(--success);">
                            <h4 style="color: var(--success); margin-bottom: 15px;">⚡ Radio Capacidad</h4>
                            <ul style="list-style: none;">
                                <li>• <strong>MIMO 2x2</strong>: Duplica capacidad</li>
                                <li>• <strong>Carrier Aggregation</strong>: Suma BWs</li>
                                <li>• <strong>Multi-band booster</strong>: 2 bandas</li>
                                <li>• <strong>RAU 6365</strong>: hasta 8192 QAM</li>
                                <li>• <strong>Familias nuevas</strong>: 6300/6600</li>
                            </ul>
                        </div>
                        
                        <div class="card" style="border-left: 4px solid #2196f3;">
                            <h4 style="color: #2196f3; margin-bottom: 15px;">🌐 IPv6 y Routing</h4>
                            <ul style="list-style: none;">
                                <li>• <strong>IPv6</strong>: 128 bits</li>
                                <li>• <strong>OSPF convergencia</strong>: 4-5 seg</li>
                                <li>• <strong>RIP convergencia</strong>: hasta 180 seg</li>
                                <li>• <strong>OSPF Área 0</strong>: Backbone obligatorio</li>
                                <li>• <strong>ABR</strong>: Borde de área</li>
                                <li>• <strong>ASBR</strong>: Borde AS externo</li>
                            </ul>
                        </div>
                        
                        <div class="card" style="border-left: 4px solid #9c27b0;">
                            <h4 style="color: #9c27b0; margin-bottom: 15px;">🔧 Protocolos Esenciales</h4>
                            <ul style="list-style: none;">
                                <li>• <strong>DHCP</strong>: Asigna IP automático</li>
                                <li>• <strong>ARP</strong>: IP → MAC</li>
                                <li>• <strong>DNS</strong>: Nombre → IP</li>
                                <li>• <strong>ICMP</strong>: ping, traceroute</li>
                                <li>• <strong>NAT</strong>: IP privada → pública</li>
                                <li>• <strong>PTP</strong>: IEEE 1588 sincronización</li>
                            </ul>
                        </div>
                        
                        <div class="card" style="border-left: 4px solid var(--warning);">
                            <h4 style="color: var(--warning); margin-bottom: 15px;">💡 Fibra Avanzado</h4>
                            <ul style="list-style: none;">
                                <li>• <strong>1310nm atenuación</strong>: 0.35 dB/km</li>
                                <li>• <strong>1550nm atenuación</strong>: 0.22 dB/km</li>
                                <li>• <strong>Margen seguridad</strong>: 1.7-3 dB</li>
                                <li>• <strong>Protección ajustada</strong>: 900 μm</li>
                                <li>• <strong>Holgada</strong>: Tubo con gel</li>
                                <li>• <strong>EEPROM</strong>: Info transceiver</li>
                            </ul>
                        </div>
                        
                        <div class="card" style="border-left: 4px solid var(--danger);">
                            <h4 style="color: var(--danger); margin-bottom: 15px;">📊 BER y Testing</h4>
                            <ul style="list-style: none;">
                                <li>• <strong>BER estándar</strong>: 10⁻⁹</li>
                                <li>• <strong>BER datos críticos</strong>: 10⁻¹³</li>
                                <li>• <strong>RFC 2544</strong>: Test Ethernet</li>
                                <li>• <strong>ITU-T Y.1564</strong>: Multiservicio</li>
                                <li>• <strong>Jumbo Frame</strong>: 9000 bytes</li>
                                <li>• <strong>CIR/EIR</strong>: Tasas garantizadas</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="card" style="margin-top: 20px; background: linear-gradient(135deg, var(--primary), var(--secondary));">
                        <h4 style="margin-bottom: 15px;">🔑 Valores Críticos para Memorizar</h4>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                            <div style="text-align: center; padding: 10px; background: rgba(0,0,0,0.2); border-radius: 8px;">
                                <div style="font-size: 1.5em; font-weight: bold;">128 bits</div>
                                <div style="opacity: 0.8;">IPv6</div>
                            </div>
                            <div style="text-align: center; padding: 10px; background: rgba(0,0,0,0.2); border-radius: 8px;">
                                <div style="font-size: 1.5em; font-weight: bold;">4-5 seg</div>
                                <div style="opacity: 0.8;">OSPF convergencia</div>
                            </div>
                            <div style="text-align: center; padding: 10px; background: rgba(0,0,0,0.2); border-radius: 8px;">
                                <div style="font-size: 1.5em; font-weight: bold;">k = 4/3</div>
                                <div style="opacity: 0.8;">Factor Tierra</div>
                            </div>
                            <div style="text-align: center; padding: 10px; background: rgba(0,0,0,0.2); border-radius: 8px;">
                                <div style="font-size: 1.5em; font-weight: bold;">0.35 dB/km</div>
                                <div style="opacity: 0.8;">Atenuación 1310nm</div>
                            </div>
                            <div style="text-align: center; padding: 10px; background: rgba(0,0,0,0.2); border-radius: 8px;">
                                <div style="font-size: 1.5em; font-weight: bold;">1.7-3 dB</div>
                                <div style="opacity: 0.8;">Margen seguridad</div>
                            </div>
                            <div style="text-align: center; padding: 10px; background: rgba(0,0,0,0.2); border-radius: 8px;">
                                <div style="font-size: 1.5em; font-weight: bold;">10⁻¹³</div>
                                <div style="opacity: 0.8;">BER crítico</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- DASHBOARD -->
        <section class="section" id="section-dashboard">
            <div class="section-header">
                <h2>📊 Dashboard de Progreso</h2>
                <p>Seguimiento de tu preparación</p>
            </div>
            
            <div class="cards-grid">
                <div class="card" style="text-align: center; background: linear-gradient(135deg, var(--primary), var(--secondary));">
                    <div style="font-size: 3em; margin-bottom: 10px;">🔥</div>
                    <div style="font-size: 2.5em; font-weight: bold;" id="dash-streak">0</div>
                    <div>Días de racha</div>
                </div>
                <div class="card" style="text-align: center;">
                    <div style="font-size: 3em; margin-bottom: 10px;">📚</div>
                    <div style="font-size: 2.5em; font-weight: bold;" id="dash-sessions">0</div>
                    <div>Sesiones totales</div>
                </div>
                <div class="card" style="text-align: center;">
                    <div style="font-size: 3em; margin-bottom: 10px;">✅</div>
                    <div style="font-size: 2.5em; font-weight: bold;" id="dash-correct">0</div>
                    <div>Respuestas correctas</div>
                </div>
                <div class="card" style="text-align: center;">
                    <div style="font-size: 3em; margin-bottom: 10px;">📈</div>
                    <div style="font-size: 2.5em; font-weight: bold;" id="dash-avg">0%</div>
                    <div>Promedio general</div>
                </div>
            </div>
            
            <div class="card" style="margin-top: 30px;">
                <h3 style="margin-bottom: 20px;">📜 Historial de Sesiones</h3>
                <div id="dash-history">
                    <p style="text-align: center; opacity: 0.7; padding: 30px;">
                        Aún no hay sesiones registradas.<br>¡Comienza a practicar!
                    </p>
                </div>
            </div>
            
            <div style="text-align: center; margin-top: 30px;">
                <button class="btn btn-danger" onclick="clearAllProgress()">🗑️ Borrar Todo el Progreso</button>
            </div>
        </section>
    </main>

    <script>
        // ============ DATOS ============
        
        // Flashcards
        const flashcardsDB = [
            // RADIO
            { category: "radio", q: "¿Cuál es la fórmula para calcular la longitud de onda?", a: "λ (cm) = 30 / f (GHz)\n\nEjemplo: A 6 GHz → λ = 30/6 = 5 cm" },
            { category: "radio", q: "¿Cuál es el valor del factor k en atmósfera estándar?", a: "k ≈ 4/3 = 1.33\n\nRadio efectivo de la Tierra ~8,500 km" },
            { category: "radio", q: "¿A partir de qué frecuencia la lluvia domina la atenuación?", a: "≥ 10 GHz\n\nPor debajo dominan efectos de terreno y tropósfera" },
            { category: "radio", q: "¿Cuánto debe despejarse la primera zona de Fresnel?", a: "Mínimo 60%\n\nMenos despejamiento causa pérdidas por difracción" },
            { category: "radio", q: "¿Qué significa EIRP?", a: "Effective Isotropic Radiated Power\n\n(Potencia Radiada Isotrópica Efectiva)" },
            { category: "radio", q: "¿Cuál es el margen de fading típico?", a: "Hasta 40 dB\n\nDepende de la disponibilidad requerida" },
            { category: "radio", q: "¿Qué significa ACCP?", a: "Adjacent Channel Co-Polarization\n\nCanales adyacentes, misma polarización" },
            { category: "radio", q: "¿Qué significa CCDP?", a: "Co-Channel Dual Polarized\n\nMismo canal, ambas polarizaciones. Requiere XPIC" },
            { category: "radio", q: "¿Qué es XPIC?", a: "Cross-Polar Interference Canceller\n\nCancela interferencia entre polarizaciones en CCDP" },
            { category: "radio", q: "¿Qué modulación máxima soporta MMU4A?", a: "4096 QAM\n\nSoporta 80 y 112 MHz de ancho de banda" },
            
            // IP/REDES
            { category: "ip", q: "¿Cuántas capas tiene el modelo OSI?", a: "7 capas\n\nTCP/IP híbrido tiene 5 capas" },
            { category: "ip", q: "¿Cuál es el tamaño de una dirección MAC?", a: "48 bits (6 bytes)\n\nFormato: XX:XX:XX:XX:XX:XX" },
            { category: "ip", q: "¿Cuál es la dirección MAC de broadcast?", a: "FF:FF:FF:FF:FF:FF\n\nSe envía a todos los dispositivos" },
            { category: "ip", q: "¿Qué significa CSMA/CD?", a: "Carrier Sense Multiple Access with Collision Detection\n\nProtocolo de Ethernet clásico" },
            { category: "ip", q: "¿Cuál es el tamaño de trama Ethernet?", a: "Mínimo: 64 bytes\nMáximo: 1518 bytes\n\nMTU: 1500 bytes" },
            { category: "ip", q: "¿Cuántos bits tiene IPv4?", a: "32 bits (4 bytes)\n\nFormato: XXX.XXX.XXX.XXX" },
            { category: "ip", q: "¿Cuántos hosts hay en /24?", a: "254 hosts utilizables\n\n2^8 - 2 = 254" },
            { category: "ip", q: "¿Diferencia entre TCP y UDP?", a: "TCP: Conexión, confiable, ACKs\nUDP: Sin conexión, rápido\n\nTCP para HTTP, UDP para VoIP" },
            { category: "ip", q: "¿Qué valor de BER es estándar?", a: "10⁻⁹ para telecomunicaciones\n10⁻¹³ para datos críticos" },
            { category: "ip", q: "¿Cuáles son los tamaños RFC 2544?", a: "64, 128, 256, 512, 1024, 1280, 1518 bytes" },
            
            // FIBRA
            { category: "fibra", q: "¿Cuáles son los tipos de fibra?", a: "Monomodo (SM): Amarilla, largas distancias\nMultimodo (MM): Naranja, cortas distancias" },
            { category: "fibra", q: "¿Diámetro del núcleo monomodo?", a: "8-10 μm\n\nPermite solo un modo de propagación" },
            { category: "fibra", q: "¿Atenuación típica SM 1550nm?", a: "~0.22 dB/km\n\nA 1310nm es ~0.35 dB/km" },
            { category: "fibra", q: "¿Pérdida por empalme de fusión?", a: "~0.1 dB por empalme" },
            { category: "fibra", q: "¿Pérdida por conector óptico?", a: "~0.75 dB por conector\n\nAlta calidad: 0.3-0.5 dB" },
            { category: "fibra", q: "¿Qué significa SFP?", a: "Small Form-Factor Pluggable\n\nTransceptor compacto hot-swappable" },
            { category: "fibra", q: "¿Qué significa QSFP?", a: "Quad Small Form-Factor Pluggable\n\n4 canales, para 40G/100G" },
            { category: "fibra", q: "¿Qué significan SR, LR, ER, ZR?", a: "SR: Short (~300m)\nLR: Long (~10km)\nER: Extended (~40km)\nZR: Very Long (~80km+)" },
            { category: "fibra", q: "¿Cómo se calcula Power Budget?", a: "Power Budget = Tx mín - Rx sensibilidad\n\nEj: -5 - (-28) = 23 dB" },
            
            // FÓRMULAS
            { category: "formulas", q: "Fórmula: Longitud de onda", a: "λ (cm) = 30 / f (GHz)" },
            { category: "formulas", q: "Fórmula: Radio zona Fresnel", a: "rF = 17.3 × √(d₁ × d₂)/(f × d)\n\nd en km, f en GHz" },
            { category: "formulas", q: "Fórmula: BER", a: "BER = Bits con error / Bits totales" },
            { category: "formulas", q: "Fórmula: Power Budget", a: "PB = Tx min - Rx sensibilidad" },
            { category: "formulas", q: "Fórmula: Hosts en subred", a: "Hosts = 2^n - 2\n\nn = bits de host" },
            { category: "formulas", q: "Fórmula: Pérdida espacio libre", a: "ABF = 92.4 + 20×log(f) + 20×log(d)\n\nf en GHz, d en km" },
            { category: "formulas", q: "Fórmula: EIRP", a: "EIRP = PTx + Ganancia antena - Pérdidas\n\nEn dBm" },
            { category: "formulas", q: "Fórmula: dB (decibelio)", a: "dB = 10 × log₁₀(P₁/P₂)\n\nRelación de potencias" },
            { category: "formulas", q: "Fórmula: dBm", a: "dBm = 10 × log₁₀(P/1mW)\n\nReferencia a 1 milivatio" },
            { category: "formulas", q: "Fórmula: Link Budget completo", a: "Pin = Pout - ΣAF + ΣG - ABF - Ao - AG - AL" },
            
            // RADIO AVANZADO
            { category: "radio", q: "¿Cuál es el radio efectivo de la Tierra con k=4/3?", a: "~8,500 km\n\nRadio real ~6,371 km" },
            { category: "radio", q: "¿Cuál es el gradiente de refractividad típico?", a: "dN/dh ≈ -40 N/km\n\nEn regiones templadas" },
            { category: "radio", q: "¿A qué frecuencia está el pico de absorción del O₂?", a: "~60 GHz\n\nEntre 50-70 GHz" },
            { category: "radio", q: "¿A qué frecuencia está el pico de absorción del H₂O?", a: "~23 GHz\n\nVapor de agua" },
            { category: "radio", q: "¿Cuántas zonas climáticas de lluvia define ITU?", a: "16 zonas\n\nCon diferentes tasas de precipitación" },
            { category: "radio", q: "¿Qué significa ERP?", a: "Effective Radiated Power\n\nReferencia a dipolo de media onda" },
            { category: "radio", q: "¿Qué es MIMO 2x2?", a: "Multiplexación espacial\n\n2 antenas Tx, 2 antenas Rx\nDuplica capacidad" },
            { category: "radio", q: "¿Qué es Multi-band booster?", a: "Combinar 2 radioenlaces en paralelo\n\nBanda baja: tráfico prioritario\nBanda alta: mayor capacidad" },
            { category: "radio", q: "¿Qué es Carrier Aggregation?", a: "Sumar ancho de banda de múltiples carriers\n\nEn un mismo radioenlace" },
            { category: "radio", q: "¿Qué modulación máxima soporta RAU 6365?", a: "8192 QAM\n\nPara anchos de 28 y 40 MHz" },
            { category: "radio", q: "¿Qué familias reemplazan a TN?", a: "6300 (outdoor/RAU)\n6600 (indoor/AMM)" },
            { category: "radio", q: "¿Qué significa ACAP?", a: "Adjacent Channel Alternate Polarized\n\nCanales adyacentes, polarización alternada V-H" },
            
            // IP AVANZADO
            { category: "ip", q: "¿Cuántos bits tiene IPv6?", a: "128 bits\n\n8 secciones de 16 bits separadas por ':'" },
            { category: "ip", q: "¿Qué protocolo asigna IPs dinámicamente?", a: "DHCP\n\nAsigna IP, gateway, DNS automáticamente" },
            { category: "ip", q: "¿Qué hace el protocolo ARP?", a: "Obtiene MAC dada una IP\n\nRealiza broadcast preguntando" },
            { category: "ip", q: "¿Para qué se usa ICMP?", a: "Diagnóstico de red\n\nping, traceroute" },
            { category: "ip", q: "¿Diferencia entre RIP y OSPF?", a: "RIP: vector distancia, saltos\nOSPF: estado enlace, áreas\n\nOSPF converge más rápido" },
            { category: "ip", q: "¿Tiempo de convergencia de OSPF?", a: "4-5 segundos\n\nRIP: hasta 180 segundos" },
            { category: "ip", q: "¿Qué es ABR en OSPF?", a: "Area Border Router\n\nConecta área con backbone" },
            { category: "ip", q: "¿Qué es ASBR en OSPF?", a: "Autonomous System Border Router\n\nConecta con otras redes externas" },
            { category: "ip", q: "¿Qué área debe existir siempre en OSPF?", a: "Área 0 (Backbone)\n\nTodas las áreas conectan a ella" },
            { category: "ip", q: "¿Qué hace NAT?", a: "Traduce direcciones privadas a públicas\n\nPermite compartir una IP pública" },
            { category: "ip", q: "¿Qué organización administra dominios de nivel superior?", a: "ICANN\n\nInternet Corporation for Assigned Names and Numbers" },
            { category: "ip", q: "¿Qué es FCS/CRC?", a: "Frame Check Sequence\n\nDetección de errores en trama" },
            { category: "ip", q: "¿Tamaño de Jumbo Frame?", a: "9000 bytes\n\n(No parte oficial de RFC 2544)" },
            { category: "ip", q: "¿Qué estándar define sincronización precisa?", a: "PTP IEEE 1588\n\nPrecision Time Protocol" },
            
            // FIBRA AVANZADO
            { category: "fibra", q: "¿Atenuación SM a 1310nm?", a: "~0.35 dB/km\n\n(Mayor que 0.22 dB/km a 1550nm)" },
            { category: "fibra", q: "¿Qué tipos de protección secundaria existen?", a: "Ajustada: 900 μm\nHolgada: tubo con gel" },
            { category: "fibra", q: "¿Para qué sirve el gel en fibra holgada?", a: "Anticongelante\n\nProtege fibras, no se escurre" },
            { category: "fibra", q: "¿Qué es Kevlar en cables de fibra?", a: "Protección mecánica\n\nMaterial resistente" },
            { category: "fibra", q: "¿Qué almacena la EEPROM del transceiver?", a: "Info fabricante, modelo, configuración\n\nDatos del módulo óptico" },
            { category: "fibra", q: "¿Margen de seguridad recomendado en Power Budget?", a: "1.7 a 3 dB\n\nPor envejecimiento y variabilidad" },
            { category: "fibra", q: "¿Qué es ITU-T Y.1564?", a: "Ethernet Service Activation Test\n\nReemplaza RFC 2544 para multiservicio" },
            { category: "fibra", q: "¿Qué mide CIR/EIR?", a: "CIR: Committed Information Rate\nEIR: Excess Information Rate\n\nTasas comprometida y excedente" },
            
            // TCP/IP CONCEPTOS ADICIONALES
            { category: "ip", q: "¿Qué es una red LAN?", a: "Local Area Network\n\nRed de área local, en un edificio o edificios cercanos" },
            { category: "ip", q: "¿Qué es una red WAN?", a: "Wide Area Network\n\nRed de área amplia, cubre países o continentes" },
            { category: "ip", q: "¿Qué es una red MAN?", a: "Metropolitan Area Network\n\nRed de área metropolitana, cubre ciudades" },
            { category: "ip", q: "¿Cuáles son las topologías de red?", a: "Bus, Estrella, Anillo, Malla\n\nFísica vs Lógica pueden ser diferentes" },
            { category: "ip", q: "¿Qué diferencia hay entre Hub y Switch?", a: "Hub: repite a todos (colisiones)\nSwitch: solo al destino (sin colisiones)" },
            { category: "ip", q: "¿Qué es Half Duplex vs Full Duplex?", a: "Half: envía O recibe\nFull: envía Y recibe a la vez" },
            { category: "ip", q: "¿Qué es CSMA/CD?", a: "Carrier Sense Multiple Access\nwith Collision Detection\n\nEscucha antes de transmitir" },
            { category: "ip", q: "¿Qué es dominio de colisión?", a: "Conjunto de dispositivos\ncuyos frames pueden colisionar\n\nSwitch lo reduce" },
            { category: "ip", q: "¿Qué es dominio de broadcast?", a: "Conjunto de dispositivos que\nreciben un broadcast\n\nRouter lo limita" },
            { category: "ip", q: "¿Tamaño mínimo y máximo de trama Ethernet?", a: "Mínimo: 64 bytes\nMáximo: 1518 bytes\n\n(Sin Jumbo Frames)" },
            { category: "ip", q: "¿Qué contiene la trama Ethernet?", a: "Preámbulo + Dir. Destino + Dir. Origen\n+ Tipo + Datos + FCS" },
            { category: "ip", q: "¿Para qué es el campo FCS en Ethernet?", a: "Frame Check Sequence\n\nDetección de errores con CRC" },
            { category: "ip", q: "¿Qué es 100BASE-TX?", a: "Fast Ethernet 100 Mbps\n\nUsa UTP Cat 5, 2 pares" },
            { category: "ip", q: "¿Qué es 1000BASE-T?", a: "Gigabit Ethernet 1 Gbps\n\nUsa UTP Cat 5, 4 pares, 100m" },
            { category: "ip", q: "¿Rango de direcciones Clase A?", a: "0.0.0.0 - 126.255.255.255\n\nMáscara /8 (255.0.0.0)" },
            { category: "ip", q: "¿Rango de direcciones Clase B?", a: "128.0.0.0 - 191.255.255.255\n\nMáscara /16 (255.255.0.0)" },
            { category: "ip", q: "¿Rango de direcciones Clase C?", a: "192.0.0.0 - 223.255.255.255\n\nMáscara /24 (255.255.255.0)" },
            { category: "ip", q: "¿Cuáles son los rangos de IPs privadas?", a: "10.0.0.0/8\n172.16.0.0/12\n192.168.0.0/16" },
            { category: "ip", q: "¿Qué es el 3-way handshake de TCP?", a: "SYN → SYN/ACK → ACK\n\nEstablece conexión TCP" },
            { category: "ip", q: "¿Cómo termina una conexión TCP?", a: "FIN → ACK → FIN → ACK\n\n4-way handshake de cierre" },
            { category: "ip", q: "¿Qué es MTU en Ethernet?", a: "Maximum Transmission Unit\n\n1500 bytes (datos máximos)" },
            { category: "ip", q: "¿Tamaño máximo de segmento TCP?", a: "1460 bytes\n\n1500 - 20 (IP) - 20 (TCP)" },
            { category: "ip", q: "¿Qué es ventana en TCP?", a: "Control de flujo\n\nCantidad de bytes sin ACK permitidos" },
            { category: "ip", q: "¿Puerto del protocolo HTTP?", a: "Puerto 80 (TCP)\n\nHTTPS usa puerto 443" },
            { category: "ip", q: "¿Puerto del protocolo FTP?", a: "Puertos 20 y 21 (TCP)\n\n20=datos, 21=control" },
            { category: "ip", q: "¿Puerto del protocolo DNS?", a: "Puerto 53 (UDP)\n\nTambién puede usar TCP" },
            { category: "ip", q: "¿Puerto del protocolo Telnet?", a: "Puerto 23 (TCP)\n\nInseguro, reemplazado por SSH (22)" },
            { category: "ip", q: "¿Diferencia TCP vs UDP?", a: "TCP: conexión, confiable, lento\nUDP: sin conexión, no confiable, rápido" },
            { category: "ip", q: "¿Qué usa UDP?", a: "DNS, VoIP, streaming\n\nTolera pérdida o recupera en app" },
            { category: "ip", q: "¿Qué es consulta DNS recursiva?", a: "El servidor hace todo el trabajo\n\nBusca en otros servidores por ti" },
            { category: "ip", q: "¿Qué es consulta DNS no recursiva?", a: "El servidor da referencias\n\nTú debes consultar otros servidores" },
            { category: "ip", q: "¿Qué administra ICANN?", a: "Dominios de nivel superior\n\nNombres y números de Internet" },
            { category: "ip", q: "¿Cuántos servidores root DNS existen?", a: "13 servidores (A-M)\n\nDistribuidos por el mundo" },
            { category: "ip", q: "¿Qué es un cable STP?", a: "Shielded Twisted Pair\n\nPar trenzado con pantalla individual" },
            { category: "ip", q: "¿Qué es un cable UTP?", a: "Unshielded Twisted Pair\n\nPar trenzado sin pantalla, más usado" },
            { category: "ip", q: "¿Para qué sirve un cable cruzado?", a: "Conectar 2 PCs directamente\no Hub a Hub\n\nHoy auto-detección (Auto-MDIX)" },
            { category: "ip", q: "¿Qué pines usa RJ-45 para Ethernet?", a: "1,2 para Tx\n3,6 para Rx\n\nEn 10/100 Mbps" },
            { category: "ip", q: "¿Qué es encapsulamiento de datos?", a: "Agregar headers en cada capa\n\nDatos→Segmento→Paquete→Trama→Bits" },
            { category: "ip", q: "¿Qué hace un Router?", a: "Interconecta subredes\nDetermina mejor ruta\nDetiene broadcasts" },
            { category: "ip", q: "¿Qué es TTL en IP?", a: "Time To Live\n\nEvita loops, decrece en cada router" },
            { category: "ip", q: "¿Qué es tabla de ruteo?", a: "Asocia redes destino\ncon interfaces de salida\n\nEstática o dinámica" },
            { category: "ip", q: "¿Qué es routing estático?", a: "Admin configura rutas\nmanualmente\n\nNo consume ancho de banda" },
            { category: "ip", q: "¿Qué es routing dinámico?", a: "Routers intercambian info\ny calculan mejores rutas\n\nEjemplos: RIP, OSPF" },
            
            // PROPAGACIÓN AVANZADA (MW Radio Propagation)
            { category: "radio", q: "¿Qué es reflexión especular?", a: "Reflexión ideal como en un espejo\n\nSuperficie lisa, sin dispersión" },
            { category: "radio", q: "¿Qué determina el criterio de Rayleigh?", a: "Si una superficie es lisa o rugosa\n\nDepende de λ, ángulo y rugosidad" },
            { category: "radio", q: "¿Qué es coeficiente de reflexión ρ?", a: "Capacidad de superficie para reflejar\n\n|ρ|=0: no refleja, |ρ|=1: reflexión total" },
            { category: "radio", q: "¿Qué es diversidad de espacio?", a: "Dos antenas receptoras\n\nSeñales faden independientemente" },
            { category: "radio", q: "¿Qué es diversidad de frecuencia?", a: "Misma señal en 2 frecuencias\n\nMenos eficiente espectralmente" },
            { category: "radio", q: "¿Cuándo usar diversidad de espacio?", a: "Sobre agua o superficies reflectantes\n\nCombate multipath y reflexiones" },
            { category: "radio", q: "¿Qué significa SES (G.821)?", a: "Severely Errored Second\n\nBER > 10⁻³ durante 1 segundo" },
            { category: "radio", q: "¿Qué significa ES (G.821)?", a: "Errored Second\n\n1 o más errores en 1 segundo" },
            { category: "radio", q: "¿Qué significa UAT (G.821)?", a: "Unavailable Time\n\nSES consecutivos por 10 segundos" },
            { category: "radio", q: "¿Qué recomienda ITU-T G.826?", a: "Calidad para ≥2 Mbps\n\nReemplaza G.821 progresivamente" },
            { category: "radio", q: "¿Qué factor de mejora da diversidad?", a: "Hasta 100 veces\n\nEn fading profundo" },
            { category: "radio", q: "¿Qué es pérdida por difracción?", a: "Atenuación por obstáculos\n\nAumenta con la frecuencia" },
            { category: "radio", q: "¿Qué bandas usa MINI-LINK?", a: "7-38 GHz\n\nRequieren línea de vista" },
            { category: "radio", q: "¿Qué es rain fading?", a: "Atenuación por lluvia\n\nImportante >10 GHz" },
            { category: "radio", q: "¿Qué es multipath fading?", a: "Fading por múltiples caminos\n\nRápido, domina <10 GHz" },
            
            // MINILINK AVANZADO (Configuraciones 2024)
            { category: "radio", q: "¿Qué es configuración 1+1 Hot Standby?", a: "2 RAUs, 1 working + 1 standby\n\nProtección de hardware" },
            { category: "radio", q: "¿Qué es configuración 2x(1+0)?", a: "2 RAUs, 2 radiocanales\n\nSin protección, doble capacidad" },
            { category: "radio", q: "¿Qué equipos reemplazaron a TN?", a: "Familia 6300 (RAU)\nFamilia 6600 (AMM)" },
            { category: "radio", q: "¿Qué es Radio Link Bonding?", a: "Transporte transparente Ethernet\nsobre múltiples Packet Links" },
            { category: "radio", q: "¿Potencia RAU media potencia?", a: "PTx ≤ 26 dBm\n\n(Alta potencia ≤ 30 dBm)" },
            { category: "radio", q: "¿Qué modulación tiene MMU3A?", a: "Hasta 1024 QAM\n\nAnchos: 28, 40, 56 MHz" },
            { category: "radio", q: "¿Qué modulación tiene MMU2H?", a: "Hasta 512 QAM\n\nPrimera con XPIC y adaptativa" },
            { category: "radio", q: "¿Qué es modulación adaptativa?", a: "Cambia modulación según señal\n\nAlta señal=alta QAM, baja señal=baja QAM" },
            { category: "radio", q: "¿Bandas de RAU 6365?", a: "6 GHz a 42 GHz\n\nCubre todo el rango" },
            { category: "radio", q: "¿Bandas de RAU 6364?", a: "13, 15, 18 GHz\n\nCubre todo el rango de cada banda" },
            { category: "radio", q: "¿Qué anchos de banda soporta 6600?", a: "Hasta 80 y 112 MHz\n\nCon 2048 y 4096 QAM" },
            { category: "radio", q: "¿Qué recomienda ITU-R F.385?", a: "Canalización banda 7 GHz\n\n28 MHz y 56 MHz" },
            { category: "radio", q: "¿Qué recomienda ITU-R F.386?", a: "Canalización banda 8 GHz\n\n28, 56 y 112 MHz" },
            
            // TRANSCEPTORES AVANZADO
            { category: "fibra", q: "¿Qué contiene un transceiver?", a: "Láser Tx + Fotodiodo Rx\n+ PCB + EEPROM + Conector" },
            { category: "fibra", q: "¿Qué es conversión fotoeléctrica?", a: "Luz ↔ Señal eléctrica\n\nFunción del transceiver" },
            { category: "fibra", q: "¿En qué capa OSI opera el transceiver?", a: "Capa 1 (Física)\n\nConversión de señales" },
            { category: "fibra", q: "¿Qué hace el láser Tx?", a: "Genera señal óptica\n\nConvierte eléctrico → luz" },
            { category: "fibra", q: "¿Qué hace el fotodiodo Rx?", a: "Detecta luz recibida\n\nConvierte luz → eléctrico" },
            { category: "fibra", q: "¿Tipos de conectores ópticos?", a: "LC, SC, MPO\n\nLC es el más pequeño" },
            { category: "fibra", q: "¿Atenuación fibra dB/km?", a: "0.22-0.5 dB/km\n\n1550nm: 0.22, 1310nm: 0.35" },
            { category: "fibra", q: "¿Qué significa MMF?", a: "Multi Mode Fiber\n\nFibra multimodo, corta distancia" },
            { category: "fibra", q: "¿Qué significa SMF?", a: "Single Mode Fiber\n\nFibra monomodo, larga distancia" },
            { category: "fibra", q: "¿Distancia máxima multimodo?", a: "Hasta 5 km\n\nGeneralmente ~300m-2km" },
            { category: "fibra", q: "Velocidades de transceptores", a: "100 Base, 1G, 10G, 40G, 100G\n\nHasta 400G" },
            { category: "fibra", q: "¿Qué es SFP28?", a: "SFP para 25 Gbps\n\nVariante de alta velocidad" },
            
            // BERT/RFC AVANZADO
            { category: "ip", q: "¿Qué causa pérdida de paquetes?", a: "Congestión, sobreutilización\nHardware obsoleto, ataques DoS" },
            { category: "ip", q: "¿Qué es PER?", a: "Packet Error Rate\n\nRelacionado con BER" },
            { category: "ip", q: "¿Latencia afecta a qué?", a: "Ventana TCP, calidad VoIP\n\nMenos velocidad efectiva" },
            { category: "ip", q: "¿Qué mide test Back-to-Back?", a: "Capacidad de procesar ráfagas\n\nBurst processing" },
            { category: "ip", q: "¿Qué mide System Reset RFC2544?", a: "Tiempo de recuperación\n\nTras reinicio del equipo" },
            { category: "ip", q: "¿Criterio aceptación throughput?", a: "≥99%\n\nDel rate teórico" },
            { category: "ip", q: "¿Criterio aceptación latencia 1G?", a: "≤1 ms\n\nA 10G: ≤300 μs" },
            { category: "ip", q: "¿Criterio aceptación frame loss?", a: "≤0.01%\n\nMuy baja pérdida" },
            { category: "ip", q: "¿Line rates estándar RFC2544?", a: "1G, 10G, 25G, 40G, 100G, 400G" },
            
            // FIBRA ÓPTICA AVANZADO
            { category: "fibra", q: "¿Por qué funciona la fibra?", a: "Reflexión interna total\n\nÍndices de refracción diferentes" },
            { category: "fibra", q: "¿Diámetro recubrimiento primario?", a: "250 μm\n\n(Buffer)" },
            { category: "fibra", q: "¿Diámetro protección ajustada?", a: "900 μm\n\n(Tight buffer)" },
            { category: "fibra", q: "¿Qué es tubo holgado?", a: "Loose tube con gel\n\nPara cables de 8-36 fibras" },
            { category: "fibra", q: "¿Para qué sirve el gel?", a: "Anticongelante\n\nNo se escurre, protege" },
            { category: "fibra", q: "¿Cuántas fibras en cable exterior?", a: "8 a 36 fibras típico\n\nEn tubos holgados" },
            { category: "fibra", q: "¿Material protección mecánica?", a: "Kevlar\n\nResistente y ligero" },
            { category: "fibra", q: "¿Color fibra multimodo?", a: "Naranja\n\n(Monomodo: amarillo/azul)" },
            
            // GPON/FTTH
            { category: "fibra", q: "¿Qué significa GPON?", a: "Gigabit Passive Optical Network\n\nRed óptica pasiva gigabit" },
            { category: "fibra", q: "¿Velocidades de GPON?", a: "Downstream: 2.488 Gbps\nUpstream: 1.244 Gbps\n\nAsimétrica" },
            { category: "fibra", q: "¿Qué es un splitter óptico?", a: "Divisor pasivo 1:N\n\nNo requiere energía eléctrica" },
            { category: "fibra", q: "¿Pérdida splitter 1:2?", a: "~3.5 dB\n\nTeórico: 3 dB" },
            { category: "fibra", q: "¿Pérdida splitter 1:4?", a: "~7 dB\n\nTeórico: 6 dB" },
            { category: "fibra", q: "¿Pérdida splitter 1:8?", a: "~10.5 dB\n\nTeórico: 9 dB" },
            { category: "fibra", q: "¿Pérdida splitter 1:16?", a: "~14 dB\n\nTeórico: 12 dB" },
            { category: "fibra", q: "¿Pérdida splitter 1:32?", a: "~17.5 dB\n\nTeórico: 15 dB" },
            { category: "fibra", q: "¿Pérdida splitter 1:64?", a: "~21 dB\n\nTeórico: 18 dB" },
            { category: "fibra", q: "¿Qué es OLT?", a: "Optical Line Terminal\n\nEquipo en central (CO)" },
            { category: "fibra", q: "¿Qué es ONT/ONU?", a: "Optical Network Terminal/Unit\n\nEquipo en cliente" },
            { category: "fibra", q: "¿Longitudes de onda GPON?", a: "Downstream: 1490 nm\nUpstream: 1310 nm\n\nVideo RF: 1550 nm" },
            { category: "fibra", q: "¿Distancia máxima GPON?", a: "20 km (máx 60 km clase C+)\n\nDepende del power budget" },
            { category: "fibra", q: "¿Qué es XGS-PON?", a: "10G simétrico\n\n10 Gbps down y up" },
            { category: "fibra", q: "¿Power budget típico GPON?", a: "Clase B+: 28 dB\nClase C+: 32 dB" },
            
            // METRO ETHERNET
            { category: "ip", q: "¿Qué es Metro Ethernet?", a: "Servicios Carrier Ethernet\n\nEthernet como WAN" },
            { category: "ip", q: "¿Qué es E-Line?", a: "Punto a punto\n\nConexión dedicada entre 2 sitios" },
            { category: "ip", q: "¿Qué es E-LAN?", a: "Multipunto a multipunto\n\nTodos se comunican entre sí" },
            { category: "ip", q: "¿Qué es E-Tree?", a: "Punto a multipunto\n\nHub-and-spoke, raíz y hojas" },
            { category: "ip", q: "¿Qué es EVC?", a: "Ethernet Virtual Connection\n\nConexión lógica Ethernet" },
            { category: "ip", q: "¿Qué es MEF?", a: "Metro Ethernet Forum\n\nDefine estándares Carrier Ethernet" },
            { category: "ip", q: "¿Qué es CIR?", a: "Committed Information Rate\n\nAncho de banda garantizado" },
            { category: "ip", q: "¿Qué es EIR?", a: "Excess Information Rate\n\nAncho de banda extra permitido" },
            
            // IPv6
            { category: "ip", q: "¿Cuántos bits tiene IPv6?", a: "128 bits\n\nFormato: 8 grupos de 16 bits hex" },
            { category: "ip", q: "¿Prefijo link-local IPv6?", a: "FE80::/10\n\nNo ruteable, solo enlace local" },
            { category: "ip", q: "¿Prefijo global unicast IPv6?", a: "2000::/3\n\nDirecciones públicas ruteables" },
            { category: "ip", q: "¿Qué es ::1 en IPv6?", a: "Loopback\n\nEquivalente a 127.0.0.1" },
            { category: "ip", q: "¿Qué es :: en IPv6?", a: "Dirección no especificada\n\nEquivalente a 0.0.0.0" },
            { category: "ip", q: "¿Cuántas direcciones IPv6?", a: "2^128\n\n340 undecillones de direcciones" },
            
            // SEGURIDAD
            { category: "ip", q: "¿Qué es 802.1X?", a: "Control de acceso por puerto\n\nAutenticación basada en EAP" },
            { category: "ip", q: "¿Qué es MACsec?", a: "802.1AE\n\nCifrado capa 2 Ethernet" },
            { category: "ip", q: "¿Qué es DHCP Snooping?", a: "Seguridad DHCP\n\nFiltra mensajes no autorizados" },
            { category: "ip", q: "¿Qué es IP Source Guard?", a: "Filtra IP falsificadas\n\nUsa binding table de DHCP Snooping" },
            { category: "ip", q: "¿Qué es DAI?", a: "Dynamic ARP Inspection\n\nPreviene ARP spoofing" },
            { category: "ip", q: "¿Qué es BPDU Guard?", a: "Protección STP\n\nDesactiva puerto si recibe BPDU" },
            
            // SNMP/GESTIÓN
            { category: "bert", q: "¿Qué es SNMP?", a: "Simple Network Management Protocol\n\nProtocolo de gestión de red" },
            { category: "bert", q: "¿Puertos SNMP?", a: "UDP 161 (queries)\nUDP 162 (traps)" },
            { category: "bert", q: "¿Qué es una MIB?", a: "Management Information Base\n\nBase de datos de objetos gestionables" },
            { category: "bert", q: "¿Qué es un OID?", a: "Object Identifier\n\nIdentificador único de objeto MIB" },
            { category: "bert", q: "¿Qué es un trap SNMP?", a: "Notificación asíncrona\n\nAgente informa al manager" },
            { category: "bert", q: "¿Versiones de SNMP?", a: "v1: básico, inseguro\nv2c: mejoras, community\nv3: seguro, autenticación" },
            { category: "bert", q: "¿Qué es syslog?", a: "System Logging Protocol\n\nEnvía logs a servidor centralizado" },
            
            // TRANSCEPTORES ÓPTICOS (NUEVOS)
            { category: "fibra", q: "¿Qué hace un transceiver?", a: "Convierte señales\n\nEléctrica ↔ Óptica (conversión fotoeléctrica)" },
            { category: "fibra", q: "¿En qué capa opera un transceiver?", a: "Capa 1 - Física\n\nNivel más bajo del modelo OSI" },
            { category: "fibra", q: "¿Velocidad de SFP+?", a: "10 Gbps\n\nSFP=1G, SFP+=10G, SFP28=25G" },
            { category: "fibra", q: "¿Velocidad de QSFP28?", a: "100 Gbps\n\n4 canales × 25G" },
            { category: "fibra", q: "¿Alcances transceptores?", a: "SR~300m, LR~10km\nER~40km, ZR~80km+" },
            { category: "fibra", q: "¿Conector más compacto?", a: "LC (Lucent Connector)\n\nMás pequeño que SC" },
            { category: "fibra", q: "¿Qué guarda la EEPROM del transceiver?", a: "Info del módulo\n\nFabricante, modelo, serie, parámetros" },
            { category: "fibra", q: "¿Fórmula Power Budget?", a: "Tx mínimo - Rx sensibilidad\n\nResultado = margen para pérdidas" },
            { category: "fibra", q: "¿Pérdida por conector TIA?", a: "0.75 dB\n\nEmpalmes ~0.1 dB" },
            { category: "fibra", q: "¿Margen seguridad óptico?", a: "1.7 - 3 dB\n\nPor envejecimiento, temperatura, imprevistos" },
            { category: "fibra", q: "¿Atenuación típica fibra?", a: "0.22-0.5 dB/km\n\nMenor a 1550nm (~0.22 dB/km)" },
            { category: "fibra", q: "¿Alcance máximo multimodo?", a: "~5 km\n\nTípico 300m-2km" },
            
            // RFC 2544 DETALLADO (NUEVOS)
            { category: "bert", q: "¿Origen de RFC 2544?", a: "IETF 1999\n\nOriginalmente para laboratorio" },
            { category: "bert", q: "¿Tamaños trama RFC 2544?", a: "64, 128, 256, 512\n1024, 1280, 1518 bytes" },
            { category: "bert", q: "¿Qué prueba Back-to-Back?", a: "Capacidad de ráfagas\n\nProcesar sin pérdida" },
            { category: "bert", q: "¿Cuándo usar Y.1564?", a: "Multiservicio\n\nCIR/EIR por flujo, SLAs" },
            { category: "bert", q: "¿Qué prueba Throughput?", a: "Tasa máxima sin pérdida\n\nUsando búsqueda binaria" },
            { category: "bert", q: "¿Qué mide System Reset?", a: "Tiempo recuperación\n\nTras reinicio o failover" },
            { category: "bert", q: "¿Criterio throughput?", a: "≥99% del line rate\n\nSin pérdida de tramas" },
            { category: "bert", q: "¿Criterio frame loss?", a: "≤0.01%\n\nHasta 90% de carga" },
            { category: "bert", q: "¿Latencia @10G?", a: "≤300 μs\n\n@1G es ≤1 ms" },
            
            // EQUIPOS MINILINK (NUEVOS)
            { category: "radio", q: "¿Qué es configuración split?", a: "RAU + AMM\n\nExterior + Interior por cable" },
            { category: "radio", q: "¿Familia 6300?", a: "Outdoor (RAU)\n\nReemplaza RAU de TN" },
            { category: "radio", q: "¿Familia 6600?", a: "Indoor (AMM)\n\nReemplaza AMM de TN" },
            { category: "radio", q: "¿Qué es XPIC?", a: "Cross-Polar Interference Canceller\n\nRequerido para CCDP" },
            { category: "radio", q: "¿Qué es ACCP?", a: "Adjacent Channel Co-Polarization\n\nMisma polarización" },
            { category: "radio", q: "¿Qué es ACAP?", a: "Adjacent Channel Alternate Polarized\n\nPolarizaciones alternadas" },
            { category: "radio", q: "¿Qué es CCDP?", a: "Co-Channel Dual Polarized\n\nMismo canal, H y V" },
            { category: "radio", q: "¿Modulación máx MMU4A?", a: "4096 QAM\n\nAnchos: 80, 112 MHz" },
            { category: "radio", q: "¿PTx RAU alta potencia?", a: "≤30 dBm\n\nMedia potencia: ≤26 dBm" },
            { category: "radio", q: "¿Bandas RAU 6365?", a: "6-42 GHz\n\nCubre todo el rango" },
            { category: "radio", q: "¿Qué es Multi-band booster?", a: "Combina 2 bandas\n\nPrioridad en banda baja" },
            { category: "radio", q: "¿Qué es Carrier Aggregation?", a: "Suma anchos de banda\n\nMúltiples carriers" },
            { category: "radio", q: "¿Qué es Radio Link Bonding?", a: "Múltiples enlaces paralelos\n\nAumenta capacidad" },
            { category: "radio", q: "¿Qué es MIMO 2x2?", a: "2 Tx × 2 Rx antenas\n\nDuplica capacidad" },
            { category: "radio", q: "¿Modulación adaptativa?", a: "Cambia QAM según señal\n\nAlta señal=alta QAM" },
            
            // PROPAGACIÓN DETALLADA (NUEVOS)
            { category: "radio", q: "¿Gradiente refractividad?", a: "-40 N/km\n\nEn primer km sobre suelo" },
            { category: "radio", q: "¿Radio efectivo Tierra k=4/3?", a: "~8500 km\n\nReal: ~6400 km" },
            { category: "radio", q: "¿Criterio de Rayleigh?", a: "Superficie lisa vs rugosa\n\nBasado en diferencia de fase" },
            { category: "radio", q: "¿Coeficiente reflexión ρ=1?", a: "Reflexión especular perfecta\n\nρ=0: sin reflexión" },
            { category: "radio", q: "¿Qué domina bajo 10 GHz?", a: "Multipath fading\n\nSobre 10 GHz: lluvia" },
            { category: "radio", q: "¿Qué define G.821?", a: "SES, ES, UAT\n\nDisponibilidad y calidad" },
            { category: "radio", q: "¿SES según G.821?", a: "Severely Errored Second\n\nBER peor que 10⁻³" },
            { category: "radio", q: "¿Diversidad frecuencia?", a: "2 frecuencias distintas\n\nMisma señal" },
            { category: "radio", q: "¿Componentes Link Budget?", a: "ABF, Ao, AG, AL\n\nFree space, obstáculo, gas, reflexión" },
            { category: "radio", q: "¿Fórmula zona Fresnel?", a: "rF = 17.3√(d₁×d₂/f×d)\n\nResultado en metros" },
            { category: "radio", q: "¿Por qué diversidad en agua?", a: "Reflexiones + atmósfera\n\nCondiciones inestables" },
            
            // FIBRA DETALLADA (NUEVOS)
            { category: "fibra", q: "¿Recubrimiento primario?", a: "250 μm\n\nBuffer primario" },
            { category: "fibra", q: "¿Protección ajustada?", a: "900 μm\n\nVs tubo holgado con gel" },
            { category: "fibra", q: "¿Núcleo monomodo?", a: "8-10 μm\n\nMultimodo: 50 o 62.5 μm" },
            { category: "fibra", q: "¿Color fibra monomodo?", a: "Amarillo o Azul\n\nMultimodo: Naranja" },
            { category: "fibra", q: "¿Gel en estructura holgada?", a: "Anticongelante\n\nProtege fibras en tubo" },
            { category: "fibra", q: "¿Cable exterior típico?", a: "8-36 fibras\n\nEn tubos holgados" },
            { category: "fibra", q: "¿Función del Kevlar?", a: "Protección mecánica\n\nResistencia a tracción" },
            { category: "fibra", q: "¿Pérdida empalme fusión?", a: "~0.1 dB\n\nConector: 0.5-0.75 dB" }
        ];
        
        // Preguntas por tema
        const questionsDB = {
            propagacion: [
                { q: "¿Cuál es la fórmula de longitud de onda en microondas?", o: ["λ = 3/f", "λ = 30/f", "λ = 300/f", "λ = 3000/f"], a: 1, e: "λ (cm) = 30 / f (GHz)" },
                { q: "El factor k en atmósfera estándar es:", o: ["1", "4/3", "2", "3/4"], a: 1, e: "k ≈ 4/3 = 1.33" },
                { q: "¿A partir de qué frecuencia domina la lluvia?", o: ["1 GHz", "6 GHz", "10 GHz", "20 GHz"], a: 2, e: "≥ 10 GHz la precipitación domina" },
                { q: "El despejamiento mínimo de Fresnel es:", o: ["30%", "40%", "60%", "100%"], a: 2, e: "Se requiere 60% de despejamiento mínimo" },
                { q: "¿Qué significa EIRP?", o: ["Effective Indoor Radiated Power", "Effective Isotropic Radiated Power", "Enhanced Isotropic Radio Protocol", "Effective Interference Reduction Power"], a: 1, e: "Potencia Radiada Isotrópica Efectiva" },
                { q: "El criterio de Rayleigh determina:", o: ["Potencia mínima", "Si superficie es lisa o rugosa", "Frecuencia óptima", "Longitud de enlace"], a: 1, e: "Define cuándo una superficie pasa de lisa a rugosa" },
                { q: "¿Qué es diversidad de espacio?", o: ["2 frecuencias diferentes", "2 antenas receptoras separadas", "2 polarizaciones", "2 modulaciones"], a: 1, e: "Usa 2 antenas Rx, las señales faden independientemente" },
                { q: "La absorción de O₂ tiene pico en:", o: ["10 GHz", "23 GHz", "60 GHz", "100 GHz"], a: 2, e: "Oxígeno entre 50-70 GHz, pico a ~60 GHz" },
                { q: "La absorción de H₂O tiene pico en:", o: ["10 GHz", "23 GHz", "60 GHz", "100 GHz"], a: 1, e: "Vapor de agua a ~23 GHz" },
                { q: "¿Qué causa multipath fading?", o: ["Lluvia", "Reflexiones múltiples", "Temperatura", "Humedad"], a: 1, e: "Reflexiones de edificios, tierra, atmósfera" },
                { q: "Multipath fading es:", o: ["Lento, minutos/horas", "Rápido, segundos", "Constante", "Solo en lluvia"], a: 1, e: "Rápido, domina bajo 10 GHz" },
                { q: "Rain fading es:", o: ["Rápido", "De larga duración", "Solo bajo 10 GHz", "Insignificante"], a: 1, e: "Duración mayor, importante sobre 10 GHz" },
                { q: "¿Qué es coeficiente de reflexión ρ?", o: ["Pérdida por cable", "Capacidad de reflejar", "Error de bits", "Frecuencia"], a: 1, e: "|ρ|=0 no refleja, |ρ|=1 reflexión total" },
                { q: "ITU-T G.821 define:", o: ["Disponibilidad y calidad", "Frecuencias", "Potencias", "Antenas"], a: 0, e: "SES, ES, UAT para calidad de enlaces" }
            ],
            minilink: [
                { q: "¿Qué significa ACCP?", o: ["Adjacent Channel Co-Polarization", "Alternate Channel Co-Polarization", "Adjacent Channel Cross-Polarization", "Alternate Channel Cross-Polarization"], a: 0, e: "Canales adyacentes, misma polarización" },
                { q: "¿Qué configuración requiere XPIC?", o: ["ACCP", "ACAP", "CCDP", "Ninguna"], a: 2, e: "CCDP (Co-Channel Dual Polarized) requiere XPIC" },
                { q: "La modulación máxima de MMU4A es:", o: ["512 QAM", "1024 QAM", "2048 QAM", "4096 QAM"], a: 3, e: "4096 QAM con anchos de 80 y 112 MHz" },
                { q: "La potencia máxima de RAU alta potencia es:", o: ["20 dBm", "26 dBm", "30 dBm", "35 dBm"], a: 2, e: "PTx ≤ 30 dBm para RAU alta potencia" },
                { q: "¿Qué es XPIC?", o: ["Cross-Polar Interference Canceller", "Cross-Power Integration Controller", "Channel Protection Interface Control", "Cross-Path Interference Correction"], a: 0, e: "Cancela interferencia de polarización cruzada en CCDP" },
                { q: "La potencia máxima de RAU media potencia es:", o: ["20 dBm", "26 dBm", "30 dBm", "35 dBm"], a: 1, e: "PTx ≤ 26 dBm para RAU media potencia" },
                { q: "RAU 6365 cubre bandas:", o: ["6-15 GHz", "6-42 GHz", "15-38 GHz", "7-18 GHz"], a: 1, e: "6 GHz a 42 GHz, cubre todo el rango" },
                { q: "RAU 6364 cubre bandas:", o: ["6, 7, 8 GHz", "13, 15, 18 GHz", "23, 26, 38 GHz", "7-42 GHz"], a: 1, e: "13, 15, 18 GHz únicamente" },
                { q: "Familia 6300 reemplaza a:", o: ["AMM", "RAU (outdoor)", "MMU", "TRX"], a: 1, e: "6300 = outdoor (RAU), 6600 = indoor (AMM)" },
                { q: "Familia 6600 reemplaza a:", o: ["RAU", "AMM (indoor)", "Antenas", "Cables"], a: 1, e: "6600 = indoor, reemplaza AMM de TN" },
                { q: "¿Qué es 1+1 Hot Standby?", o: ["2 canales activos", "1 working + 1 standby", "Sin protección", "Diversidad de frecuencia"], a: 1, e: "Protección de hardware, 2 RAUs" },
                { q: "¿Qué es configuración 2×(1+0)?", o: ["2 RAUs, 2 radiocanales", "1 RAU protegida", "Diversidad de espacio", "MIMO"], a: 0, e: "Sin protección, doble capacidad" },
                { q: "Modulación adaptativa permite:", o: ["Velocidad fija", "Cambiar modulación según señal", "Solo alta modulación", "Solo baja modulación"], a: 1, e: "Alta señal=alta QAM, baja señal=baja QAM" },
                { q: "¿Qué es Radio Link Bonding?", o: ["Unir cables", "Agregar enlaces en paralelo", "Dividir canal", "Proteger señal"], a: 1, e: "Transporte Ethernet sobre múltiples Packet Links" },
                { q: "Carrier Aggregation hace:", o: ["Sumar anchos de banda", "Dividir canales", "Reducir potencia", "Aumentar latencia"], a: 0, e: "Suma ancho de banda de múltiples carriers" }
            ],
            tcpip: [
                { q: "¿Cuántas capas tiene el modelo OSI?", o: ["4", "5", "6", "7"], a: 3, e: "OSI tiene 7 capas, TCP/IP híbrido tiene 5" },
                { q: "El tamaño de una dirección MAC es:", o: ["32 bits", "48 bits", "64 bits", "128 bits"], a: 1, e: "48 bits = 6 bytes" },
                { q: "El tamaño mínimo de trama Ethernet es:", o: ["32 bytes", "64 bytes", "128 bytes", "256 bytes"], a: 1, e: "Mínimo 64 bytes, máximo 1518 bytes" },
                { q: "¿Cuántos hosts hay en una red /24?", o: ["252", "254", "256", "258"], a: 1, e: "2^8 - 2 = 254 hosts utilizables" },
                { q: "TCP es:", o: ["Sin conexión", "Orientado a conexión", "Solo UDP", "Broadcast"], a: 1, e: "TCP usa 3-way handshake, es confiable" },
                { q: "El 3-way handshake de TCP es:", o: ["ACK-SYN-FIN", "SYN-SYN/ACK-ACK", "FIN-ACK-FIN", "RST-ACK-SYN"], a: 1, e: "SYN → SYN/ACK → ACK" },
                { q: "MTU en Ethernet es:", o: ["1000 bytes", "1460 bytes", "1500 bytes", "1518 bytes"], a: 2, e: "1500 bytes de datos máximo" },
                { q: "El segmento TCP máximo es:", o: ["1460 bytes", "1480 bytes", "1500 bytes", "1518 bytes"], a: 0, e: "1500 - 20(IP) - 20(TCP) = 1460 bytes" },
                { q: "El puerto HTTP es:", o: ["21", "23", "80", "443"], a: 2, e: "Puerto 80, HTTPS usa 443" },
                { q: "El puerto FTP de control es:", o: ["20", "21", "22", "23"], a: 1, e: "21 control, 20 datos" },
                { q: "El puerto DNS es:", o: ["23", "53", "80", "443"], a: 1, e: "Puerto 53, generalmente UDP" },
                { q: "Telnet usa puerto:", o: ["21", "22", "23", "25"], a: 2, e: "Puerto 23, inseguro. SSH usa 22" },
                { q: "UDP es:", o: ["Orientado a conexión", "Sin conexión", "Solo para web", "Más lento que TCP"], a: 1, e: "Sin conexión, no confiable, rápido" },
                { q: "¿Qué usa UDP típicamente?", o: ["HTTP", "FTP", "DNS y VoIP", "Telnet"], a: 2, e: "DNS, VoIP, streaming toleran pérdida" },
                { q: "CSMA/CD significa:", o: ["Carrier Sense Multiple Access", "Control Signal Media Access", "Central System Main Access", "Cable Structured Media Access"], a: 0, e: "Detección de portadora y colisiones" }
            ],
            redesbasico: [
                { q: "LAN significa:", o: ["Large Area Network", "Local Area Network", "Link Access Network", "Low Area Network"], a: 1, e: "Red de Área Local" },
                { q: "WAN significa:", o: ["Wireless Area Network", "Wide Area Network", "Web Access Network", "World Area Network"], a: 1, e: "Red de Área Amplia" },
                { q: "Un Hub opera en capa:", o: ["1", "2", "3", "4"], a: 0, e: "Capa física, repite señal a todos" },
                { q: "Un Switch opera en capa:", o: ["1", "2", "3", "4"], a: 1, e: "Capa de enlace, usa MAC" },
                { q: "Un Router opera en capa:", o: ["1", "2", "3", "4"], a: 2, e: "Capa de red, usa IP" },
                { q: "La diferencia Hub vs Switch es:", o: ["Velocidad", "Hub repite a todos, Switch solo al destino", "Tamaño", "Color"], a: 1, e: "Switch evita colisiones" },
                { q: "Full Duplex permite:", o: ["Solo enviar", "Solo recibir", "Enviar Y recibir a la vez", "Ninguna"], a: 2, e: "Comunicación bidireccional simultánea" },
                { q: "El rango de IP privada clase A es:", o: ["192.168.0.0/16", "172.16.0.0/12", "10.0.0.0/8", "127.0.0.0/8"], a: 2, e: "10.0.0.0 - 10.255.255.255" },
                { q: "El rango de IP privada clase C es:", o: ["192.168.0.0/16", "172.16.0.0/12", "10.0.0.0/8", "127.0.0.0/8"], a: 0, e: "192.168.0.0 - 192.168.255.255" },
                { q: "¿Cuántos servidores DNS root existen?", o: ["7", "10", "13", "20"], a: 2, e: "13 servidores identificados A-M" },
                { q: "¿Quién administra dominios de nivel superior?", o: ["IEEE", "ITU", "ICANN", "ISO"], a: 2, e: "Internet Corporation for Assigned Names and Numbers" },
                { q: "Clase A tiene máscara:", o: ["/8", "/16", "/24", "/32"], a: 0, e: "255.0.0.0" },
                { q: "Clase B tiene máscara:", o: ["/8", "/16", "/24", "/32"], a: 1, e: "255.255.0.0" },
                { q: "Clase C tiene máscara:", o: ["/8", "/16", "/24", "/32"], a: 2, e: "255.255.255.0" },
                { q: "Dirección broadcast en una /24:", o: ["x.x.x.0", "x.x.x.1", "x.x.x.254", "x.x.x.255"], a: 3, e: "Todos los bits de host en 1" }
            ],
            bert: [
                { q: "BER significa:", o: ["Bit Error Recovery", "Bit Error Rate", "Binary Error Reduction", "Byte Error Rate"], a: 1, e: "Bit Error Rate - Tasa de errores de bits" },
                { q: "¿Qué BER es estándar para telecomunicaciones?", o: ["10⁻⁶", "10⁻⁹", "10⁻¹²", "10⁻¹⁵"], a: 1, e: "10⁻⁹ es el estándar general" },
                { q: "PRBS significa:", o: ["Primary Rate Bit Sequence", "Pseudo-Random Bit Sequence", "Protocol Rate Bit System", "Primary Random Binary Signal"], a: 1, e: "Secuencia Pseudo-Aleatoria de Bits" },
                { q: "La latencia se define como:", o: ["Ancho de banda", "Paquetes perdidos", "Tiempo de transmisión", "Velocidad de fibra"], a: 2, e: "Tiempo que tardan los datos en transmitirse" },
                { q: "El jitter afecta principalmente a:", o: ["Archivos", "Email", "Voz y video", "Texto"], a: 2, e: "VoIP y video son sensibles a fluctuaciones" },
                { q: "¿Qué causa pérdida de paquetes?", o: ["Solo errores físicos", "Congestión y ataques DoS", "Velocidad alta", "Cables nuevos"], a: 1, e: "Congestión, sobreutilización, hardware obsoleto, DoS" },
                { q: "¿Qué es PER?", o: ["Power Error Rate", "Packet Error Rate", "Protocol Error Reduction", "Physical Error Recovery"], a: 1, e: "Packet Error Rate, relacionado con BER" },
                { q: "La latencia alta afecta:", o: ["Solo archivos", "Ventana TCP y VoIP", "Nada", "Solo video"], a: 1, e: "Reduce velocidad efectiva TCP, afecta VoIP" },
                { q: "El jitter causa en video:", o: ["Mayor resolución", "Pixelación", "Más colores", "Nada"], a: 1, e: "Fluctuación causa pixelación y cortes" },
                { q: "BERT valida redes de:", o: ["Solo cobre", "Fibra óptica y Ethernet", "Solo radio", "Solo WiFi"], a: 1, e: "Fibra óptica, servicios Ethernet, radioenlaces" }
            ],
            rfc2544: [
                { q: "RFC 2544 fue publicado por:", o: ["IEEE", "ITU", "IETF", "ISO"], a: 2, e: "Internet Engineering Task Force, 1999" },
                { q: "Los tamaños de trama RFC 2544 incluyen:", o: ["32, 64, 128", "64, 128, 256, 512, 1024, 1280, 1518", "100, 500, 1000", "64, 512, 1518"], a: 1, e: "7 tamaños estándar de prueba" },
                { q: "Throughput en RFC 2544 mide:", o: ["Latencia", "Tasa máxima sin pérdida", "Errores de bits", "Jitter"], a: 1, e: "Tasa máxima de transferencia sin pérdida de tramas" },
                { q: "Back-to-Back mide:", o: ["Latencia", "Capacidad de ráfagas", "BER", "Ancho de banda"], a: 1, e: "Capacidad para procesar ráfagas sucesivas" },
                { q: "¿Qué estándar reemplaza a RFC 2544?", o: ["RFC 2545", "ITU-T Y.1564", "IEEE 802.3", "RFC 3000"], a: 1, e: "ITU-T Y.1564 modela mejor múltiples servicios" },
                { q: "System Reset mide:", o: ["Tiempo de boot", "Tiempo de recuperación", "Velocidad", "Latencia"], a: 1, e: "Tiempo de recuperación tras reinicio" },
                { q: "Frame Loss mide:", o: ["Tramas correctas", "Porcentaje no recibido", "Velocidad", "Tamaño"], a: 1, e: "Porcentaje de tramas que no llegan" },
                { q: "Criterio aceptación throughput:", o: ["≥90%", "≥95%", "≥99%", "100%"], a: 2, e: "≥99% del rate teórico" },
                { q: "Criterio aceptación latencia @1G:", o: ["≤5 ms", "≤1 ms", "≤10 ms", "≤100 ms"], a: 1, e: "≤1 ms a 1 Gbps" },
                { q: "Criterio aceptación latencia @10G:", o: ["≤1 ms", "≤300 μs", "≤500 μs", "≤1 μs"], a: 1, e: "≤300 μs a 10 Gbps" },
                { q: "Criterio frame loss:", o: ["≤1%", "≤0.1%", "≤0.01%", "0%"], a: 2, e: "≤0.01% pérdida aceptable" },
                { q: "CIR significa:", o: ["Committed Information Rate", "Central Information Rate", "Channel Information Rate", "Carrier Information Rate"], a: 0, e: "Tasa de información comprometida" },
                { q: "EIR significa:", o: ["Extra Information Rate", "Excess Information Rate", "Enhanced Information Rate", "Extended Information Rate"], a: 1, e: "Tasa de información excedente" },
                { q: "PTP IEEE 1588 es:", o: ["Prueba de throughput", "Sincronización precisa", "Protocolo de routing", "Estándar de fibra"], a: 1, e: "Precision Time Protocol para sincronización" }
            ],
            fibra: [
                { q: "Los tipos principales de fibra son:", o: ["Mono y Multi", "Simple y Doble", "Corta y Larga", "Rápida y Lenta"], a: 0, e: "Monomodo (SM) y Multimodo (MM)" },
                { q: "El color de fibra monomodo es:", o: ["Naranja", "Amarillo", "Azul", "Verde"], a: 1, e: "Amarilla. Multimodo es naranja" },
                { q: "El núcleo de fibra SM mide:", o: ["4-6 μm", "8-10 μm", "50 μm", "62.5 μm"], a: 1, e: "8-10 μm de diámetro" },
                { q: "La pérdida por empalme es:", o: ["~0.1 dB", "~0.5 dB", "~0.75 dB", "~1 dB"], a: 0, e: "Empalme fusión ~0.1 dB" },
                { q: "La pérdida por conector es:", o: ["~0.1 dB", "~0.5 dB", "~0.75 dB", "~1.5 dB"], a: 2, e: "Conector típico ~0.75 dB" },
                { q: "La fibra funciona por:", o: ["Electricidad", "Reflexión interna total", "Magnetismo", "Radiofrecuencia"], a: 1, e: "Reflexión total en el núcleo" },
                { q: "Recubrimiento primario mide:", o: ["125 μm", "250 μm", "900 μm", "1000 μm"], a: 1, e: "250 μm de buffer" },
                { q: "Protección ajustada mide:", o: ["250 μm", "500 μm", "900 μm", "1200 μm"], a: 2, e: "900 μm tight buffer" },
                { q: "El gel en tubo holgado sirve para:", o: ["Conducir luz", "Anticongelante", "Aumentar velocidad", "Reducir peso"], a: 1, e: "Anticongelante, protege las fibras" },
                { q: "Cable exterior típico tiene:", o: ["1-4 fibras", "8-36 fibras", "100-200 fibras", "500+ fibras"], a: 1, e: "8 a 36 fibras en tubos holgados" },
                { q: "El Kevlar en cable sirve para:", o: ["Conducir luz", "Protección mecánica", "Aislamiento eléctrico", "Refrigeración"], a: 1, e: "Protección mecánica, material resistente" },
                { q: "Distancia máxima multimodo:", o: ["100m", "5 km", "40 km", "80 km"], a: 1, e: "Hasta 5 km (típico 300m-2km)" }
            ],
            transceptores: [
                { q: "SFP significa:", o: ["Single Fiber Pluggable", "Small Form-Factor Pluggable", "Standard Fiber Protocol", "Simple Fast Port"], a: 1, e: "Small Form-Factor Pluggable" },
                { q: "QSFP significa:", o: ["Quick SFP", "Quad SFP", "Quality SFP", "Quarter SFP"], a: 1, e: "Quad Small Form-Factor Pluggable - 4 canales" },
                { q: "SR significa:", o: ["Single Rate", "Short Reach", "Standard Rate", "Super Range"], a: 1, e: "Short Reach - corto alcance (~300m)" },
                { q: "LR alcanza aproximadamente:", o: ["300m", "2km", "10km", "40km"], a: 2, e: "Long Reach ~10 km" },
                { q: "Power Budget se calcula:", o: ["Tx + Rx", "Tx - Rx sens", "Rx - Tx", "Tx × Rx"], a: 1, e: "Power Budget = Tx mín - Rx sensibilidad" },
                { q: "ER alcanza aproximadamente:", o: ["10km", "20km", "40km", "80km"], a: 2, e: "Extended Reach ~40 km" },
                { q: "ZR alcanza aproximadamente:", o: ["40km", "60km", "80km+", "100km"], a: 2, e: "ZR Reach 80 km o más" },
                { q: "La EEPROM del transceiver almacena:", o: ["Señal óptica", "Datos del fabricante", "Luz láser", "Errores"], a: 1, e: "Fabricante, modelo y configuración" },
                { q: "Transceiver opera en capa OSI:", o: ["1", "2", "3", "4"], a: 0, e: "Capa 1 (Física), conversión de señales" },
                { q: "El láser Tx hace:", o: ["Recibir luz", "Generar señal óptica", "Filtrar ruido", "Almacenar datos"], a: 1, e: "Convierte eléctrico a luz" },
                { q: "El fotodiodo Rx hace:", o: ["Generar luz", "Detectar luz recibida", "Amplificar", "Filtrar"], a: 1, e: "Convierte luz a eléctrico" },
                { q: "SFP28 es para:", o: ["10 Gbps", "25 Gbps", "40 Gbps", "100 Gbps"], a: 1, e: "25 Gbps, variante alta velocidad" },
                { q: "Tipos de conectores ópticos:", o: ["RJ45, RJ11", "LC, SC, MPO", "USB, HDMI", "BNC, F"], a: 1, e: "LC es el más pequeño y común" },
                { q: "Atenuación fibra típica es:", o: ["0.1-0.2 dB/km", "0.22-0.5 dB/km", "1-2 dB/km", "5-10 dB/km"], a: 1, e: "0.22 dB/km a 1550nm, 0.5 dB/km en peor caso" },
                { q: "Margen seguridad recomendado:", o: ["0.5-1 dB", "1.7-3 dB", "5-10 dB", "15-20 dB"], a: 1, e: "1.7 a 3 dB por envejecimiento y variabilidad" }
            ],
            avanzado: [
                { q: "El radio efectivo de la Tierra con k=4/3 es:", o: ["6,371 km", "8,500 km", "10,000 km", "12,000 km"], a: 1, e: "~8,500 km (radio real ~6,371 km)" },
                { q: "El gradiente de refractividad típico es:", o: ["-20 N/km", "-40 N/km", "-60 N/km", "-80 N/km"], a: 1, e: "dN/dh ≈ -40 N/km en regiones templadas" },
                { q: "El pico de absorción del O₂ está en:", o: ["23 GHz", "38 GHz", "60 GHz", "80 GHz"], a: 2, e: "Oxígeno tiene pico entre 50-70 GHz" },
                { q: "El pico de absorción del H₂O está en:", o: ["10 GHz", "23 GHz", "45 GHz", "60 GHz"], a: 1, e: "Vapor de agua tiene pico a ~23 GHz" },
                { q: "IPv6 tiene cuántos bits:", o: ["32 bits", "64 bits", "128 bits", "256 bits"], a: 2, e: "128 bits = 8 secciones de 16 bits" },
                { q: "El tiempo de convergencia de OSPF es:", o: ["1-2 segundos", "4-5 segundos", "30 segundos", "180 segundos"], a: 1, e: "OSPF: 4-5s, RIP puede ser 180s" },
                { q: "La atenuación SM a 1310nm es:", o: ["0.15 dB/km", "0.22 dB/km", "0.35 dB/km", "0.50 dB/km"], a: 2, e: "0.35 dB/km (mayor que 0.22 a 1550nm)" },
                { q: "El margen de seguridad en Power Budget es:", o: ["0.5-1 dB", "1.7-3 dB", "5-10 dB", "15-20 dB"], a: 1, e: "1.7 a 3 dB recomendado" },
                { q: "ITU define cuántas zonas climáticas de lluvia:", o: ["8", "12", "16", "20"], a: 2, e: "16 zonas con diferentes tasas de precipitación" },
                { q: "BER para datos críticos es:", o: ["10⁻⁶", "10⁻⁹", "10⁻¹³", "10⁻¹⁵"], a: 2, e: "10⁻¹³ para datos críticos (más exigente)" },
                { q: "La modulación máxima de RAU 6365 es:", o: ["4096 QAM", "6144 QAM", "8192 QAM", "16384 QAM"], a: 2, e: "8192 QAM para anchos de 28 y 40 MHz" },
                { q: "MIMO 2x2 permite:", o: ["Triplicar capacidad", "Duplicar capacidad", "Aumentar 50%", "Reducir errores"], a: 1, e: "Multiplexación espacial duplica capacidad" },
                { q: "Multi-band booster combina:", o: ["2 polarizaciones", "2 bandas de frecuencia", "2 antenas", "2 modulaciones"], a: 1, e: "Banda baja (prioridad) + banda alta (capacidad)" },
                { q: "El protocolo que asigna IPs automáticamente es:", o: ["DNS", "DHCP", "ARP", "ICMP"], a: 1, e: "DHCP asigna IP, gateway y DNS" },
                { q: "ARP convierte:", o: ["IP a MAC", "MAC a IP", "Nombre a IP", "IP a nombre"], a: 0, e: "Obtiene dirección MAC dada una IP" }
            ]
        };
        
        // Ejercicios de fórmulas
        const exercisesDB = [
            { cat: "radio", title: "Longitud de Onda", formula: "λ (cm) = <input class='blank-input' data-answer='30'> / f (GHz)", exp: "λ = 30/f. Ejemplo: 6 GHz → λ = 5 cm" },
            { cat: "radio", title: "Factor k", formula: "k ≈ <input class='blank-input' data-answer='4/3,1.33'> (atmósfera estándar)", exp: "k ≈ 4/3 = 1.33" },
            { cat: "radio", title: "Zona de Fresnel", formula: "rF = <input class='blank-input' data-answer='17.3,17,3'> × √(d₁×d₂)/(f×d)", exp: "rF = 17.3 × √(d₁×d₂)/(f×d)" },
            { cat: "radio", title: "Despejamiento Fresnel", formula: "Despejamiento mínimo: <input class='blank-input' data-answer='60'>%", exp: "Se requiere 60% de despejamiento" },
            { cat: "radio", title: "Pérdida Espacio Libre", formula: "ABF = <input class='blank-input' data-answer='92.4,92,4'> + 20×log(f) + 20×log(d)", exp: "ABF = 92.4 + 20×log(f) + 20×log(d)" },
            { cat: "optica", title: "Power Budget", formula: "PB = Tx mín - <input class='blank-input' data-answer='Rx sensibilidad,sensibilidad,rx'>", exp: "PB = Tx mín - Rx sensibilidad" },
            { cat: "optica", title: "Pérdida Empalme", formula: "Pérdida empalme: ~<input class='blank-input' data-answer='0.1,0,1'> dB", exp: "Empalme fusión ~0.1 dB" },
            { cat: "optica", title: "Pérdida Conector", formula: "Pérdida conector: ~<input class='blank-input' data-answer='0.75,0,75'> dB", exp: "Conector típico ~0.75 dB" },
            { cat: "optica", title: "Atenuación SM 1550nm", formula: "Atenuación SM 1550nm: ~<input class='blank-input' data-answer='0.22,0,22'> dB/km", exp: "Fibra SM a 1550nm ~0.22 dB/km" },
            { cat: "redes", title: "Hosts en Subred", formula: "Hosts = 2^n - <input class='blank-input' data-answer='2'>", exp: "Se restan red y broadcast" },
            { cat: "redes", title: "Máscara /24", formula: "/24 = 255.255.255.<input class='blank-input' data-answer='0'>", exp: "/24 = 255.255.255.0 = 254 hosts" },
            { cat: "redes", title: "Hosts en /24", formula: "Red /24 = <input class='blank-input' data-answer='254'> hosts", exp: "2^8 - 2 = 254 hosts" },
            { cat: "redes", title: "Dirección MAC", formula: "MAC: <input class='blank-input' data-answer='48'> bits (<input class='blank-input' data-answer='6'> bytes)", exp: "MAC = 48 bits = 6 bytes" },
            { cat: "redes", title: "BER Estándar", formula: "BER estándar: 10^<input class='blank-input' data-answer='-9'>", exp: "BER estándar telecomunicaciones = 10⁻⁹" },
            { cat: "redes", title: "BER Datos Críticos", formula: "BER datos críticos: 10^<input class='blank-input' data-answer='-13'>", exp: "10⁻¹³ para transmisión de datos críticos" },
            { cat: "redes", title: "IPv6", formula: "IPv6 tiene <input class='blank-input' data-answer='128'> bits", exp: "128 bits = 8 secciones de 16 bits" },
            { cat: "redes", title: "Jumbo Frame", formula: "Jumbo Frame: <input class='blank-input' data-answer='9000'> bytes", exp: "9000 bytes (no parte oficial RFC 2544)" },
            { cat: "redes", title: "Convergencia OSPF", formula: "OSPF converge en <input class='blank-input' data-answer='4,5,4-5'> segundos", exp: "4-5 segundos vs 180s de RIP" },
            { cat: "radio", title: "Radio Efectivo Tierra", formula: "Radio efectivo (k=4/3): ~<input class='blank-input' data-answer='8500,8,500'> km", exp: "k=4/3 → Radio efectivo ~8,500 km" },
            { cat: "radio", title: "Gradiente Refractividad", formula: "dN/dh típico: <input class='blank-input' data-answer='-40'> N/km", exp: "Gradiente -40 N/km en regiones templadas" },
            { cat: "radio", title: "Pico Absorción O₂", formula: "Pico absorción O₂: ~<input class='blank-input' data-answer='60'> GHz", exp: "Oxígeno tiene pico entre 50-70 GHz" },
            { cat: "radio", title: "Pico Absorción H₂O", formula: "Pico absorción H₂O: ~<input class='blank-input' data-answer='23'> GHz", exp: "Vapor de agua tiene pico a ~23 GHz" },
            { cat: "radio", title: "Zonas Climáticas ITU", formula: "ITU define <input class='blank-input' data-answer='16'> zonas de lluvia", exp: "16 zonas climáticas con diferentes precipitaciones" },
            { cat: "radio", title: "Modulación RAU 6365", formula: "RAU 6365 soporta hasta <input class='blank-input' data-answer='8192'> QAM", exp: "8192 QAM para 28 y 40 MHz" },
            { cat: "optica", title: "Atenuación SM 1310nm", formula: "Atenuación SM 1310nm: ~<input class='blank-input' data-answer='0.35,0,35'> dB/km", exp: "0.35 dB/km (mayor que 0.22 a 1550nm)" },
            { cat: "optica", title: "Margen Seguridad", formula: "Margen seguridad Power Budget: <input class='blank-input' data-answer='1.7,3,1.7-3'> dB", exp: "1.7 a 3 dB recomendado" },
            { cat: "optica", title: "Protección Ajustada", formula: "Protección ajustada: <input class='blank-input' data-answer='900'> μm", exp: "900 μm vs tubo holgado con gel" },
            
            // TCP/IP Y REDES
            { cat: "redes", title: "Capas OSI", formula: "Modelo OSI tiene <input class='blank-input' data-answer='7'> capas", exp: "TCP/IP híbrido tiene 5 capas" },
            { cat: "redes", title: "Capas TCP/IP Híbrido", formula: "Modelo TCP/IP híbrido tiene <input class='blank-input' data-answer='5'> capas", exp: "Aplicación, Transporte, Red, Enlace, Física" },
            { cat: "redes", title: "Trama Mínima Ethernet", formula: "Trama Ethernet mínima: <input class='blank-input' data-answer='64'> bytes", exp: "64 bytes mínimo, 1518 máximo" },
            { cat: "redes", title: "Trama Máxima Ethernet", formula: "Trama Ethernet máxima: <input class='blank-input' data-answer='1518'> bytes", exp: "Sin contar Jumbo Frames (9000)" },
            { cat: "redes", title: "MTU Ethernet", formula: "MTU Ethernet: <input class='blank-input' data-answer='1500'> bytes", exp: "Maximum Transmission Unit" },
            { cat: "redes", title: "Segmento TCP Máximo", formula: "Segmento TCP máximo: <input class='blank-input' data-answer='1460'> bytes", exp: "1500 - 20(IP) - 20(TCP)" },
            { cat: "redes", title: "Puerto HTTP", formula: "Puerto HTTP: <input class='blank-input' data-answer='80'>", exp: "HTTPS usa puerto 443" },
            { cat: "redes", title: "Puerto FTP Control", formula: "Puerto FTP control: <input class='blank-input' data-answer='21'>", exp: "Puerto 20 para datos" },
            { cat: "redes", title: "Puerto DNS", formula: "Puerto DNS: <input class='blank-input' data-answer='53'>", exp: "Generalmente UDP" },
            { cat: "redes", title: "Puerto Telnet", formula: "Puerto Telnet: <input class='blank-input' data-answer='23'>", exp: "SSH usa puerto 22" },
            { cat: "redes", title: "Puerto SSH", formula: "Puerto SSH: <input class='blank-input' data-answer='22'>", exp: "Reemplazo seguro de Telnet" },
            { cat: "redes", title: "Servidores DNS Root", formula: "Servidores DNS root: <input class='blank-input' data-answer='13'>", exp: "Identificados de A a M" },
            { cat: "redes", title: "Máscara Clase A", formula: "Clase A máscara: /<input class='blank-input' data-answer='8'>", exp: "255.0.0.0" },
            { cat: "redes", title: "Máscara Clase B", formula: "Clase B máscara: /<input class='blank-input' data-answer='16'>", exp: "255.255.0.0" },
            { cat: "redes", title: "Máscara Clase C", formula: "Clase C máscara: /<input class='blank-input' data-answer='24'>", exp: "255.255.255.0" },
            { cat: "redes", title: "Fast Ethernet", formula: "Fast Ethernet: <input class='blank-input' data-answer='100'> Mbps", exp: "100BASE-TX" },
            { cat: "redes", title: "Gigabit Ethernet", formula: "Gigabit Ethernet: <input class='blank-input' data-answer='1000,1'> Mbps/Gbps", exp: "1000BASE-T" },
            
            // EJERCICIOS NUEVOS - PROPAGACIÓN Y RADIO
            { cat: "radio", title: "Margen de Fading", formula: "Margen de fading típico: hasta <input class='blank-input' data-answer='40'> dB", exp: "Hasta 40 dB según disponibilidad" },
            { cat: "radio", title: "PTx Alta Potencia", formula: "RAU alta potencia: PTx ≤ <input class='blank-input' data-answer='30'> dBm", exp: "30 dBm máximo" },
            { cat: "radio", title: "PTx Media Potencia", formula: "RAU media potencia: PTx ≤ <input class='blank-input' data-answer='26'> dBm", exp: "26 dBm máximo" },
            { cat: "radio", title: "Modulación MMU2H", formula: "MMU2H máximo: <input class='blank-input' data-answer='512'> QAM", exp: "Primera con XPIC y adaptativa" },
            { cat: "radio", title: "Modulación MMU3A", formula: "MMU3A máximo: <input class='blank-input' data-answer='1024'> QAM", exp: "Anchos 28, 40, 56 MHz" },
            { cat: "radio", title: "Modulación MMU4A", formula: "MMU4A máximo: <input class='blank-input' data-answer='4096'> QAM", exp: "Anchos 80, 112 MHz" },
            { cat: "radio", title: "Bandas MINI-LINK", formula: "MINI-LINK opera: <input class='blank-input' data-answer='7'>-<input class='blank-input' data-answer='38'> GHz", exp: "7 a 38 GHz, requiere LOS" },
            { cat: "radio", title: "Bandas RAU 6365", formula: "RAU 6365: <input class='blank-input' data-answer='6'> a <input class='blank-input' data-answer='42'> GHz", exp: "Cubre todo el rango" },
            
            // EJERCICIOS NUEVOS - RFC2544 Y TESTING
            { cat: "redes", title: "Criterio Throughput", formula: "Aceptación throughput: ≥<input class='blank-input' data-answer='99'>%", exp: "99% del rate teórico" },
            { cat: "redes", title: "Criterio Frame Loss", formula: "Aceptación frame loss: ≤<input class='blank-input' data-answer='0.01'>%", exp: "Muy baja pérdida" },
            { cat: "redes", title: "Latencia @1G", formula: "Latencia máxima @1G: ≤<input class='blank-input' data-answer='1'> ms", exp: "1 ms a 1 Gbps" },
            { cat: "redes", title: "Latencia @10G", formula: "Latencia máxima @10G: ≤<input class='blank-input' data-answer='300'> μs", exp: "300 microsegundos" },
            
            // EJERCICIOS NUEVOS - FIBRA Y TRANSCEPTORES
            { cat: "optica", title: "Recubrimiento Primario", formula: "Recubrimiento primario: <input class='blank-input' data-answer='250'> μm", exp: "Buffer primario" },
            { cat: "optica", title: "Distancia SR", formula: "SR (Short Reach): ~<input class='blank-input' data-answer='300'> m", exp: "Corto alcance" },
            { cat: "optica", title: "Distancia LR", formula: "LR (Long Reach): ~<input class='blank-input' data-answer='10'> km", exp: "Largo alcance" },
            { cat: "optica", title: "Distancia ER", formula: "ER (Extended Reach): ~<input class='blank-input' data-answer='40'> km", exp: "Alcance extendido" },
            { cat: "optica", title: "Distancia ZR", formula: "ZR: <input class='blank-input' data-answer='80'> km o más", exp: "Muy largo alcance" },
            { cat: "optica", title: "Distancia Multimodo", formula: "Multimodo máximo: ~<input class='blank-input' data-answer='5'> km", exp: "Típico 300m-2km" },
            { cat: "optica", title: "Fibras Cable Exterior", formula: "Cable exterior típico: <input class='blank-input' data-answer='8'>-<input class='blank-input' data-answer='36'> fibras", exp: "En tubos holgados" },
            { cat: "optica", title: "Núcleo Monomodo", formula: "Núcleo SM: <input class='blank-input' data-answer='8'>-<input class='blank-input' data-answer='10'> μm", exp: "8-10 micrómetros" }
        ];
        
        // Tips
        const tips = [
            "Radio efectivo de la Tierra con k=4/3 es ~8,500 km.",
            "El gradiente de refractividad típico es -40 N/km.",
            "El O₂ absorbe a ~60 GHz, el H₂O a ~23 GHz.",
            "OSPF converge en 4-5 segundos, RIP en hasta 180 segundos.",
            "IPv6 tiene 128 bits (8 secciones de 16 bits).",
            "BER para datos críticos es 10⁻¹³ (más exigente que 10⁻⁹).",
            "RAU 6365 soporta hasta 8192 QAM.",
            "Margen de seguridad en Power Budget: 1.7-3 dB.",
            "ITU define 16 zonas climáticas de lluvia.",
            "ARP convierte IP a MAC, DNS convierte nombre a IP.",
            "DHCP asigna IP, gateway y DNS automáticamente.",
            "Atenuación SM a 1310nm es 0.35 dB/km (mayor que 1550nm).",
            "La primera zona de Fresnel debe estar despejada al menos en un 60%.",
            "El factor k en atmósfera estándar es 4/3 ≈ 1.33.",
            "A frecuencias ≥ 10 GHz, la lluvia domina la atenuación.",
            "XPIC se requiere solo en configuración CCDP.",
            "Power Budget = Tx mín - Rx sensibilidad.",
            "BER de 10⁻⁹ es estándar para telecomunicaciones.",
            "Switch opera en capa 2, Router en capa 3.",
            "λ (cm) = 30 / f (GHz)",
            "Fibra monomodo (amarilla) para largas distancias.",
            "Pérdida empalme ~0.1 dB, conector ~0.75 dB.",
            "/24 = 254 hosts utilizables (2^8 - 2).",
            "Diversidad de espacio: 2 antenas Rx, combate multipath.",
            "Criterio Rayleigh: determina si superficie es lisa o rugosa.",
            "G.821/G.826 definen SES, ES y disponibilidad.",
            "RAU alta potencia: ≤30 dBm, media potencia: ≤26 dBm.",
            "6300 = outdoor (RAU), 6600 = indoor (AMM).",
            "Modulación adaptativa: cambia QAM según señal recibida.",
            "RFC 2544: throughput ≥99%, frame loss ≤0.01%.",
            "Latencia máxima: ≤1ms @1G, ≤300μs @10G.",
            "CIR = tasa comprometida, EIR = tasa excedente.",
            "PTP IEEE 1588: sincronización de tiempo precisa.",
            "Transceiver opera en capa 1 (física) del modelo OSI.",
            "SR~300m, LR~10km, ER~40km, ZR~80km+.",
            "Recubrimiento primario fibra: 250 μm, ajustado: 900 μm.",
            "Multimodo alcanza hasta 5 km (típico 300m-2km).",
            "Núcleo monomodo: 8-10 μm de diámetro.",
            "SFP=1G, SFP+=10G, SFP28=25G, QSFP28=100G.",
            "ACCP=misma polarización, ACAP=alternada, CCDP=co-canal dual.",
            "Carrier Aggregation suma ancho de banda de múltiples carriers.",
            "Radio Link Bonding agrega Packet Links en paralelo.",
            "Back-to-Back RFC2544 prueba capacidad de ráfagas.",
            "Y.1564 es mejor para escenarios multiservicio con SLAs.",
            "El gradiente de refractividad estándar es -40 N/km.",
            "UAT = Unavailable Time, SES = Severely Errored Second.",
            "G.826 define calidad para conexiones ≥2048 kbps.",
            "Conector LC es más compacto que SC.",
            "La EEPROM del transceiver guarda info del fabricante.",
            "Fibra amarilla/azul = monomodo, naranja = multimodo.",
            "Gel anticongelante protege fibras en tubo holgado.",
            "Kevlar proporciona resistencia mecánica al cable.",
            "Diversidad de frecuencia: misma señal en 2 frecuencias."
        ];
        
        // ============ VERDADERO O FALSO ============
        const vofQuestionsDB = [
            // RADIO Y PROPAGACIÓN
            { category: "radio", statement: "El factor k en atmósfera estándar es 4/3 ≈ 1.33", answer: true, explanation: "Correcto. k ≈ 4/3 = 1.33 en atmósfera estándar, dando un radio efectivo de ~8,500 km." },
            { category: "radio", statement: "La longitud de onda a 15 GHz es 2 cm", answer: true, explanation: "Correcto. λ = 30/15 = 2 cm." },
            { category: "radio", statement: "La lluvia domina la atenuación a frecuencias menores de 5 GHz", answer: false, explanation: "Falso. La lluvia domina a frecuencias ≥ 10 GHz. Por debajo dominan efectos de terreno." },
            { category: "radio", statement: "Se requiere un despejamiento mínimo del 60% de la primera zona de Fresnel", answer: true, explanation: "Correcto. Menos despejamiento causa pérdidas por difracción." },
            { category: "radio", statement: "EIRP significa Effective Isotropic Radiated Power", answer: true, explanation: "Correcto. Potencia Radiada Isotrópica Efectiva." },
            { category: "radio", statement: "El margen de fading típico puede llegar hasta 40 dB", answer: true, explanation: "Correcto. Depende de la disponibilidad requerida." },
            { category: "radio", statement: "XPIC es necesario para configuración ACCP", answer: false, explanation: "Falso. XPIC es necesario para CCDP (Co-Channel Dual Polarized), no ACCP." },
            { category: "radio", statement: "El pico de absorción del oxígeno está a ~60 GHz", answer: true, explanation: "Correcto. Entre 50-70 GHz, con máximo a ~60 GHz." },
            { category: "radio", statement: "El vapor de agua tiene un pico de absorción a 60 GHz", answer: false, explanation: "Falso. El H₂O tiene pico a ~23 GHz, no a 60 GHz." },
            { category: "radio", statement: "La diversidad de espacio usa dos antenas receptoras separadas", answer: true, explanation: "Correcto. Las señales faden independientemente." },
            { category: "radio", statement: "MINI-LINK opera en el rango de 7-38 GHz", answer: true, explanation: "Correcto. Requiere línea de vista." },
            { category: "radio", statement: "La familia 6300 reemplaza a las unidades indoor AMM", answer: false, explanation: "Falso. 6300 reemplaza las RAU (outdoor), 6600 reemplaza las AMM (indoor)." },
            { category: "radio", statement: "La modulación adaptativa cambia la QAM según la calidad de señal", answer: true, explanation: "Correcto. Alta señal = alta QAM, baja señal = baja QAM." },
            { category: "radio", statement: "RAU alta potencia tiene PTx máxima de 26 dBm", answer: false, explanation: "Falso. Alta potencia es ≤30 dBm, media potencia es ≤26 dBm." },
            { category: "radio", statement: "MMU4A soporta hasta 4096 QAM", answer: true, explanation: "Correcto. Con anchos de banda de 80 y 112 MHz." },
            { category: "radio", statement: "El criterio de Rayleigh determina si una superficie es lisa o rugosa", answer: true, explanation: "Correcto. Depende de λ, ángulo y rugosidad de la superficie." },
            { category: "radio", statement: "ITU define 10 zonas climáticas de lluvia", answer: false, explanation: "Falso. ITU define 16 zonas climáticas de lluvia." },
            { category: "radio", statement: "MIMO 2x2 puede duplicar la capacidad del radioenlace", answer: true, explanation: "Correcto. Multiplexación espacial con 2 antenas Tx y 2 Rx." },
            
            // IP Y REDES
            { category: "ip", statement: "El modelo OSI tiene 7 capas", answer: true, explanation: "Correcto. El modelo TCP/IP híbrido tiene 5 capas." },
            { category: "ip", statement: "Una dirección MAC tiene 32 bits", answer: false, explanation: "Falso. MAC tiene 48 bits (6 bytes)." },
            { category: "ip", statement: "La dirección MAC de broadcast es FF:FF:FF:FF:FF:FF", answer: true, explanation: "Correcto. Se envía a todos los dispositivos." },
            { category: "ip", statement: "Una red /24 tiene 256 hosts utilizables", answer: false, explanation: "Falso. Tiene 254 hosts (2^8 - 2, se resta red y broadcast)." },
            { category: "ip", statement: "TCP usa un 3-way handshake: SYN, SYN/ACK, ACK", answer: true, explanation: "Correcto. Así se establece la conexión TCP." },
            { category: "ip", statement: "El MTU de Ethernet es 1518 bytes", answer: false, explanation: "Falso. MTU es 1500 bytes. 1518 es el tamaño máximo de trama incluyendo headers." },
            { category: "ip", statement: "UDP es un protocolo orientado a conexión", answer: false, explanation: "Falso. UDP es sin conexión, no confiable pero rápido." },
            { category: "ip", statement: "El puerto HTTP es 80", answer: true, explanation: "Correcto. HTTPS usa puerto 443." },
            { category: "ip", statement: "DNS usa típicamente el puerto 53 UDP", answer: true, explanation: "Correcto. También puede usar TCP para transferencias grandes." },
            { category: "ip", statement: "Un Switch opera en capa 3 del modelo OSI", answer: false, explanation: "Falso. Switch opera en capa 2 (enlace). Router opera en capa 3." },
            { category: "ip", statement: "OSPF converge más rápido que RIP", answer: true, explanation: "Correcto. OSPF: 4-5 segundos, RIP: hasta 180 segundos." },
            { category: "ip", statement: "IPv6 tiene 64 bits", answer: false, explanation: "Falso. IPv6 tiene 128 bits." },
            { category: "ip", statement: "ARP convierte direcciones IP a direcciones MAC", answer: true, explanation: "Correcto. Usa broadcast para preguntar quién tiene la IP." },
            { category: "ip", statement: "DHCP asigna direcciones IP automáticamente", answer: true, explanation: "Correcto. También asigna gateway y DNS." },
            { category: "ip", statement: "El rango 192.168.0.0/16 es de direcciones IP privadas", answer: true, explanation: "Correcto. También 10.0.0.0/8 y 172.16.0.0/12." },
            { category: "ip", statement: "Un Hub opera en capa 2 del modelo OSI", answer: false, explanation: "Falso. Hub opera en capa 1 (física), repite señal a todos." },
            { category: "ip", statement: "Full Duplex permite enviar y recibir simultáneamente", answer: true, explanation: "Correcto. Half Duplex solo permite uno a la vez." },
            { category: "ip", statement: "Existen 13 servidores DNS root (A-M)", answer: true, explanation: "Correcto. Distribuidos por el mundo." },
            
            // FIBRA ÓPTICA
            { category: "fibra", statement: "La fibra monomodo es de color amarillo", answer: true, explanation: "Correcto. La multimodo es naranja." },
            { category: "fibra", statement: "El núcleo de fibra monomodo mide 50 μm", answer: false, explanation: "Falso. El núcleo SM mide 8-10 μm. 50 μm es multimodo." },
            { category: "fibra", statement: "La pérdida por empalme de fusión es ~0.1 dB", answer: true, explanation: "Correcto. Muy baja pérdida." },
            { category: "fibra", statement: "La pérdida por conector óptico es ~0.75 dB", answer: true, explanation: "Correcto. Conectores de alta calidad: 0.3-0.5 dB." },
            { category: "fibra", statement: "SFP significa Single Fiber Pluggable", answer: false, explanation: "Falso. SFP significa Small Form-Factor Pluggable." },
            { category: "fibra", statement: "LR (Long Reach) alcanza aproximadamente 10 km", answer: true, explanation: "Correcto. SR~300m, LR~10km, ER~40km, ZR~80km+." },
            { category: "fibra", statement: "La atenuación SM a 1550nm es mayor que a 1310nm", answer: false, explanation: "Falso. A 1550nm es ~0.22 dB/km, a 1310nm es ~0.35 dB/km." },
            { category: "fibra", statement: "QSFP significa Quad Small Form-Factor Pluggable", answer: true, explanation: "Correcto. 4 canales, usado para 40G/100G." },
            { category: "fibra", statement: "El recubrimiento primario de fibra mide 250 μm", answer: true, explanation: "Correcto. La protección ajustada (tight) mide 900 μm." },
            { category: "fibra", statement: "El gel en tubo holgado sirve como anticongelante", answer: true, explanation: "Correcto. Protege las fibras y no se escurre." },
            { category: "fibra", statement: "La fibra multimodo puede alcanzar hasta 80 km", answer: false, explanation: "Falso. Multimodo alcanza hasta 5 km (típico 300m-2km)." },
            { category: "fibra", statement: "El transceiver opera en capa 1 (física) del modelo OSI", answer: true, explanation: "Correcto. Realiza conversión fotoeléctrica." },
            { category: "fibra", statement: "Power Budget = Tx mínimo - Rx sensibilidad", answer: true, explanation: "Correcto. Indica el margen disponible para pérdidas." },
            { category: "fibra", statement: "El margen de seguridad recomendado en Power Budget es 1.7-3 dB", answer: true, explanation: "Correcto. Por envejecimiento y variabilidad." },
            
            // BERT Y RFC2544
            { category: "bert", statement: "BER significa Bit Error Rate", answer: true, explanation: "Correcto. Tasa de errores de bits." },
            { category: "bert", statement: "El BER estándar para telecomunicaciones es 10⁻⁶", answer: false, explanation: "Falso. El estándar es 10⁻⁹. Para datos críticos es 10⁻¹³." },
            { category: "bert", statement: "RFC 2544 fue publicado por IETF", answer: true, explanation: "Correcto. Internet Engineering Task Force, 1999." },
            { category: "bert", statement: "Los tamaños de trama RFC 2544 incluyen 64, 128, 256, 512, 1024, 1280, 1518 bytes", answer: true, explanation: "Correcto. 7 tamaños estándar de prueba." },
            { category: "bert", statement: "El jitter afecta principalmente a las transferencias de archivos", answer: false, explanation: "Falso. Afecta principalmente a voz y video en tiempo real." },
            { category: "bert", statement: "ITU-T Y.1564 reemplaza a RFC 2544 para escenarios multiservicio", answer: true, explanation: "Correcto. Modela mejor múltiples servicios simultáneos." },
            { category: "bert", statement: "El criterio de aceptación de throughput en RFC 2544 es ≥99%", answer: true, explanation: "Correcto. Del rate teórico." },
            { category: "bert", statement: "La latencia máxima aceptable a 1 Gbps es 10 ms", answer: false, explanation: "Falso. Es ≤1 ms a 1G, ≤300 μs a 10G." },
            { category: "bert", statement: "El criterio de frame loss es ≤0.01%", answer: true, explanation: "Correcto. Muy baja pérdida aceptable." },
            { category: "bert", statement: "PRBS significa Pseudo-Random Bit Sequence", answer: true, explanation: "Correcto. Secuencia Pseudo-Aleatoria de Bits para testing." },
            { category: "bert", statement: "CIR significa Committed Information Rate", answer: true, explanation: "Correcto. Tasa de información comprometida." },
            { category: "bert", statement: "PTP IEEE 1588 es un protocolo de sincronización precisa", answer: true, explanation: "Correcto. Precision Time Protocol." },
            { category: "bert", statement: "Back-to-Back en RFC 2544 mide la latencia", answer: false, explanation: "Falso. Mide la capacidad de procesar ráfagas sucesivas." },
            
            // ============ GPON Y FTTH ============
            { category: "fibra", statement: "GPON significa Gigabit Passive Optical Network", answer: true, explanation: "Correcto. Red Óptica Pasiva con capacidad de Gigabit." },
            { category: "fibra", statement: "En GPON, OLT está ubicado en el lado del usuario", answer: false, explanation: "Falso. OLT (Optical Line Terminal) está en la central. ONT/ONU está en el usuario." },
            { category: "fibra", statement: "El alcance máximo de GPON es 20 km", answer: true, explanation: "Correcto. Aunque el estándar permite hasta 60 km lógicos." },
            { category: "fibra", statement: "GPON usa WDM para separar tráfico ascendente y descendente", answer: true, explanation: "Correcto. Usa diferentes longitudes de onda para cada dirección." },
            { category: "fibra", statement: "En GPON descendente, cada ONT recibe solo su propio tráfico", answer: false, explanation: "Falso. Descendente es broadcast, cada ONT filtra y descifra solo sus datos." },
            { category: "fibra", statement: "El sentido ascendente en GPON usa TDMA", answer: true, explanation: "Correcto. La OLT asigna ventanas de tiempo a cada ONT." },
            { category: "fibra", statement: "El splitter óptico en GPON es un elemento activo", answer: false, explanation: "Falso. El splitter es PASIVO, no requiere alimentación eléctrica." },
            { category: "fibra", statement: "GPON puede soportar hasta 128 usuarios por fibra", answer: true, explanation: "Correcto. Típicamente 1:32 o 1:64, máximo 1:128." },
            { category: "fibra", statement: "La velocidad descendente típica de GPON es 2.488 Gbps", answer: true, explanation: "Correcto. Ascendente es típicamente 1.244 Gbps." },
            { category: "fibra", statement: "OMCI es el protocolo de gestión remota de ONTs en GPON", answer: true, explanation: "Correcto. ONT Management and Control Interface, definido en G.984.4." },
            { category: "fibra", statement: "GEM significa GPON Encapsulation Method", answer: true, explanation: "Correcto. Método de encapsulación usado en GPON." },
            { category: "fibra", statement: "XG-PON ofrece 10 Gbps simétricos", answer: false, explanation: "Falso. XG-PON es 10G down / 2.5G up. XGS-PON es simétrico 10G/10G." },
            { category: "fibra", statement: "MDU permite dar servicio GPON a múltiples usuarios en un edificio", answer: true, explanation: "Correcto. Multi Dwelling Unit, puede usar xDSL o Ethernet hacia usuarios." },
            { category: "fibra", statement: "La OLT debe conocer la distancia a cada ONT para sincronización", answer: true, explanation: "Correcto. Necesario para calcular retardos y evitar colisiones TDMA." },
            { category: "fibra", statement: "En GPON, la seguridad se implementa con cifrado AES", answer: true, explanation: "Correcto. Necesario por la naturaleza broadcast del downstream." },
            
            // ============ DWDM Y WDM ============
            { category: "fibra", statement: "DWDM significa Dense Wavelength Division Multiplexing", answer: true, explanation: "Correcto. Multiplexación densa por división de longitud de onda." },
            { category: "fibra", statement: "DWDM opera en la banda C (1550 nm)", answer: true, explanation: "Correcto. También puede usar banda L (hasta 1610 nm)." },
            { category: "fibra", statement: "CWDM puede alcanzar mayores distancias que DWDM", answer: false, explanation: "Falso. DWDM con amplificadores EDFA alcanza miles de km. CWDM típicamente 50-80 km." },
            { category: "fibra", statement: "DWDM puede combinar hasta 160 longitudes de onda en una fibra", answer: true, explanation: "Correcto. Con espaciado de 25 GHz." },
            { category: "fibra", statement: "El espaciado estándar de canales DWDM es 100 GHz", answer: true, explanation: "Correcto. También 50 GHz para más canales." },
            { category: "fibra", statement: "EDFA significa Erbium Doped Fiber Amplifier", answer: true, explanation: "Correcto. Amplificador de fibra dopada con erbio." },
            { category: "fibra", statement: "CWDM usa láseres de menor precisión que DWDM", answer: true, explanation: "Correcto. CWDM permite mayor deriva de longitud de onda, reduciendo costos." },
            { category: "fibra", statement: "En DWDM, cada canal óptico puede transportar diferente tipo de tráfico", answer: true, explanation: "Correcto. Son canales independientes." },
            
            // ============ MPLS ============
            { category: "ip", statement: "MPLS significa Multiprotocol Label Switching", answer: true, explanation: "Correcto. Conmutación de etiquetas multiprotocolo." },
            { category: "ip", statement: "MPLS opera entre capa 2 y capa 3 del modelo OSI", answer: true, explanation: "Correcto. A veces llamada capa 2.5." },
            { category: "ip", statement: "La etiqueta MPLS tiene 32 bits en total", answer: true, explanation: "Correcto. 20 bits label + 3 bits Exp + 1 bit S + 8 bits TTL." },
            { category: "ip", statement: "LER significa Label Edge Router", answer: true, explanation: "Correcto. Router de borde que inserta/extrae etiquetas MPLS." },
            { category: "ip", statement: "LSP es un camino unidireccional en MPLS", answer: true, explanation: "Correcto. Label Switched Path es unidireccional." },
            { category: "ip", statement: "LDP distribuye etiquetas MPLS entre routers", answer: true, explanation: "Correcto. Label Distribution Protocol." },
            { category: "ip", statement: "En MPLS, el router examina la cabecera IP para reenviar paquetes", answer: false, explanation: "Falso. Solo examina la etiqueta MPLS, más eficiente." },
            { category: "ip", statement: "MPLS soporta Calidad de Servicio (QoS)", answer: true, explanation: "Correcto. Los 3 bits Exp se usan para QoS/CoS." },
            { category: "ip", statement: "PHP significa Penultimate Hop Popping", answer: true, explanation: "Correcto. El penúltimo router remueve la etiqueta para aliviar al último." },
            { category: "ip", statement: "FEC agrupa paquetes con el mismo tratamiento de forwarding", answer: true, explanation: "Correcto. Forwarding Equivalence Class." },
            { category: "ip", statement: "MPLS puede transportar solo tráfico IP", answer: false, explanation: "Falso. Es multiprotocolo: IP, ATM, Frame Relay, Ethernet, etc." },
            { category: "ip", statement: "Las operaciones básicas MPLS son PUSH, POP y SWAP", answer: true, explanation: "Correcto. Apilar, desapilar e intercambiar etiquetas." },
            { category: "ip", statement: "Router PE significa Provider Edge en contexto VPN/MPLS", answer: true, explanation: "Correcto. Router P es Provider (tránsito interno)." },
            
            // ============ PROTOCOLOS DE ROUTING ============
            { category: "ip", statement: "BGP es el protocolo de routing usado en Internet", answer: true, explanation: "Correcto. Border Gateway Protocol, protocolo EGP." },
            { category: "ip", statement: "OSPF es un protocolo de estado de enlace", answer: true, explanation: "Correcto. Link-state, usa algoritmo SPF (Dijkstra)." },
            { category: "ip", statement: "RIP tiene un límite de 15 saltos", answer: true, explanation: "Correcto. 16 significa inalcanzable." },
            { category: "ip", statement: "OSPF usa el puerto UDP 520", answer: false, explanation: "Falso. OSPF usa IP directamente (protocolo 89). RIP usa UDP 520." },
            { category: "ip", statement: "IS-IS es un protocolo IGP usado por grandes ISPs", answer: true, explanation: "Correcto. Intermediate System to Intermediate System." },
            { category: "ip", statement: "El área 0 en OSPF es el backbone", answer: true, explanation: "Correcto. Todas las demás áreas deben conectar al área 0." },
            { category: "ip", statement: "BGP usa TCP puerto 179", answer: true, explanation: "Correcto. Conexiones TCP confiables entre peers." },
            { category: "ip", statement: "EIGRP es un protocolo estándar abierto", answer: false, explanation: "Falso. EIGRP es propietario de Cisco (aunque liberó parte en 2013)." },
            
            // ============ SDH/SONET ============
            { category: "fibra", statement: "SDH significa Synchronous Digital Hierarchy", answer: true, explanation: "Correcto. SONET es el equivalente americano." },
            { category: "fibra", statement: "STM-1 tiene una velocidad de 155.52 Mbps", answer: true, explanation: "Correcto. STM-4=622M, STM-16=2.5G, STM-64=10G." },
            { category: "fibra", statement: "SDH usa multiplexación asíncrona", answer: false, explanation: "Falso. SDH es SINCRÓNICO, todos los nodos tienen la misma referencia de reloj." },
            { category: "fibra", statement: "La trama SDH tiene duración de 125 μs", answer: true, explanation: "Correcto. Equivale a 8000 tramas por segundo." },
            { category: "fibra", statement: "SDH permite extraer/insertar tributarios sin demultiplexar toda la señal", answer: true, explanation: "Correcto. Esto es Add-Drop Multiplexing (ADM)." },
            
            // ============ ETHERNET Y SWITCHING ============
            { category: "ip", statement: "Ethernet Gigabit usa el estándar IEEE 802.3ab para UTP", answer: true, explanation: "Correcto. 1000BASE-T sobre Cat5e/Cat6." },
            { category: "ip", statement: "Un switch crea un dominio de colisión por puerto", answer: true, explanation: "Correcto. Cada puerto es un dominio de colisión separado." },
            { category: "ip", statement: "STP previene loops en redes con switches", answer: true, explanation: "Correcto. Spanning Tree Protocol (IEEE 802.1D)." },
            { category: "ip", statement: "RSTP converge más lento que STP", answer: false, explanation: "Falso. RSTP (Rapid STP) converge en segundos vs. 30-50s de STP." },
            { category: "ip", statement: "Una VLAN segmenta dominios de broadcast", answer: true, explanation: "Correcto. Cada VLAN es un dominio de broadcast separado." },
            { category: "ip", statement: "802.1Q es el estándar para trunk VLAN", answer: true, explanation: "Correcto. Agrega tag de 4 bytes a la trama Ethernet." },
            { category: "ip", statement: "El campo VLAN ID tiene 12 bits, permitiendo 4096 VLANs", answer: true, explanation: "Correcto. VLAN 0 y 4095 están reservadas." },
            { category: "ip", statement: "LACP permite agregar múltiples enlaces físicos", answer: true, explanation: "Correcto. Link Aggregation Control Protocol (802.3ad)." },
            
            // ============ QoS Y TRÁFICO ============
            { category: "ip", statement: "DiffServ usa 6 bits del campo DSCP para marcar prioridad", answer: true, explanation: "Correcto. Differentiated Services Code Point." },
            { category: "ip", statement: "El campo ToS en IPv4 tiene 8 bits", answer: true, explanation: "Correcto. Type of Service, redefinido como DSCP + ECN." },
            { category: "ip", statement: "EF (Expedited Forwarding) es para tráfico best-effort", answer: false, explanation: "Falso. EF es para tráfico de baja latencia/jitter como VoIP." },
            { category: "ip", statement: "Traffic shaping suaviza ráfagas de tráfico", answer: true, explanation: "Correcto. Regula el tráfico para evitar congestión." },
            { category: "ip", statement: "Policing puede descartar tráfico que excede el límite", answer: true, explanation: "Correcto. A diferencia de shaping que retarda/encola." },
            
            // ============ SEGURIDAD DE RED ============
            { category: "ip", statement: "Un firewall puede operar en capa 3 y capa 4", answer: true, explanation: "Correcto. Filtrado por IP y puertos TCP/UDP." },
            { category: "ip", statement: "IPsec puede operar en modo túnel y modo transporte", answer: true, explanation: "Correcto. Túnel encripta todo, transporte solo payload." },
            { category: "ip", statement: "SSH usa puerto 23", answer: false, explanation: "Falso. SSH usa puerto 22. Telnet usa puerto 23." },
            { category: "ip", statement: "HTTPS usa TLS/SSL para encriptación", answer: true, explanation: "Correcto. Puerto 443." },
            { category: "ip", statement: "SNMPv3 incluye autenticación y encriptación", answer: true, explanation: "Correcto. A diferencia de v1 y v2c que usan community strings en texto plano." },
            
            // ============ SINCRONIZACIÓN Y TIMING ============
            { category: "bert", statement: "SyncE sincroniza la frecuencia de red Ethernet", answer: true, explanation: "Correcto. Synchronous Ethernet, derivado de SDH." },
            { category: "bert", statement: "PTP puede lograr precisión de nanosegundos", answer: true, explanation: "Correcto. Precision Time Protocol IEEE 1588." },
            { category: "bert", statement: "NTP es más preciso que PTP", answer: false, explanation: "Falso. NTP logra milisegundos, PTP puede lograr nanosegundos." },
            { category: "bert", statement: "GPS se usa como referencia de timing en telecomunicaciones", answer: true, explanation: "Correcto. Proporciona stratum 1 de sincronización." },
            
            // ============ TELEFONÍA Y VOZ ============
            { category: "ip", statement: "VoIP significa Voice over Internet Protocol", answer: true, explanation: "Correcto. Voz sobre protocolo IP." },
            { category: "ip", statement: "SIP usa puerto 5060 por defecto", answer: true, explanation: "Correcto. Session Initiation Protocol." },
            { category: "ip", statement: "RTP transporta el audio en llamadas VoIP", answer: true, explanation: "Correcto. Real-time Transport Protocol." },
            { category: "ip", statement: "El códec G.711 tiene alta compresión", answer: false, explanation: "Falso. G.711 no comprime (64 kbps). G.729 comprime a 8 kbps." },
            { category: "ip", statement: "El jitter buffer compensa variaciones de latencia", answer: true, explanation: "Correcto. Almacena paquetes para reproducción uniforme." },
            
            // ============ CABLEADO ESTRUCTURADO ============
            { category: "fibra", statement: "Cat6 soporta 10 Gigabit hasta 55 metros", answer: true, explanation: "Correcto. Cat6a soporta 10G hasta 100m." },
            { category: "fibra", statement: "Cat5e soporta Gigabit Ethernet", answer: true, explanation: "Correcto. 1000BASE-T hasta 100m." },
            { category: "fibra", statement: "El cable UTP tiene blindaje metálico", answer: false, explanation: "Falso. UTP = Unshielded Twisted Pair. STP/FTP tienen blindaje." },
            { category: "fibra", statement: "PoE puede entregar hasta 100W en 802.3bt", answer: true, explanation: "Correcto. PoE++ (Type 4) entrega hasta 100W." },
            
            // ============ REDES MÓVILES ============
            { category: "radio", statement: "LTE usa OFDMA en downlink", answer: true, explanation: "Correcto. Y SC-FDMA en uplink." },
            { category: "radio", statement: "5G NR puede operar en bandas mmWave", answer: true, explanation: "Correcto. Ondas milimétricas (24-100 GHz)." },
            { category: "radio", statement: "eNodeB es el nombre de la estación base en LTE", answer: true, explanation: "Correcto. En 5G se llama gNodeB." },
            { category: "radio", statement: "El handover permite cambiar de celda sin cortar la llamada", answer: true, explanation: "Correcto. Transferencia entre celdas." },
            { category: "radio", statement: "Massive MIMO usa decenas o cientos de antenas", answer: true, explanation: "Correcto. Típicamente 64, 128 o más antenas." },
            
            // ============ HERRAMIENTAS Y MEDICIÓN ============
            { category: "bert", statement: "Un OTDR mide pérdidas y localiza fallas en fibra", answer: true, explanation: "Correcto. Optical Time Domain Reflectometer." },
            { category: "bert", statement: "El power meter mide potencia óptica en dBm", answer: true, explanation: "Correcto. Mide potencia absoluta de luz." },
            { category: "bert", statement: "Un analizador de espectro óptico (OSA) ve canales DWDM", answer: true, explanation: "Correcto. Muestra potencia vs longitud de onda." },
            { category: "bert", statement: "Wireshark captura y analiza tráfico de red", answer: true, explanation: "Correcto. Analizador de protocolos." },
            { category: "bert", statement: "Ping usa el protocolo ICMP", answer: true, explanation: "Correcto. Internet Control Message Protocol." },
            { category: "bert", statement: "Traceroute muestra la ruta de paquetes a un destino", answer: true, explanation: "Correcto. Usa TTL incremental para descubrir saltos." },
            
            // ============ GPON Y FTTH (NUEVAS) ============
            { category: "fibra", statement: "En GPON la velocidad downstream es 2.488 Gbps", answer: true, explanation: "Correcto. Upstream es 1.244 Gbps." },
            { category: "fibra", statement: "El splitter 1:32 tiene una pérdida de 17 dB", answer: true, explanation: "Correcto. 1:64 tiene ~20 dB de pérdida." },
            { category: "fibra", statement: "En GPON el tráfico downstream usa multicast real", answer: false, explanation: "Falso. Es broadcast, todas las ONTs reciben todo pero filtran/descifran solo sus datos." },
            { category: "fibra", statement: "La longitud de onda downstream en GPON es 1490 nm", answer: true, explanation: "Correcto. Upstream usa 1310 nm." },
            { category: "fibra", statement: "El alcance máximo lógico de GPON es 60 km", answer: true, explanation: "Correcto. Aunque físicamente se recomienda máximo 20 km." },
            { category: "fibra", statement: "El splitter óptico requiere alimentación eléctrica", answer: false, explanation: "Falso. El splitter es PASIVO, no requiere energía." },
            { category: "fibra", statement: "GPON Clase B+ tiene power budget de 28 dB", answer: true, explanation: "Correcto. Clase C+ tiene 32 dB." },
            { category: "fibra", statement: "OMCI gestiona las ONT de forma remota desde la OLT", answer: true, explanation: "Correcto. ONT Management and Control Interface, ITU G.984.4." },
            { category: "fibra", statement: "El número de serie de ONT tiene 4 bytes", answer: false, explanation: "Falso. Tiene 8 bytes (64 bits): 4 fabricante + 4 ONT." },
            { category: "fibra", statement: "XGS-PON es simétrico 10G/10G", answer: true, explanation: "Correcto. A diferencia de XG-PON que es asimétrico 10G/2.5G." },
            { category: "fibra", statement: "El protocolo PLOAM se usa para ranging y activación", answer: true, explanation: "Correcto. Physical Layer OAM." },
            { category: "fibra", statement: "En GPON upstream cada ONT transmite cuando quiere", answer: false, explanation: "Falso. Usa TDMA, la OLT asigna ventanas de tiempo a cada ONT." },
            { category: "fibra", statement: "GEM permite encapsular tráfico Ethernet y TDM", answer: true, explanation: "Correcto. GPON Encapsulation Method es multiservicio." },
            { category: "fibra", statement: "El conector más usado en GPON es SC/APC", answer: true, explanation: "Correcto. El color verde indica APC (Angled Physical Contact)." },
            { category: "fibra", statement: "Un splitter 1:8 tiene pérdida aproximada de 10.5 dB", answer: true, explanation: "Correcto. Cada división por 2 agrega ~3.5 dB." },
            { category: "fibra", statement: "MDU se instala en la central telefónica", answer: false, explanation: "Falso. MDU se instala en edificios para dar servicio a múltiples usuarios." },
            { category: "fibra", statement: "NG-PON2 usa TWDM para alcanzar 40 Gbps", answer: true, explanation: "Correcto. Time and Wavelength Division Multiplexing, 4 canales x 10G." },
            { category: "fibra", statement: "La atenuación de fibra a 1310nm es menor que a 1550nm", answer: false, explanation: "Falso. 1310nm ~0.35 dB/km, 1550nm ~0.22 dB/km (menor)." },
            
            // ============ METRO ETHERNET (NUEVAS) ============
            { category: "ip", statement: "E-Line es un servicio Ethernet punto a punto", answer: true, explanation: "Correcto. Equivalente a una línea dedicada." },
            { category: "ip", statement: "E-LAN es un servicio multipunto a multipunto", answer: true, explanation: "Correcto. Todos los sitios pueden comunicarse entre sí." },
            { category: "ip", statement: "E-Tree es un servicio donde las hojas pueden comunicarse entre sí", answer: false, explanation: "Falso. En E-Tree las hojas solo se comunican con la raíz, no entre ellas." },
            { category: "ip", statement: "MEF significa Metro Ethernet Forum", answer: true, explanation: "Correcto. Define estándares para servicios Carrier Ethernet." },
            { category: "ip", statement: "CIR garantiza un ancho de banda mínimo", answer: true, explanation: "Correcto. Committed Information Rate es la tasa garantizada." },
            { category: "ip", statement: "EIR es la tasa de información que siempre se entrega", answer: false, explanation: "Falso. EIR (Excess) es tráfico adicional que se entrega si hay capacidad disponible." },
            { category: "ip", statement: "Un EVC es un circuito virtual Ethernet", answer: true, explanation: "Correcto. Ethernet Virtual Connection, conexión entre UNIs." },
            { category: "ip", statement: "UNI es la interfaz entre cliente y proveedor", answer: true, explanation: "Correcto. User Network Interface." },
            { category: "ip", statement: "NNI conecta dos redes de diferentes proveedores", answer: true, explanation: "Correcto. Network to Network Interface." },
            { category: "ip", statement: "Carrier Ethernet requiere switches de capa 2 solamente", answer: false, explanation: "Falso. Puede involucrar equipos de capa 2 y 3, incluyendo MPLS." },
            
            // ============ IPv6 (NUEVAS) ============
            { category: "ip", statement: "IPv6 tiene direcciones de 128 bits", answer: true, explanation: "Correcto. Comparado con 32 bits de IPv4." },
            { category: "ip", statement: "Una dirección IPv6 link-local comienza con FE80::", answer: true, explanation: "Correcto. Válida solo en el enlace local." },
            { category: "ip", statement: "IPv6 usa ARP para resolver direcciones", answer: false, explanation: "Falso. IPv6 usa NDP (Neighbor Discovery Protocol) con ICMPv6." },
            { category: "ip", statement: "La cabecera IPv6 es más simple que la de IPv4", answer: true, explanation: "Correcto. Tiene menos campos, extensiones van en headers opcionales." },
            { category: "ip", statement: "IPv6 Global Unicast comienza con 2000::/3", answer: true, explanation: "Correcto. Direcciones públicas rutables globalmente." },
            { category: "ip", statement: "El campo TTL en IPv6 se llama Hop Limit", answer: true, explanation: "Correcto. Mismo propósito, diferente nombre." },
            { category: "ip", statement: "IPv6 requiere NAT para funcionar en Internet", answer: false, explanation: "Falso. IPv6 tiene suficientes direcciones, NAT no es necesario." },
            { category: "ip", statement: "Dual-stack permite ejecutar IPv4 e IPv6 simultáneamente", answer: true, explanation: "Correcto. El dispositivo tiene ambos stacks de protocolo." },
            { category: "ip", statement: "El prefijo /64 es estándar para subredes IPv6", answer: true, explanation: "Correcto. 64 bits red + 64 bits interfaz." },
            { category: "ip", statement: "ICMPv6 es opcional en IPv6", answer: false, explanation: "Falso. ICMPv6 es obligatorio, necesario para NDP y funciones básicas." },
            
            // ============ SEGURIDAD AVANZADA (NUEVAS) ============
            { category: "ip", statement: "802.1X proporciona autenticación de acceso a puertos", answer: true, explanation: "Correcto. Port-based Network Access Control." },
            { category: "ip", statement: "RADIUS es un protocolo de autenticación centralizada", answer: true, explanation: "Correcto. Remote Authentication Dial-In User Service." },
            { category: "ip", statement: "Una ACL estándar filtra solo por IP origen", answer: true, explanation: "Correcto. ACL extendida filtra por origen, destino, puerto, protocolo." },
            { category: "ip", statement: "MACsec encripta tráfico en capa 2", answer: true, explanation: "Correcto. IEEE 802.1AE, seguridad a nivel de enlace." },
            { category: "ip", statement: "Port Security limita MACs permitidas en un puerto", answer: true, explanation: "Correcto. Previene MAC flooding attacks." },
            { category: "ip", statement: "DHCP Snooping previene servidores DHCP no autorizados", answer: true, explanation: "Correcto. Filtra mensajes DHCP maliciosos." },
            { category: "ip", statement: "Dynamic ARP Inspection previene ARP spoofing", answer: true, explanation: "Correcto. Valida paquetes ARP contra tabla DHCP Snooping." },
            { category: "ip", statement: "Un IPS solo detecta pero no bloquea ataques", answer: false, explanation: "Falso. IPS (Intrusion Prevention) bloquea. IDS solo detecta." },
            { category: "ip", statement: "VPN SSL opera típicamente en puerto 443", answer: true, explanation: "Correcto. Usa HTTPS, fácil de pasar firewalls." },
            
            // ============ SNMP Y GESTIÓN (NUEVAS) ============
            { category: "bert", statement: "SNMP significa Simple Network Management Protocol", answer: true, explanation: "Correcto. Protocolo para gestión de dispositivos de red." },
            { category: "bert", statement: "Un OID identifica una variable en la MIB", answer: true, explanation: "Correcto. Object Identifier, estructura jerárquica tipo árbol." },
            { category: "bert", statement: "Las traps SNMP son enviadas del manager al agente", answer: false, explanation: "Falso. Las traps van del agente al manager (notificaciones asíncronas)." },
            { category: "bert", statement: "SNMPv1 y v2c usan community strings en texto plano", answer: true, explanation: "Correcto. Por eso SNMPv3 es recomendado para seguridad." },
            { category: "bert", statement: "GET solicita información del agente SNMP", answer: true, explanation: "Correcto. GET, GET-NEXT, GET-BULK para consultar." },
            { category: "bert", statement: "SET modifica configuración en el agente SNMP", answer: true, explanation: "Correcto. Permite escritura de variables." },
            { category: "bert", statement: "La MIB es la base de datos de objetos gestionables", answer: true, explanation: "Correcto. Management Information Base." },
            { category: "bert", statement: "Syslog usa puerto UDP 514 por defecto", answer: true, explanation: "Correcto. Para envío de mensajes de log." },
            { category: "bert", statement: "SNMP usa puerto UDP 161 para consultas", answer: true, explanation: "Correcto. Puerto 162 para traps." },
            { category: "bert", statement: "NetFlow captura cabeceras de flujos de tráfico", answer: true, explanation: "Correcto. Para análisis y facturación, desarrollado por Cisco." },
            
            // ============ TRANSCEPTORES ÓPTICOS (NUEVAS) ============
            { category: "fibra", statement: "Un transceiver realiza conversión fotoeléctrica", answer: true, explanation: "Correcto. Convierte señales eléctricas a ópticas y viceversa." },
            { category: "fibra", statement: "Los transceptores operan en la capa 2 del modelo OSI", answer: false, explanation: "Falso. Operan en la capa 1 (física)." },
            { category: "fibra", statement: "SFP+ soporta velocidades de hasta 10 Gbps", answer: true, explanation: "Correcto. SFP = 1G, SFP+ = 10G, SFP28 = 25G." },
            { category: "fibra", statement: "QSFP28 significa Quad SFP y soporta 100G", answer: true, explanation: "Correcto. 4 canales de 25G = 100G." },
            { category: "fibra", statement: "Un transceiver SR tiene mayor alcance que LR", answer: false, explanation: "Falso. SR (Short) ~300m, LR (Long) ~10km." },
            { category: "fibra", statement: "El conector LC es más pequeño que el SC", answer: true, explanation: "Correcto. LC = Lucent Connector, más compacto." },
            { category: "fibra", statement: "La EEPROM del transceiver almacena información del fabricante", answer: true, explanation: "Correcto. También modelo, número de serie y parámetros." },
            { category: "fibra", statement: "El Power Budget se calcula como Tx mínimo menos Rx sensibilidad", answer: true, explanation: "Correcto. El resultado indica el margen disponible para pérdidas." },
            { category: "fibra", statement: "La pérdida típica por conector es de 0.75 dB según TIA", answer: true, explanation: "Correcto. Estándar TIA, los empalmes son ~0.1 dB." },
            { category: "fibra", statement: "La atenuación típica de fibra varía entre 0.22 y 0.5 dB/km", answer: true, explanation: "Correcto. Depende de la longitud de onda y tipo de fibra." },
            { category: "fibra", statement: "El margen de seguridad recomendado es de 10 dB", answer: false, explanation: "Falso. Se recomienda 1.7 a 3 dB de margen de seguridad." },
            { category: "fibra", statement: "Si las pérdidas superan el Power Budget, el enlace fallará", answer: true, explanation: "Correcto. El receptor no recibirá suficiente potencia." },
            { category: "fibra", statement: "Los transceptores ZR pueden alcanzar 80 km o más", answer: true, explanation: "Correcto. ZR = alcance muy extendido." },
            { category: "fibra", statement: "La fibra multimodo típicamente alcanza hasta 5 km", answer: true, explanation: "Correcto. Típico 300m-2km, máximo ~5km." },
            
            // ============ RFC 2544 DETALLADO (NUEVAS) ============
            { category: "bert", statement: "RFC 2544 fue diseñada originalmente para pruebas de laboratorio", answer: true, explanation: "Correcto. IETF 1999, luego adaptada a trabajo de campo." },
            { category: "bert", statement: "Los tamaños de trama estándar en RFC 2544 incluyen 64 y 1518 bytes", answer: true, explanation: "Correcto. También 128, 256, 512, 1024, 1280 bytes." },
            { category: "bert", statement: "La prueba Back-to-Back evalúa la capacidad para procesar ráfagas", answer: true, explanation: "Correcto. Sin pérdida entre ráfagas sucesivas." },
            { category: "bert", statement: "Y.1564 es mejor que RFC 2544 para escenarios multiservicio", answer: true, explanation: "Correcto. Y.1564 valida CIR/EIR por flujo con SLAs." },
            { category: "bert", statement: "La prueba de Throughput determina la tasa máxima sin pérdida", answer: true, explanation: "Correcto. Se usa búsqueda binaria para encontrar el punto." },
            { category: "bert", statement: "System Reset mide el tiempo de recuperación tras reinicio", answer: true, explanation: "Correcto. Incluye estabilidad del plano de control." },
            { category: "bert", statement: "Jumbo Frames de 9000 bytes son parte del estándar RFC 2544", answer: false, explanation: "Falso. 9000 bytes es opcional, no está en el estándar original." },
            { category: "bert", statement: "El criterio de aceptación típico de throughput es ≥99%", answer: true, explanation: "Correcto. 99% del line rate sin pérdida." },
            { category: "bert", statement: "La pérdida de tramas aceptable es típicamente ≤0.01%", answer: true, explanation: "Correcto. Hasta 90% de carga." },
            { category: "bert", statement: "La latencia típica máxima a 10G es ≤300 μs", answer: true, explanation: "Correcto. A 1G es ≤1 ms." },
            
            // ============ EQUIPOS ERICSSON MINILINK (NUEVAS) ============
            { category: "radio", statement: "Los equipos TN tienen configuración split con RAU y AMM", answer: true, explanation: "Correcto. RAU exterior + AMM interior conectados por cable." },
            { category: "radio", statement: "La familia 6300 son equipos outdoor (RAU)", answer: true, explanation: "Correcto. 6300 = outdoor, 6600 = indoor." },
            { category: "radio", statement: "XPIC significa Cross-Polar Interference Canceller", answer: true, explanation: "Correcto. Minimiza interferencia entre polarizaciones H y V." },
            { category: "radio", statement: "La configuración CCDP requiere XPIC", answer: true, explanation: "Correcto. Co-Channel Dual Polarized usa el mismo canal con H y V." },
            { category: "radio", statement: "ACCP significa canales adyacentes con polarizaciones alternadas", answer: false, explanation: "Falso. ACCP = Adjacent Channel Co-Polarization (misma polarización)." },
            { category: "radio", statement: "La modulación adaptativa cambia QAM según condiciones de señal", answer: true, explanation: "Correcto. Sube a alta QAM con buena señal, baja con mala señal." },
            { category: "radio", statement: "Las placas MMU4A soportan hasta 4096 QAM", answer: true, explanation: "Correcto. Con anchos de banda hasta 112 MHz." },
            { category: "radio", statement: "La diversidad de espacio usa dos antenas receptoras", answer: true, explanation: "Correcto. Una Tx, dos Rx para combatir multipath." },
            { category: "radio", statement: "Las RAU 6365 soportan bandas de 6 a 42 GHz", answer: true, explanation: "Correcto. Cubren todo el rango de frecuencias." },
            { category: "radio", statement: "Multi-band booster combina dos radioenlaces en diferentes bandas", answer: true, explanation: "Correcto. Tráfico prioritario en banda baja, el resto en alta." },
            { category: "radio", statement: "MIMO 2x2 puede duplicar la capacidad del radioenlace", answer: true, explanation: "Correcto. Mediante multiplexación espacial." },
            { category: "radio", statement: "La banda de 7 GHz usa canalizaciones de 28 MHz y 56 MHz", answer: true, explanation: "Correcto. Según ITU-R F.385." },
            { category: "radio", statement: "Las RAU de alta potencia tienen PTx ≤ 30 dBm", answer: true, explanation: "Correcto. Media potencia tiene ≤ 26 dBm." },
            { category: "radio", statement: "Radio Link Bonding permite transportar tráfico sobre múltiples enlaces", answer: true, explanation: "Correcto. Aumenta capacidad agregando Packet Links." },
            
            // ============ PROPAGACIÓN DETALLADA (NUEVAS) ============
            { category: "radio", statement: "El gradiente de refractividad típico es -40 N/km", answer: true, explanation: "Correcto. En el primer kilómetro sobre el suelo." },
            { category: "radio", statement: "El radio efectivo de la Tierra con k=4/3 es ~8500 km", answer: true, explanation: "Correcto. El radio real es ~6400 km." },
            { category: "radio", statement: "El criterio de Rayleigh determina si una superficie es lisa o rugosa", answer: true, explanation: "Correcto. Basado en diferencia de fase entre rayos." },
            { category: "radio", statement: "Cuando el coeficiente de reflexión ρ=1, hay reflexión especular perfecta", answer: true, explanation: "Correcto. ρ=0 significa sin reflexión." },
            { category: "radio", statement: "El multipath fading domina a frecuencias menores de 10 GHz", answer: true, explanation: "Correcto. Por encima de 10 GHz domina la lluvia." },
            { category: "radio", statement: "G.821 define SES como un segundo con BER peor que 10⁻³", answer: true, explanation: "Correcto. Severely Errored Second." },
            { category: "radio", statement: "La diversidad de frecuencia transmite la misma señal en dos frecuencias", answer: true, explanation: "Correcto. Las diferentes frecuencias desvanecen con poca correlación." },
            { category: "radio", statement: "El Link Budget incluye pérdidas ABF, Ao, AG y AL", answer: true, explanation: "Correcto. Free space, obstáculo, gases y reflexión." },
            { category: "radio", statement: "La fórmula de Fresnel es rF = 17.3√(d₁×d₂)/(f×d)", answer: true, explanation: "Correcto. Con d en km y f en GHz, resultado en metros." },
            { category: "radio", statement: "UAT significa Unavailable Time", answer: true, explanation: "Correcto. Tiempo de indisponibilidad según ITU." },
            { category: "radio", statement: "Los radioenlaces sobre agua requieren diversidad de espacio", answer: true, explanation: "Correcto. Por reflexiones y condiciones atmosféricas." },
            
            // ============ FIBRA ÓPTICA DETALLADA (NUEVAS) ============
            { category: "fibra", statement: "El recubrimiento primario de la fibra es de 250 μm", answer: true, explanation: "Correcto. Buffer primario, protección ajustada es 900 μm." },
            { category: "fibra", statement: "El gel en estructura holgada es anticongelante", answer: true, explanation: "Correcto. Protege las fibras dentro del tubo." },
            { category: "fibra", statement: "El núcleo de fibra monomodo es de 8-10 μm", answer: true, explanation: "Correcto. Mucho menor que multimodo (50 o 62.5 μm)." },
            { category: "fibra", statement: "La cubierta amarilla indica fibra multimodo", answer: false, explanation: "Falso. Amarillo/Azul = Monomodo, Naranja = Multimodo." },
            { category: "fibra", statement: "Un cable de exterior típico tiene de 8 a 36 fibras", answer: true, explanation: "Correcto. En tubos holgados con gel." },
            { category: "fibra", statement: "El Kevlar en los cables protege contra tracción mecánica", answer: true, explanation: "Correcto. Fibra aramida de alta resistencia." },
            { category: "fibra", statement: "La pérdida por empalme de fusión es típicamente 0.1 dB", answer: true, explanation: "Correcto. Los conectores son ~0.5-0.75 dB." }
        ];
        
        // ============ EXAMEN COMPLETO 20 PREGUNTAS CON EJEMPLOS ============
        const examQuestionsDB = [
            // RADIO Y PROPAGACIÓN
            { 
                q: "Un radioenlace opera a 18 GHz. ¿Cuál es su longitud de onda aproximada?",
                ejemplo: "Usando λ = 30/f donde f está en GHz",
                o: ["0.6 cm", "1.67 cm", "3 cm", "5 cm"], 
                a: 1, 
                e: "λ = 30/18 = 1.67 cm. A mayor frecuencia, menor longitud de onda."
            },
            { 
                q: "Tienes un enlace de 10 km a 15 GHz. Para calcular la zona de Fresnel en el punto medio, ¿qué valor usarías para d₁ y d₂?",
                ejemplo: "El punto medio divide el enlace en dos partes iguales",
                o: ["d₁=10km, d₂=10km", "d₁=5km, d₂=5km", "d₁=7.5km, d₂=2.5km", "d₁=15km, d₂=15km"], 
                a: 1, 
                e: "En el punto medio: d₁ = d₂ = 5 km (mitad de la distancia total)"
            },
            { 
                q: "Un enlace tiene un obstáculo que bloquea el 50% de la primera zona de Fresnel. ¿Es aceptable?",
                ejemplo: "El despejamiento mínimo requerido es 60%",
                o: ["Sí, es suficiente", "No, se requiere 60% despejado", "Depende de la frecuencia", "Solo si llueve"], 
                a: 1, 
                e: "Se requiere mínimo 60% de despejamiento. Con 50% bloqueado (50% libre), NO es aceptable."
            },
            { 
                q: "Estás diseñando un enlace a 23 GHz. ¿Qué tipo de atenuación adicional debes considerar especialmente?",
                ejemplo: "El H₂O tiene un pico de absorción a ~23 GHz",
                o: ["Solo lluvia", "Absorción por vapor de agua", "Absorción por oxígeno", "Ninguna adicional"], 
                a: 1, 
                e: "A 23 GHz hay un pico de absorción por vapor de agua (H₂O)."
            },
            { 
                q: "Tienes dos RAUs disponibles: una con ACCP y otra con CCDP. ¿Cuál duplica la capacidad?",
                ejemplo: "CCDP usa ambas polarizaciones en el mismo canal",
                o: ["ACCP", "CCDP", "Ambas igual", "Ninguna duplica"], 
                a: 1, 
                e: "CCDP (Co-Channel Dual Polarized) usa V+H simultánea, duplicando capacidad. Requiere XPIC."
            },
            
            // TCP/IP Y REDES
            { 
                q: "Una empresa tiene la red 192.168.10.0/24. ¿Cuántos hosts puede conectar?",
                ejemplo: "Fórmula: Hosts = 2^n - 2, donde n = bits de host",
                o: ["252", "254", "256", "510"], 
                a: 1, 
                e: "/24 = 8 bits de host → 2^8 - 2 = 254 hosts (se resta red y broadcast)"
            },
            { 
                q: "Un switch recibe una trama con destino MAC desconocido. ¿Qué hace?",
                ejemplo: "El switch opera en capa 2 usando direcciones MAC",
                o: ["La descarta", "La envía al router", "Flooding a todos los puertos", "La almacena"], 
                a: 2, 
                e: "Si no conoce la MAC destino, hace flooding (envía por todos los puertos excepto el origen)."
            },
            { 
                q: "Un host quiere comunicarse con 10.0.0.50 pero solo conoce la IP, no la MAC. ¿Qué protocolo usa?",
                ejemplo: "Necesita resolver IP → MAC",
                o: ["DNS", "DHCP", "ARP", "ICMP"], 
                a: 2, 
                e: "ARP (Address Resolution Protocol) convierte IP a MAC mediante broadcast."
            },
            { 
                q: "Tu red usa OSPF y ocurre un fallo. ¿En cuánto tiempo aproximadamente converge?",
                ejemplo: "OSPF es más rápido que RIP",
                o: ["30 segundos", "1 minuto", "4-5 segundos", "3 minutos"], 
                a: 2, 
                e: "OSPF converge en 4-5 segundos. RIP puede tardar hasta 180 segundos."
            },
            { 
                q: "Necesitas direccionar una red con 1000 hosts. ¿Qué máscara mínima necesitas?",
                ejemplo: "Busca n donde 2^n - 2 ≥ 1000",
                o: ["/22 (1022 hosts)", "/23 (510 hosts)", "/21 (2046 hosts)", "/24 (254 hosts)"], 
                a: 0, 
                e: "/22 = 10 bits host → 2^10 - 2 = 1022 hosts. /23 solo da 510, insuficiente."
            },
            
            // FIBRA Y TRANSCEPTORES
            { 
                q: "Tienes un SFP LR de 10G con Tx=-3dBm y Rx sens=-18dBm. ¿Cuál es el Power Budget?",
                ejemplo: "PB = Tx mín - Rx sensibilidad",
                o: ["15 dB", "21 dB", "18 dB", "3 dB"], 
                a: 0, 
                e: "PB = -3 - (-18) = -3 + 18 = 15 dB disponibles para pérdidas."
            },
            { 
                q: "Un enlace de fibra SM tiene 20 km con 5 empalmes y 4 conectores. ¿Cuál es la pérdida total aproximada?",
                ejemplo: "SM@1550nm: 0.22dB/km, empalme: 0.1dB, conector: 0.75dB",
                o: ["4.4 dB", "7.9 dB", "5.5 dB", "10 dB"], 
                a: 1, 
                e: "20km×0.22 + 5×0.1 + 4×0.75 = 4.4 + 0.5 + 3.0 = 7.9 dB"
            },
            { 
                q: "Debes conectar dos edificios a 35 km. ¿Qué tipo de transceiver necesitas mínimo?",
                ejemplo: "SR~300m, LR~10km, ER~40km, ZR~80km+",
                o: ["SR", "LR", "ER", "Cualquiera"], 
                a: 2, 
                e: "ER (Extended Reach) alcanza ~40 km. LR solo llega a 10 km."
            },
            { 
                q: "¿Por qué a 1310nm la atenuación es mayor (0.35 dB/km) que a 1550nm (0.22 dB/km)?",
                ejemplo: "La ventana de 1550nm es la tercera ventana óptica",
                o: ["Más dispersión", "Absorción del material", "Error de medición", "Es igual"], 
                a: 1, 
                e: "A 1310nm hay mayor absorción del sílice. 1550nm es la ventana de mínima atenuación."
            },
            { 
                q: "Calculaste un Power Budget de 12 dB para un enlace con pérdidas de 10 dB. ¿Tienes margen suficiente?",
                ejemplo: "Margen recomendado: 1.7 a 3 dB",
                o: ["Sí, sobra 2 dB", "No, necesitas más", "Justo en el límite", "Depende del clima"], 
                a: 0, 
                e: "12 - 10 = 2 dB de margen. Está dentro del rango recomendado (1.7-3 dB). ✓"
            },
            
            // BERT Y TESTING
            { 
                q: "Un test BERT de 10 minutos a 1 Gbps detectó 5 bits erróneos. ¿Cuál es el BER aproximado?",
                ejemplo: "BER = errores / bits totales. 1Gbps × 600s = 600 Gbits",
                o: ["8.3×10⁻¹²", "5×10⁻⁹", "8.3×10⁻⁹", "5×10⁻¹²"], 
                a: 0, 
                e: "Bits = 10⁹ × 600 = 6×10¹¹. BER = 5/(6×10¹¹) ≈ 8.3×10⁻¹²"
            },
            { 
                q: "El BER obtenido fue 10⁻⁸. ¿Cumple el estándar de telecomunicaciones?",
                ejemplo: "BER estándar: 10⁻⁹, BER crítico: 10⁻¹³",
                o: ["Sí, es excelente", "No, debe ser ≤10⁻⁹", "Solo para voz", "Depende del cliente"], 
                a: 1, 
                e: "10⁻⁸ > 10⁻⁹, por lo tanto NO cumple. Se necesita BER ≤ 10⁻⁹."
            },
            { 
                q: "Un cliente de VoIP se queja de cortes en la voz. ¿Qué parámetro probablemente está fuera de rango?",
                ejemplo: "VoIP es sensible a variaciones en el tiempo de llegada",
                o: ["Throughput", "Latencia", "Jitter", "Frame size"], 
                a: 2, 
                e: "El jitter (variación de latencia) afecta especialmente a voz y video en tiempo real."
            },
            
            // CÁLCULOS AVANZADOS
            { 
                q: "Un transmisor de 27 dBm con antena de 35 dBi y 2 dB de pérdidas. ¿Cuál es el EIRP?",
                ejemplo: "EIRP = PTx + Ganancia - Pérdidas",
                o: ["60 dBm", "62 dBm", "64 dBm", "58 dBm"], 
                a: 0, 
                e: "EIRP = 27 + 35 - 2 = 60 dBm"
            },
            { 
                q: "Usando la atmósfera estándar (k=4/3), ¿cuál es el radio efectivo de la Tierra para cálculos de propagación?",
                ejemplo: "Radio real ≈ 6,371 km",
                o: ["6,371 km", "8,500 km", "10,000 km", "4,777 km"], 
                a: 1, 
                e: "Radio efectivo = 6,371 × 4/3 ≈ 8,500 km. Esto 'aplana' la curvatura para los cálculos."
            }
        ];
        
        // Variables del examen
        let examQuestions = [], examIndex = 0, examCorrect = 0, examIncorrect = 0, examAnswers = [];
        
        // ============ VARIABLES DE ESTADO ============
        let fcCards = [], fcIndex = 0, fcCorrect = 0, fcIncorrect = 0, fcFlipped = false;
        let testQuestions = [], testIndex = 0, testCorrect = 0, testIncorrect = 0;
        let exList = [], exIndex = 0, exCorrect = 0, exIncorrect = 0;
        let vofList = [], vofIndex = 0, vofCorrect = 0, vofIncorrect = 0, vofAnswered = false, vofAnswers = [];
        let currentVofCategory = 'all';
        
        // ============ BASE DE DATOS DE CONCEPTOS ============
        const conceptosDB = {
            radio: [
                {
                    titulo: "📡 Introducción a Radioenlaces",
                    contenido: `
                        <p>Los <strong>radioenlaces de microondas</strong> son sistemas de comunicación punto a punto que utilizan ondas electromagnéticas para transmitir información entre dos ubicaciones.</p>
                        
                        <div class="highlight">
                            <strong>Características principales:</strong>
                            <ul>
                                <li>Frecuencias típicas: 6 GHz a 80 GHz</li>
                                <li>Requieren línea de vista (LOS - Line of Sight)</li>
                                <li>Alcance típico: 5-50 km según frecuencia y condiciones</li>
                                <li>Capacidad: desde 10 Mbps hasta varios Gbps</li>
                            </ul>
                        </div>
                        
                        <p>Los radioenlaces son fundamentales para:</p>
                        <ul>
                            <li>Backhaul de redes móviles (3G, 4G, 5G)</li>
                            <li>Conexión de sitios remotos</li>
                            <li>Redes corporativas</li>
                            <li>Redundancia de enlaces de fibra</li>
                        </ul>
                    `
                },
                {
                    titulo: "📊 Modulaciones y Capacidad",
                    contenido: `
                        <p>La <strong>modulación</strong> determina cuántos bits se transmiten por símbolo. A mayor orden de modulación, mayor capacidad pero menor robustez.</p>
                        
                        <table>
                            <tr><th>Modulación</th><th>Bits/Símbolo</th><th>Uso Típico</th></tr>
                            <tr><td>QPSK</td><td>2</td><td>Condiciones adversas</td></tr>
                            <tr><td>16-QAM</td><td>4</td><td>Lluvia moderada</td></tr>
                            <tr><td>64-QAM</td><td>6</td><td>Condiciones normales</td></tr>
                            <tr><td>256-QAM</td><td>8</td><td>Buen tiempo</td></tr>
                            <tr><td>1024-QAM</td><td>10</td><td>Condiciones óptimas</td></tr>
                            <tr><td>4096-QAM</td><td>12</td><td>Excelentes condiciones</td></tr>
                        </table>
                        
                        <div class="warning-box">
                            <strong>⚠️ Importante:</strong> La modulación adaptativa (ACM) permite cambiar dinámicamente la modulación según las condiciones del enlace.
                        </div>
                    `
                },
                {
                    titulo: "🎚️ Configuraciones de Canal",
                    contenido: `
                        <p>Existen diferentes configuraciones para aumentar la capacidad:</p>
                        
                        <div class="highlight">
                            <strong>ACAP (Adjacent Channel Alternate Polarization):</strong>
                            <ul>
                                <li>Canales adyacentes con polarizaciones alternas</li>
                                <li>Reduce interferencia entre canales cercanos</li>
                            </ul>
                        </div>
                        
                        <div class="highlight">
                            <strong>CCDP (Co-Channel Dual Polarization):</strong>
                            <ul>
                                <li>Mismo canal, ambas polarizaciones (H y V)</li>
                                <li>Duplica la capacidad del canal</li>
                                <li>Requiere XPIC (Cross-Polar Interference Canceller)</li>
                            </ul>
                        </div>
                        
                        <div class="example-box">
                            <strong>Ejemplo:</strong> Un canal de 56 MHz con 1024-QAM en CCDP puede alcanzar ~1.6 Gbps de capacidad.
                        </div>
                    `
                },
                {
                    titulo: "📻 Equipos Ericsson Minilink",
                    contenido: `
                        <p>La familia <strong>Minilink</strong> de Ericsson incluye diferentes unidades:</p>
                        
                        <table>
                            <tr><th>Unidad</th><th>Función</th><th>Características</th></tr>
                            <tr><td>RAU2 (6352)</td><td>Radio Unit</td><td>6-42 GHz, hasta 2048-QAM</td></tr>
                            <tr><td>MMU2 (MMU4A)</td><td>Modem Unit</td><td>Procesamiento banda base, hasta 4096-QAM</td></tr>
                            <tr><td>NPU3 (NPU4)</td><td>Network Unit</td><td>Switching, agregación, gestión</td></tr>
                            <tr><td>OD2</td><td>Outdoor Unit</td><td>Split-mount completo</td></tr>
                        </table>
                        
                        <p><strong>Anchos de banda soportados:</strong> 7, 14, 28, 40, 56, 80, 112 MHz</p>
                    `
                }
            ],
            propagacion: [
                {
                    titulo: "🌍 Factor K y Radio Efectivo",
                    contenido: `
                        <p>El <strong>factor k</strong> representa la relación entre el radio efectivo de la Tierra y su radio real, debido a la refracción atmosférica.</p>
                        
                        <div class="formula-box">
                            k = Radio efectivo / Radio real ≈ 4/3 = 1.33 (atmósfera estándar)
                        </div>
                        
                        <table>
                            <tr><th>Valor de k</th><th>Condición</th><th>Efecto</th></tr>
                            <tr><td>k > 1</td><td>Normal</td><td>Rayo se curva hacia abajo</td></tr>
                            <tr><td>k = 1</td><td>Sin refracción</td><td>Rayo recto</td></tr>
                            <tr><td>k < 1</td><td>Subrefractive</td><td>Rayo se curva hacia arriba</td></tr>
                            <tr><td>k = ∞</td><td>Ducting</td><td>Propagación guiada</td></tr>
                        </table>
                        
                        <div class="warning-box">
                            <strong>⚠️ Diseño:</strong> Para peor caso se usa k = 2/3, lo que aumenta el despejamiento requerido.
                        </div>
                    `
                },
                {
                    titulo: "🔘 Zona de Fresnel",
                    contenido: `
                        <p>La <strong>primera zona de Fresnel</strong> es un elipsoide imaginario alrededor de la línea de vista donde la energía se concentra.</p>
                        
                        <div class="formula-box">
                            r₁ = 17.3 × √(d₁ × d₂ / (f × d))<br>
                            <small>d₁, d₂, d en km; f en GHz; r₁ en metros</small>
                        </div>
                        
                        <div class="highlight">
                            <strong>Criterio de despejamiento:</strong>
                            <ul>
                                <li><strong>60% mínimo</strong> - Enlace aceptable</li>
                                <li><strong>100%</strong> - Enlace ideal (espacio libre)</li>
                                <li><strong>< 40%</strong> - Pérdidas significativas por difracción</li>
                            </ul>
                        </div>
                        
                        <div class="example-box">
                            <strong>Ejemplo:</strong> Enlace de 10 km a 18 GHz:<br>
                            r₁ = 17.3 × √(5 × 5 / (18 × 10)) = 17.3 × √(1.39) = 20.4 metros<br>
                            Despejamiento 60% = 12.2 metros sobre obstáculos.
                        </div>
                    `
                },
                {
                    titulo: "🌧️ Atenuación por Lluvia",
                    contenido: `
                        <p>La lluvia es el factor dominante de atenuación para frecuencias <strong>superiores a 10 GHz</strong>.</p>
                        
                        <table>
                            <tr><th>Frecuencia</th><th>Atenuación (dB/km) - 25 mm/h</th></tr>
                            <tr><td>10 GHz</td><td>~1 dB/km</td></tr>
                            <tr><td>18 GHz</td><td>~4 dB/km</td></tr>
                            <tr><td>23 GHz</td><td>~6 dB/km</td></tr>
                            <tr><td>38 GHz</td><td>~10 dB/km</td></tr>
                            <tr><td>80 GHz</td><td>~15 dB/km</td></tr>
                        </table>
                        
                        <div class="highlight">
                            <strong>Zonas climáticas ITU-R P.837:</strong>
                            <ul>
                                <li>Zona A-C: Clima seco (poca lluvia)</li>
                                <li>Zona E-K: Clima templado</li>
                                <li>Zona M-Q: Clima tropical (mucha lluvia)</li>
                            </ul>
                        </div>
                    `
                },
                {
                    titulo: "📏 Pérdida en Espacio Libre (FSL)",
                    contenido: `
                        <p>La <strong>pérdida en espacio libre</strong> es la atenuación natural de la señal con la distancia.</p>
                        
                        <div class="formula-box">
                            FSL (dB) = 92.4 + 20×log₁₀(f) + 20×log₁₀(d)<br>
                            <small>f en GHz, d en km</small>
                        </div>
                        
                        <div class="example-box">
                            <strong>Ejemplo:</strong> Enlace de 15 km a 18 GHz:<br>
                            FSL = 92.4 + 20×log(18) + 20×log(15)<br>
                            FSL = 92.4 + 25.1 + 23.5 = <strong>141 dB</strong>
                        </div>
                        
                        <div class="warning-box">
                            <strong>⚠️ Nota:</strong> La FSL aumenta 6 dB cada vez que se duplica la distancia o la frecuencia.
                        </div>
                    `
                }
            ],
            redes: [
                {
                    titulo: "📚 Modelo OSI vs TCP/IP",
                    contenido: `
                        <p>Los modelos de referencia definen cómo se organizan las comunicaciones en capas.</p>
                        
                        <table>
                            <tr><th>Capa OSI</th><th>#</th><th>TCP/IP</th><th>Función</th></tr>
                            <tr><td>Aplicación</td><td>7</td><td rowspan="3">Aplicación</td><td>HTTP, FTP, DNS</td></tr>
                            <tr><td>Presentación</td><td>6</td><td>Cifrado, compresión</td></tr>
                            <tr><td>Sesión</td><td>5</td><td>Control de diálogo</td></tr>
                            <tr><td>Transporte</td><td>4</td><td>Transporte</td><td>TCP, UDP</td></tr>
                            <tr><td>Red</td><td>3</td><td>Internet</td><td>IP, ICMP, enrutamiento</td></tr>
                            <tr><td>Enlace</td><td>2</td><td rowspan="2">Acceso a Red</td><td>Ethernet, MAC</td></tr>
                            <tr><td>Física</td><td>1</td><td>Cables, señales</td></tr>
                        </table>
                    `
                },
                {
                    titulo: "🔢 Direccionamiento IPv4",
                    contenido: `
                        <p>IPv4 usa direcciones de <strong>32 bits</strong> en formato decimal con puntos.</p>
                        
                        <div class="highlight">
                            <strong>Clases de direcciones (legacy):</strong>
                            <ul>
                                <li><strong>Clase A:</strong> 1.0.0.0 - 126.255.255.255 (/8)</li>
                                <li><strong>Clase B:</strong> 128.0.0.0 - 191.255.255.255 (/16)</li>
                                <li><strong>Clase C:</strong> 192.0.0.0 - 223.255.255.255 (/24)</li>
                            </ul>
                        </div>
                        
                        <div class="formula-box">
                            Hosts = 2ⁿ - 2<br>
                            <small>n = bits de host</small>
                        </div>
                        
                        <table>
                            <tr><th>CIDR</th><th>Máscara</th><th>Hosts</th></tr>
                            <tr><td>/24</td><td>255.255.255.0</td><td>254</td></tr>
                            <tr><td>/25</td><td>255.255.255.128</td><td>126</td></tr>
                            <tr><td>/26</td><td>255.255.255.192</td><td>62</td></tr>
                            <tr><td>/27</td><td>255.255.255.224</td><td>30</td></tr>
                            <tr><td>/28</td><td>255.255.255.240</td><td>14</td></tr>
                            <tr><td>/30</td><td>255.255.255.252</td><td>2</td></tr>
                        </table>
                    `
                },
                {
                    titulo: "🌐 Direccionamiento IPv6",
                    contenido: `
                        <p>IPv6 usa direcciones de <strong>128 bits</strong> en formato hexadecimal.</p>
                        
                        <div class="highlight">
                            <strong>Tipos de direcciones:</strong>
                            <ul>
                                <li><strong>::1</strong> - Loopback</li>
                                <li><strong>::</strong> - No especificada</li>
                                <li><strong>FE80::/10</strong> - Link-local (no ruteable)</li>
                                <li><strong>2000::/3</strong> - Global Unicast (públicas)</li>
                                <li><strong>FC00::/7</strong> - Unique Local (privadas)</li>
                                <li><strong>FF00::/8</strong> - Multicast</li>
                            </ul>
                        </div>
                        
                        <div class="example-box">
                            <strong>Formato:</strong> 2001:0db8:85a3:0000:0000:8a2e:0370:7334<br>
                            <strong>Abreviado:</strong> 2001:db8:85a3::8a2e:370:7334
                        </div>
                        
                        <p><strong>Ventajas de IPv6:</strong></p>
                        <ul>
                            <li>2¹²⁸ direcciones (340 undecillones)</li>
                            <li>Autoconfiguración (SLAAC)</li>
                            <li>IPsec obligatorio</li>
                            <li>Sin NAT necesario</li>
                        </ul>
                    `
                },
                {
                    titulo: "🔄 TCP vs UDP",
                    contenido: `
                        <p>Los dos protocolos de capa de transporte principales.</p>
                        
                        <table>
                            <tr><th>Característica</th><th>TCP</th><th>UDP</th></tr>
                            <tr><td>Conexión</td><td>Orientado (3-way handshake)</td><td>Sin conexión</td></tr>
                            <tr><td>Confiabilidad</td><td>ACKs, retransmisiones</td><td>Best-effort</td></tr>
                            <tr><td>Orden</td><td>Garantizado</td><td>No garantizado</td></tr>
                            <tr><td>Control flujo</td><td>Sí (ventana)</td><td>No</td></tr>
                            <tr><td>Overhead</td><td>20 bytes mínimo</td><td>8 bytes</td></tr>
                            <tr><td>Velocidad</td><td>Menor</td><td>Mayor</td></tr>
                        </table>
                        
                        <div class="highlight">
                            <strong>Uso típico:</strong>
                            <ul>
                                <li><strong>TCP:</strong> HTTP, HTTPS, FTP, SSH, correo</li>
                                <li><strong>UDP:</strong> VoIP, video streaming, DNS, SNMP</li>
                            </ul>
                        </div>
                    `
                }
            ],
            ethernet: [
                {
                    titulo: "🔌 Fundamentos de Ethernet",
                    contenido: `
                        <p><strong>Ethernet</strong> es el estándar dominante para redes de área local (LAN).</p>
                        
                        <div class="highlight">
                            <strong>Características clave:</strong>
                            <ul>
                                <li>Estándar IEEE 802.3</li>
                                <li>Direcciones MAC de 48 bits</li>
                                <li>Tamaño de trama: 64-1518 bytes (MTU 1500)</li>
                                <li>Half-duplex (CSMA/CD) o Full-duplex</li>
                            </ul>
                        </div>
                        
                        <table>
                            <tr><th>Velocidad</th><th>Nombre</th><th>Estándar</th></tr>
                            <tr><td>10 Mbps</td><td>Ethernet</td><td>802.3</td></tr>
                            <tr><td>100 Mbps</td><td>Fast Ethernet</td><td>802.3u</td></tr>
                            <tr><td>1 Gbps</td><td>Gigabit Ethernet</td><td>802.3ab/802.3z</td></tr>
                            <tr><td>10 Gbps</td><td>10 Gigabit Ethernet</td><td>802.3ae</td></tr>
                            <tr><td>25 Gbps</td><td>25 Gigabit Ethernet</td><td>802.3by</td></tr>
                            <tr><td>40 Gbps</td><td>40 Gigabit Ethernet</td><td>802.3ba</td></tr>
                            <tr><td>100 Gbps</td><td>100 Gigabit Ethernet</td><td>802.3ba</td></tr>
                        </table>
                    `
                },
                {
                    titulo: "🏢 Metro Ethernet y Servicios MEF",
                    contenido: `
                        <p><strong>Metro Ethernet Forum (MEF)</strong> define servicios Carrier Ethernet estandarizados.</p>
                        
                        <div class="highlight">
                            <strong>Tipos de servicios:</strong>
                            <ul>
                                <li><strong>E-Line:</strong> Punto a punto (como línea dedicada)</li>
                                <li><strong>E-LAN:</strong> Multipunto a multipunto (como LAN extendida)</li>
                                <li><strong>E-Tree:</strong> Punto a multipunto (hub-and-spoke)</li>
                            </ul>
                        </div>
                        
                        <table>
                            <tr><th>Parámetro</th><th>Descripción</th></tr>
                            <tr><td>CIR</td><td>Committed Information Rate - BW garantizado</td></tr>
                            <tr><td>EIR</td><td>Excess Information Rate - BW extra permitido</td></tr>
                            <tr><td>CBS</td><td>Committed Burst Size - Ráfaga garantizada</td></tr>
                            <tr><td>EBS</td><td>Excess Burst Size - Ráfaga extra</td></tr>
                        </table>
                        
                        <div class="example-box">
                            <strong>Ejemplo:</strong> Servicio E-Line con CIR=100 Mbps, EIR=50 Mbps significa que tienes 100 Mbps garantizados y puedes usar hasta 150 Mbps si hay capacidad disponible.
                        </div>
                    `
                },
                {
                    titulo: "🏷️ VLANs y 802.1Q",
                    contenido: `
                        <p>Las <strong>VLANs</strong> segmentan una red física en múltiples redes lógicas.</p>
                        
                        <div class="formula-box">
                            Trama 802.1Q = Trama Ethernet + 4 bytes de tag VLAN
                        </div>
                        
                        <div class="highlight">
                            <strong>Campos del tag VLAN:</strong>
                            <ul>
                                <li><strong>TPID:</strong> 0x8100 (identificador de protocolo)</li>
                                <li><strong>PCP:</strong> 3 bits de prioridad (0-7)</li>
                                <li><strong>DEI:</strong> 1 bit de elegibilidad de descarte</li>
                                <li><strong>VID:</strong> 12 bits de ID (1-4094)</li>
                            </ul>
                        </div>
                        
                        <p><strong>Tipos de puertos:</strong></p>
                        <ul>
                            <li><strong>Access:</strong> Pertenece a una VLAN, sin tag</li>
                            <li><strong>Trunk:</strong> Transporta múltiples VLANs, con tag</li>
                            <li><strong>Native VLAN:</strong> VLAN sin tag en trunk</li>
                        </ul>
                    `
                },
                {
                    titulo: "🌉 Spanning Tree Protocol (STP)",
                    contenido: `
                        <p><strong>STP (802.1D)</strong> previene loops en redes con redundancia.</p>
                        
                        <div class="highlight">
                            <strong>Proceso de convergencia:</strong>
                            <ol>
                                <li>Elección de Root Bridge (menor Bridge ID)</li>
                                <li>Selección de Root Ports (mejor camino al root)</li>
                                <li>Selección de Designated Ports</li>
                                <li>Bloqueo de puertos restantes</li>
                            </ol>
                        </div>
                        
                        <table>
                            <tr><th>Variante</th><th>Convergencia</th><th>Estándar</th></tr>
                            <tr><td>STP</td><td>30-50 seg</td><td>802.1D</td></tr>
                            <tr><td>RSTP</td><td>1-2 seg</td><td>802.1w</td></tr>
                            <tr><td>MSTP</td><td>1-2 seg</td><td>802.1s</td></tr>
                        </table>
                        
                        <div class="warning-box">
                            <strong>⚠️ BPDU Guard:</strong> Protege puertos de acceso. Si recibe BPDU, desactiva el puerto para prevenir ataques.
                        </div>
                    `
                }
            ],
            fibra: [
                {
                    titulo: "💡 Principios de Fibra Óptica",
                    contenido: `
                        <p>La fibra óptica transmite información mediante <strong>pulsos de luz</strong> que viajan por reflexión interna total.</p>
                        
                        <div class="highlight">
                            <strong>Componentes de la fibra:</strong>
                            <ul>
                                <li><strong>Núcleo (core):</strong> Por donde viaja la luz</li>
                                <li><strong>Revestimiento (cladding):</strong> Confina la luz</li>
                                <li><strong>Recubrimiento:</strong> Protección mecánica</li>
                            </ul>
                        </div>
                        
                        <table>
                            <tr><th>Tipo</th><th>Núcleo</th><th>Color</th><th>Distancia</th></tr>
                            <tr><td>Monomodo (SM)</td><td>8-10 μm</td><td>Amarillo</td><td>Hasta 100+ km</td></tr>
                            <tr><td>Multimodo OM1</td><td>62.5 μm</td><td>Naranja</td><td>~300 m</td></tr>
                            <tr><td>Multimodo OM3</td><td>50 μm</td><td>Aqua</td><td>~300 m @10G</td></tr>
                            <tr><td>Multimodo OM4</td><td>50 μm</td><td>Aqua</td><td>~400 m @10G</td></tr>
                        </table>
                    `
                },
                {
                    titulo: "📉 Atenuación y Pérdidas",
                    contenido: `
                        <p>La <strong>atenuación</strong> es la pérdida de potencia óptica a lo largo de la fibra.</p>
                        
                        <table>
                            <tr><th>Tipo de Pérdida</th><th>Valor Típico</th></tr>
                            <tr><td>Fibra SM @ 1310 nm</td><td>~0.35 dB/km</td></tr>
                            <tr><td>Fibra SM @ 1550 nm</td><td>~0.22 dB/km</td></tr>
                            <tr><td>Empalme de fusión</td><td>~0.1 dB</td></tr>
                            <tr><td>Empalme mecánico</td><td>~0.3 dB</td></tr>
                            <tr><td>Conector óptico</td><td>~0.5-0.75 dB</td></tr>
                        </table>
                        
                        <div class="formula-box">
                            Power Budget = Tx (dBm) - Rx sensibilidad (dBm)
                        </div>
                        
                        <div class="example-box">
                            <strong>Ejemplo:</strong> Tx = -3 dBm, Rx = -28 dBm<br>
                            Power Budget = -3 - (-28) = <strong>25 dB disponibles</strong>
                        </div>
                    `
                },
                {
                    titulo: "🔧 Transceptores Ópticos",
                    contenido: `
                        <p>Los <strong>transceptores</strong> (transceivers) convierten señales eléctricas en ópticas y viceversa.</p>
                        
                        <table>
                            <tr><th>Tipo</th><th>Velocidad</th><th>Uso</th></tr>
                            <tr><td>SFP</td><td>1 Gbps</td><td>Gigabit Ethernet</td></tr>
                            <tr><td>SFP+</td><td>10 Gbps</td><td>10G Ethernet</td></tr>
                            <tr><td>SFP28</td><td>25 Gbps</td><td>25G Ethernet</td></tr>
                            <tr><td>QSFP+</td><td>40 Gbps</td><td>40G (4x10G)</td></tr>
                            <tr><td>QSFP28</td><td>100 Gbps</td><td>100G (4x25G)</td></tr>
                            <tr><td>QSFP-DD</td><td>400 Gbps</td><td>400G (8x50G)</td></tr>
                        </table>
                        
                        <div class="highlight">
                            <strong>Alcances por tipo:</strong>
                            <ul>
                                <li><strong>SR:</strong> Short Range (~300m multimodo)</li>
                                <li><strong>LR:</strong> Long Range (~10 km)</li>
                                <li><strong>ER:</strong> Extended Range (~40 km)</li>
                                <li><strong>ZR:</strong> Very Long (~80+ km)</li>
                            </ul>
                        </div>
                    `
                }
            ],
            gpon: [
                {
                    titulo: "🏠 Arquitectura GPON",
                    contenido: `
                        <p><strong>GPON (Gigabit Passive Optical Network)</strong> es una tecnología de acceso de fibra hasta el hogar.</p>
                        
                        <div class="highlight">
                            <strong>Componentes principales:</strong>
                            <ul>
                                <li><strong>OLT:</strong> Optical Line Terminal (en la central)</li>
                                <li><strong>Splitter:</strong> Divisor pasivo (no requiere energía)</li>
                                <li><strong>ONT/ONU:</strong> Optical Network Terminal (en el cliente)</li>
                            </ul>
                        </div>
                        
                        <table>
                            <tr><th>Característica</th><th>GPON</th><th>XGS-PON</th></tr>
                            <tr><td>Downstream</td><td>2.488 Gbps</td><td>10 Gbps</td></tr>
                            <tr><td>Upstream</td><td>1.244 Gbps</td><td>10 Gbps</td></tr>
                            <tr><td>Split ratio</td><td>1:64 (típico 1:32)</td><td>1:128</td></tr>
                            <tr><td>Distancia máx</td><td>20 km (60 km clase C+)</td><td>20 km</td></tr>
                        </table>
                        
                        <div class="formula-box">
                            λ Downstream: 1490 nm | λ Upstream: 1310 nm | λ Video RF: 1550 nm
                        </div>
                    `
                },
                {
                    titulo: "➗ Pérdidas por Splitter",
                    contenido: `
                        <p>Los <strong>splitters</strong> dividen la señal óptica en múltiples salidas, introduciendo pérdidas.</p>
                        
                        <table>
                            <tr><th>Ratio</th><th>Pérdida Teórica</th><th>Pérdida Real</th></tr>
                            <tr><td>1:2</td><td>3.0 dB</td><td>~3.5 dB</td></tr>
                            <tr><td>1:4</td><td>6.0 dB</td><td>~7.0 dB</td></tr>
                            <tr><td>1:8</td><td>9.0 dB</td><td>~10.5 dB</td></tr>
                            <tr><td>1:16</td><td>12.0 dB</td><td>~14.0 dB</td></tr>
                            <tr><td>1:32</td><td>15.0 dB</td><td>~17.5 dB</td></tr>
                            <tr><td>1:64</td><td>18.0 dB</td><td>~21.0 dB</td></tr>
                        </table>
                        
                        <div class="formula-box">
                            Pérdida teórica = 10 × log₁₀(N)<br>
                            <small>donde N = número de salidas</small>
                        </div>
                        
                        <div class="warning-box">
                            <strong>⚠️ Importante:</strong> Se suelen usar 2 niveles de splitting (ej: 1:4 + 1:8 = 1:32 total). La pérdida se suma.
                        </div>
                    `
                },
                {
                    titulo: "⚡ Power Budget GPON",
                    contenido: `
                        <p>El <strong>Power Budget</strong> determina la distancia y cantidad de divisiones posibles.</p>
                        
                        <div class="highlight">
                            <strong>Clases de potencia GPON:</strong>
                            <ul>
                                <li><strong>Clase B:</strong> 25 dB</li>
                                <li><strong>Clase B+:</strong> 28 dB (más común)</li>
                                <li><strong>Clase C:</strong> 30 dB</li>
                                <li><strong>Clase C+:</strong> 32 dB (larga distancia)</li>
                            </ul>
                        </div>
                        
                        <div class="example-box">
                            <strong>Ejemplo de cálculo:</strong><br>
                            Power Budget disponible: 28 dB (Clase B+)<br><br>
                            - Fibra 15 km @ 0.35 dB/km = 5.25 dB<br>
                            - Splitter 1:32 = 17.5 dB<br>
                            - 4 conectores @ 0.5 dB = 2.0 dB<br>
                            - 2 empalmes @ 0.1 dB = 0.2 dB<br>
                            - Margen = 3.0 dB<br><br>
                            <strong>Total: 27.95 dB ✅ Viable</strong>
                        </div>
                    `
                }
            ],
            bert: [
                {
                    titulo: "📊 BERT - Bit Error Rate Testing",
                    contenido: `
                        <p><strong>BERT</strong> (Bit Error Rate Test) mide la tasa de errores en una transmisión digital.</p>
                        
                        <div class="formula-box">
                            BER = Bits con error / Bits totales transmitidos
                        </div>
                        
                        <table>
                            <tr><th>BER</th><th>Aplicación</th><th>Calidad</th></tr>
                            <tr><td>10⁻⁹</td><td>Telecomunicaciones estándar</td><td>Aceptable</td></tr>
                            <tr><td>10⁻¹⁰</td><td>Redes carrier</td><td>Buena</td></tr>
                            <tr><td>10⁻¹²</td><td>Redes de alta calidad</td><td>Muy buena</td></tr>
                            <tr><td>10⁻¹³</td><td>Datos críticos</td><td>Excelente</td></tr>
                        </table>
                        
                        <div class="highlight">
                            <strong>Patrones de prueba (PRBS):</strong>
                            <ul>
                                <li><strong>PRBS-7:</strong> 2⁷-1 = 127 bits</li>
                                <li><strong>PRBS-15:</strong> 2¹⁵-1 = 32,767 bits</li>
                                <li><strong>PRBS-23:</strong> 2²³-1 = 8,388,607 bits</li>
                                <li><strong>PRBS-31:</strong> 2³¹-1 = 2,147,483,647 bits</li>
                            </ul>
                        </div>
                    `
                },
                {
                    titulo: "📋 RFC 2544 - Benchmarking Ethernet",
                    contenido: `
                        <p><strong>RFC 2544</strong> define pruebas estándar para medir rendimiento de equipos de red.</p>
                        
                        <div class="highlight">
                            <strong>Pruebas definidas:</strong>
                            <ol>
                                <li><strong>Throughput:</strong> Máxima tasa sin pérdida</li>
                                <li><strong>Latency:</strong> Tiempo de tránsito</li>
                                <li><strong>Frame Loss:</strong> Porcentaje de pérdida</li>
                                <li><strong>Back-to-Back:</strong> Capacidad de ráfaga</li>
                                <li><strong>System Reset:</strong> Tiempo de recuperación</li>
                            </ol>
                        </div>
                        
                        <table>
                            <tr><th>Tamaño Trama</th><th>Uso</th></tr>
                            <tr><td>64 bytes</td><td>VoIP, paquetes pequeños</td></tr>
                            <tr><td>128 bytes</td><td>Señalización</td></tr>
                            <tr><td>256 bytes</td><td>Control</td></tr>
                            <tr><td>512 bytes</td><td>Datos mixtos</td></tr>
                            <tr><td>1024 bytes</td><td>Streaming</td></tr>
                            <tr><td>1280 bytes</td><td>IPv6 mínimo</td></tr>
                            <tr><td>1518 bytes</td><td>Datos grandes</td></tr>
                        </table>
                    `
                },
                {
                    titulo: "🎯 Criterios de Aceptación",
                    contenido: `
                        <p>Criterios típicos para validar enlaces Ethernet según RFC 2544.</p>
                        
                        <table>
                            <tr><th>Parámetro</th><th>Criterio</th></tr>
                            <tr><td>Throughput</td><td>≥ 99% del rate teórico</td></tr>
                            <tr><td>Latencia @ 1G</td><td>≤ 1 ms</td></tr>
                            <tr><td>Latencia @ 10G</td><td>≤ 300 μs</td></tr>
                            <tr><td>Latencia @ 100G</td><td>≤ 100 μs</td></tr>
                            <tr><td>Frame Loss</td><td>≤ 0.01%</td></tr>
                            <tr><td>Jitter</td><td>≤ 1 ms (VoIP)</td></tr>
                        </table>
                        
                        <div class="warning-box">
                            <strong>⚠️ ITU-T Y.1564:</strong> Estándar más moderno que reemplaza RFC 2544 para pruebas de múltiples servicios simultáneos.
                        </div>
                    `
                },
                {
                    titulo: "⏱️ Sincronización de Red",
                    contenido: `
                        <p>La sincronización es crítica para servicios de tiempo real.</p>
                        
                        <table>
                            <tr><th>Protocolo</th><th>Precisión</th><th>Uso</th></tr>
                            <tr><td>NTP</td><td>Milisegundos</td><td>IT general</td></tr>
                            <tr><td>PTP (IEEE 1588)</td><td>Microsegundos a nanosegundos</td><td>Telecom, 5G</td></tr>
                            <tr><td>SyncE</td><td>Frecuencia</td><td>Carrier Ethernet</td></tr>
                            <tr><td>GPS</td><td>Nanosegundos</td><td>Referencia primaria</td></tr>
                        </table>
                        
                        <div class="highlight">
                            <strong>Conceptos clave:</strong>
                            <ul>
                                <li><strong>Frecuencia:</strong> Velocidad del reloj</li>
                                <li><strong>Fase:</strong> Alineación del reloj</li>
                                <li><strong>ToD:</strong> Time of Day (hora absoluta)</li>
                            </ul>
                        </div>
                    `
                }
            ],
            seguridad: [
                {
                    titulo: "🔐 Control de Acceso - 802.1X",
                    contenido: `
                        <p><strong>802.1X</strong> proporciona autenticación basada en puerto para redes.</p>
                        
                        <div class="highlight">
                            <strong>Componentes:</strong>
                            <ul>
                                <li><strong>Supplicant:</strong> Cliente que solicita acceso</li>
                                <li><strong>Authenticator:</strong> Switch o AP que controla acceso</li>
                                <li><strong>Authentication Server:</strong> RADIUS que valida credenciales</li>
                            </ul>
                        </div>
                        
                        <p><strong>Métodos EAP comunes:</strong></p>
                        <ul>
                            <li><strong>EAP-TLS:</strong> Certificados (más seguro)</li>
                            <li><strong>EAP-PEAP:</strong> Usuario/contraseña con túnel TLS</li>
                            <li><strong>EAP-MD5:</strong> Solo usuario/contraseña (no recomendado)</li>
                        </ul>
                    `
                },
                {
                    titulo: "🛡️ Protecciones de Capa 2",
                    contenido: `
                        <p>Mecanismos de seguridad para proteger la red a nivel de enlace.</p>
                        
                        <table>
                            <tr><th>Protección</th><th>Función</th><th>Ataque que previene</th></tr>
                            <tr><td>DHCP Snooping</td><td>Filtra DHCP no autorizado</td><td>Rogue DHCP</td></tr>
                            <tr><td>Dynamic ARP Inspection</td><td>Valida mensajes ARP</td><td>ARP Spoofing</td></tr>
                            <tr><td>IP Source Guard</td><td>Filtra IPs falsas</td><td>IP Spoofing</td></tr>
                            <tr><td>Port Security</td><td>Limita MACs por puerto</td><td>MAC Flooding</td></tr>
                            <tr><td>BPDU Guard</td><td>Protege STP</td><td>STP Attack</td></tr>
                            <tr><td>Root Guard</td><td>Previene nuevo root</td><td>Root Bridge Attack</td></tr>
                        </table>
                        
                        <div class="warning-box">
                            <strong>⚠️ Importante:</strong> DHCP Snooping debe estar activo para que DAI e IP Source Guard funcionen.
                        </div>
                    `
                },
                {
                    titulo: "🔒 MACsec (802.1AE)",
                    contenido: `
                        <p><strong>MACsec</strong> proporciona cifrado y autenticación a nivel de capa 2.</p>
                        
                        <div class="highlight">
                            <strong>Características:</strong>
                            <ul>
                                <li>Cifrado AES-GCM-128 o AES-GCM-256</li>
                                <li>Autenticación de origen</li>
                                <li>Integridad de datos</li>
                                <li>Protección anti-replay</li>
                            </ul>
                        </div>
                        
                        <p><strong>Componentes:</strong></p>
                        <ul>
                            <li><strong>SecY:</strong> Entidad de seguridad (por puerto)</li>
                            <li><strong>CAK:</strong> Connectivity Association Key</li>
                            <li><strong>SAK:</strong> Secure Association Key (derivada del CAK)</li>
                            <li><strong>MKA:</strong> MACsec Key Agreement (802.1X-2010)</li>
                        </ul>
                        
                        <div class="example-box">
                            <strong>Uso típico:</strong> Enlaces punto a punto críticos, conexiones de data center, backhaul móvil.
                        </div>
                    `
                },
                {
                    titulo: "📡 SNMP - Gestión de Red",
                    contenido: `
                        <p><strong>SNMP</strong> (Simple Network Management Protocol) permite monitorear y gestionar dispositivos de red.</p>
                        
                        <table>
                            <tr><th>Versión</th><th>Autenticación</th><th>Cifrado</th><th>Uso</th></tr>
                            <tr><td>SNMPv1</td><td>Community string</td><td>No</td><td>Legacy</td></tr>
                            <tr><td>SNMPv2c</td><td>Community string</td><td>No</td><td>Común</td></tr>
                            <tr><td>SNMPv3</td><td>Usuario/contraseña</td><td>Sí (AES)</td><td>Recomendado</td></tr>
                        </table>
                        
                        <div class="highlight">
                            <strong>Operaciones SNMP:</strong>
                            <ul>
                                <li><strong>GET:</strong> Obtener valor de un OID</li>
                                <li><strong>SET:</strong> Modificar valor de un OID</li>
                                <li><strong>GETNEXT:</strong> Obtener siguiente OID</li>
                                <li><strong>GETBULK:</strong> Obtener múltiples OIDs</li>
                                <li><strong>TRAP:</strong> Notificación asíncrona del agente</li>
                            </ul>
                        </div>
                        
                        <p><strong>Puertos:</strong> UDP 161 (queries), UDP 162 (traps)</p>
                    `
                }
            ]
        };
        
        // ============ NAVEGACIÓN ============
        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            
            document.getElementById('section-' + sectionId).classList.add('active');
            document.querySelector(`[onclick="showSection('${sectionId}')"]`).classList.add('active');
            
            // Cerrar sidebar en móvil
            if (window.innerWidth <= 992) {
                document.getElementById('sidebar').classList.remove('visible');
                document.getElementById('sidebar-overlay').classList.remove('visible');
            }
        }
        
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('sidebar-overlay');
            sidebar.classList.toggle('visible');
            overlay.classList.toggle('visible');
        }
        
        function closeSidebar() {
            document.getElementById('sidebar').classList.remove('visible');
            document.getElementById('sidebar-overlay').classList.remove('visible');
        }
        
        // ============ TAMAÑO DE TEXTO ============
        function setTextSize(size) {
            const html = document.documentElement;
            
            // Remover clases anteriores
            html.classList.remove('text-small', 'text-normal', 'text-large', 'text-xlarge');
            
            // Agregar nueva clase
            html.classList.add('text-' + size);
            
            // Actualizar botones activos
            document.querySelectorAll('.text-size-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.size === size) {
                    btn.classList.add('active');
                }
            });
            
            // Guardar preferencia
            localStorage.setItem('textSize', size);
        }
        
        function loadTextSize() {
            const savedSize = localStorage.getItem('textSize') || 'normal';
            setTextSize(savedSize);
        }
        
        // ============ BÚSQUEDA GLOBAL ============
        function openSearch() {
            document.getElementById('search-modal').classList.add('visible');
            document.getElementById('search-input').focus();
            document.getElementById('search-input').value = '';
            document.getElementById('search-results').innerHTML = '';
            document.getElementById('search-hint').style.display = 'block';
        }
        
        function closeSearch() {
            document.getElementById('search-modal').classList.remove('visible');
        }
        
        function performSearch(query) {
            const resultsContainer = document.getElementById('search-results');
            const hint = document.getElementById('search-hint');
            
            if (query.length < 2) {
                resultsContainer.innerHTML = '';
                hint.style.display = 'block';
                return;
            }
            
            hint.style.display = 'none';
            const results = searchAll(query.toLowerCase());
            
            if (results.length === 0) {
                resultsContainer.innerHTML = `
                    <div class="search-empty">
                        <div class="search-empty-icon">🔍</div>
                        <p>No se encontraron resultados para "<strong>${escapeHtml(query)}</strong>"</p>
                        <p style="margin-top: 10px; font-size: 0.9em;">Intenta con otras palabras clave</p>
                    </div>
                `;
                return;
            }
            
            let html = `<div class="search-stats">Se encontraron ${results.length} resultado${results.length !== 1 ? 's' : ''}</div>`;
            
            results.slice(0, 30).forEach(result => {
                html += `
                    <div class="search-result" onclick="${result.action}">
                        <div class="search-result-type">${result.icon} ${result.type}</div>
                        <div class="search-result-title">${highlightText(result.title, query)}</div>
                        <div class="search-result-preview">${highlightText(result.preview, query)}</div>
                    </div>
                `;
            });
            
            if (results.length > 30) {
                html += `<div class="search-stats">Mostrando 30 de ${results.length} resultados</div>`;
            }
            
            resultsContainer.innerHTML = html;
        }
        
        function searchAll(query) {
            const results = [];
            
            // Buscar en Flashcards
            flashcardsDB.forEach((fc, index) => {
                if (fc.q.toLowerCase().includes(query) || fc.a.toLowerCase().includes(query)) {
                    results.push({
                        type: 'Flashcard',
                        icon: '🎴',
                        title: fc.q,
                        preview: fc.a.substring(0, 100) + (fc.a.length > 100 ? '...' : ''),
                        action: `goToFlashcard('${fc.category}')`
                    });
                }
            });
            
            // Buscar en V/F
            vofQuestionsDB.forEach((vof, index) => {
                if (vof.statement.toLowerCase().includes(query) || vof.explanation.toLowerCase().includes(query)) {
                    results.push({
                        type: 'Verdadero/Falso',
                        icon: '✅',
                        title: vof.statement,
                        preview: (vof.answer ? '✓ Verdadero' : '✗ Falso') + ' - ' + vof.explanation.substring(0, 80),
                        action: `goToVoF('${vof.category}')`
                    });
                }
            });
            
            // Buscar en Conceptos
            Object.keys(conceptosDB).forEach(categoria => {
                conceptosDB[categoria].forEach(concepto => {
                    const textoPlano = concepto.contenido.replace(/<[^>]*>/g, ' ').toLowerCase();
                    if (concepto.titulo.toLowerCase().includes(query) || textoPlano.includes(query)) {
                        results.push({
                            type: 'Concepto - ' + categoria.charAt(0).toUpperCase() + categoria.slice(1),
                            icon: '📚',
                            title: concepto.titulo.replace(/^[^\s]+\s/, ''),
                            preview: textoPlano.substring(0, 120) + '...',
                            action: `goToConcepto('${categoria}')`
                        });
                    }
                });
            });
            
            // Buscar en Tips
            tips.forEach(tip => {
                if (tip.toLowerCase().includes(query)) {
                    results.push({
                        type: 'Tip',
                        icon: '💡',
                        title: 'Consejo de estudio',
                        preview: tip,
                        action: `closeSearch()`
                    });
                }
            });
            
            // Buscar en ejercicios
            exercisesDB.forEach(ex => {
                if (ex.title.toLowerCase().includes(query) || ex.exp.toLowerCase().includes(query)) {
                    results.push({
                        type: 'Ejercicio',
                        icon: '✍️',
                        title: ex.title,
                        preview: ex.exp,
                        action: `goToExercises('${ex.cat}')`
                    });
                }
            });
            
            return results;
        }
        
        function highlightText(text, query) {
            if (!query) return escapeHtml(text);
            const escaped = escapeHtml(text);
            const regex = new RegExp(`(${escapeRegex(query)})`, 'gi');
            return escaped.replace(regex, '<mark>$1</mark>');
        }
        
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }
        
        function escapeRegex(string) {
            return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
        }
        
        function goToFlashcard(category) {
            closeSearch();
            showSection('flashcards');
            // Activar categoría
            document.querySelectorAll('#fc-tabs .tab').forEach(t => {
                t.classList.remove('active');
                if (t.dataset.category === category) t.classList.add('active');
            });
            filterFlashcards(category);
        }
        
        function goToVoF(category) {
            closeSearch();
            showSection('vof');
            currentVofCategory = category;
            document.querySelectorAll('#vof-tabs .tab').forEach(t => {
                t.classList.remove('active');
                if (t.dataset.category === category) t.classList.add('active');
            });
        }
        
        function goToConcepto(categoria) {
            closeSearch();
            showSection('conceptos');
            currentConceptCategory = categoria;
            document.querySelectorAll('.filter-tab').forEach(t => {
                t.classList.remove('active');
                if (t.dataset.category === categoria) t.classList.add('active');
            });
            renderConceptos();
        }
        
        function goToExercises(category) {
            closeSearch();
            showSection('ejercicios');
            currentExCategory = category;
            document.querySelectorAll('#ex-tabs .tab').forEach(t => {
                t.classList.remove('active');
                if (t.dataset.category === category) t.classList.add('active');
            });
            loadExercises();
        }
        
        // Atajos de teclado para búsqueda
        document.addEventListener('keydown', function(e) {
            // Ctrl+K o Cmd+K para abrir búsqueda
            if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
                e.preventDefault();
                openSearch();
            }
            // Escape para cerrar
            if (e.key === 'Escape') {
                closeSearch();
            }
        });
        
        // ============ DESAFÍO RÁPIDO - JUEGO ============
        let desafioTimer = null;
        let desafioTimeLeft = 60;
        let desafioScore = 0;
        let desafioCombo = 1;
        let desafioMaxCombo = 1;
        let desafioCorrect = 0;
        let desafioIncorrect = 0;
        let desafioQuestions = [];
        let desafioCurrentQ = 0;
        let desafioRecord = parseInt(localStorage.getItem('desafioRecord') || '0');
        let desafioAnswered = false;
        
        function initDesafio() {
            document.getElementById('desafio-record').textContent = desafioRecord;
        }
        
        function showDesafioStart() {
            document.getElementById('desafio-start').style.display = 'block';
            document.getElementById('desafio-game').style.display = 'none';
            document.getElementById('desafio-results').style.display = 'none';
            document.getElementById('desafio-record').textContent = desafioRecord;
        }
        
        function startDesafio() {
            // Reset
            desafioTimeLeft = 60;
            desafioScore = 0;
            desafioCombo = 1;
            desafioMaxCombo = 1;
            desafioCorrect = 0;
            desafioIncorrect = 0;
            desafioCurrentQ = 0;
            desafioAnswered = false;
            
            // Preparar preguntas
            const category = document.getElementById('desafio-category').value;
            desafioQuestions = prepareDesafioQuestions(category);
            
            // Mostrar pantalla de juego
            document.getElementById('desafio-start').style.display = 'none';
            document.getElementById('desafio-game').style.display = 'block';
            document.getElementById('desafio-results').style.display = 'none';
            
            // Actualizar HUD
            updateDesafioHUD();
            
            // Mostrar primera pregunta
            showDesafioQuestion();
            
            // Iniciar timer
            desafioTimer = setInterval(updateDesafioTimer, 1000);
        }
        
        function prepareDesafioQuestions(category) {
            // Combinar preguntas de vofQuestionsDB (convertir a formato quiz)
            let questions = [];
            
            let vofFiltered = category === 'all' ? [...vofQuestionsDB] : 
                vofQuestionsDB.filter(q => q.category === category);
            
            // Convertir V/F a formato de opciones
            vofFiltered.forEach(q => {
                questions.push({
                    question: q.statement,
                    options: ['Verdadero', 'Falso'],
                    correct: q.answer ? 0 : 1,
                    explanation: q.explanation
                });
            });
            
            // Agregar preguntas de questionsDB si hay
            Object.values(questionsDB).forEach(topicQuestions => {
                topicQuestions.forEach(q => {
                    questions.push({
                        question: q.q,
                        options: q.o,
                        correct: q.a,
                        explanation: q.e
                    });
                });
            });
            
            shuffleArray(questions);
            return questions;
        }
        
        function showDesafioQuestion() {
            if (desafioCurrentQ >= desafioQuestions.length) {
                desafioCurrentQ = 0;
                shuffleArray(desafioQuestions);
            }
            
            const q = desafioQuestions[desafioCurrentQ];
            desafioAnswered = false;
            
            document.getElementById('desafio-question-num').textContent = 
                `Pregunta ${desafioCorrect + desafioIncorrect + 1}`;
            document.getElementById('desafio-question').textContent = q.question;
            document.getElementById('desafio-feedback').textContent = '';
            document.getElementById('desafio-feedback').className = 'desafio-feedback';
            
            const optionsContainer = document.getElementById('desafio-options');
            optionsContainer.innerHTML = q.options.map((opt, i) => `
                <button class="desafio-option" onclick="answerDesafio(${i})">${opt}</button>
            `).join('');
        }
        
        function answerDesafio(selected) {
            if (desafioAnswered || desafioTimeLeft <= 0) return;
            desafioAnswered = true;
            
            const q = desafioQuestions[desafioCurrentQ];
            const buttons = document.querySelectorAll('.desafio-option');
            const feedback = document.getElementById('desafio-feedback');
            
            buttons.forEach((btn, i) => {
                btn.style.pointerEvents = 'none';
                if (i === q.correct) btn.classList.add('correct');
                if (i === selected && selected !== q.correct) btn.classList.add('incorrect');
            });
            
            if (selected === q.correct) {
                // Correcto
                desafioCorrect++;
                const points = 10 * desafioCombo;
                desafioScore += points;
                desafioCombo++;
                if (desafioCombo > desafioMaxCombo) desafioMaxCombo = desafioCombo;
                
                feedback.textContent = `✅ ¡Correcto! +${points} pts`;
                feedback.className = 'desafio-feedback correct';
                
                // Mostrar combo popup si es mayor a 2
                if (desafioCombo > 2) {
                    showComboPopup(desafioCombo);
                }
            } else {
                // Incorrecto
                desafioIncorrect++;
                desafioCombo = 1;
                feedback.textContent = `❌ Incorrecto`;
                feedback.className = 'desafio-feedback incorrect';
            }
            
            updateDesafioHUD();
            desafioCurrentQ++;
            
            // Siguiente pregunta después de un breve delay
            setTimeout(() => {
                if (desafioTimeLeft > 0) {
                    showDesafioQuestion();
                }
            }, 800);
        }
        
        function updateDesafioTimer() {
            desafioTimeLeft--;
            document.getElementById('desafio-timer').textContent = desafioTimeLeft;
            
            const hudTime = document.querySelector('.hud-time');
            if (desafioTimeLeft <= 10) {
                hudTime.classList.add('warning');
            }
            
            if (desafioTimeLeft <= 0) {
                endDesafio();
            }
        }
        
        function updateDesafioHUD() {
            document.getElementById('desafio-score').textContent = desafioScore;
            document.getElementById('desafio-combo').textContent = `x${desafioCombo}`;
        }
        
        function showComboPopup(combo) {
            const popup = document.createElement('div');
            popup.className = 'combo-popup';
            popup.textContent = `🔥 x${combo} COMBO!`;
            document.body.appendChild(popup);
            
            setTimeout(() => popup.remove(), 600);
        }
        
        function endDesafio() {
            clearInterval(desafioTimer);
            document.querySelector('.hud-time').classList.remove('warning');
            
            // Mostrar resultados
            document.getElementById('desafio-game').style.display = 'none';
            document.getElementById('desafio-results').style.display = 'block';
            
            // Determinar emoji y título según puntuación
            let emoji, title;
            if (desafioScore >= 500) {
                emoji = '🏆';
                title = '¡INCREÍBLE!';
            } else if (desafioScore >= 300) {
                emoji = '🎉';
                title = '¡Excelente!';
            } else if (desafioScore >= 150) {
                emoji = '👏';
                title = '¡Muy bien!';
            } else if (desafioScore >= 50) {
                emoji = '💪';
                title = 'Buen intento';
            } else {
                emoji = '📚';
                title = 'Sigue practicando';
            }
            
            document.getElementById('results-emoji').textContent = emoji;
            document.getElementById('results-title').textContent = title;
            document.getElementById('final-score').textContent = desafioScore;
            document.getElementById('result-correct').textContent = desafioCorrect;
            document.getElementById('result-incorrect').textContent = desafioIncorrect;
            document.getElementById('result-max-combo').textContent = `x${desafioMaxCombo}`;
            
            // Verificar récord
            if (desafioScore > desafioRecord) {
                desafioRecord = desafioScore;
                localStorage.setItem('desafioRecord', desafioRecord);
                document.getElementById('new-record').style.display = 'block';
            } else {
                document.getElementById('new-record').style.display = 'none';
            }
        }
        
        // ============ MEMORIA TÉCNICA ============
        const memoriaPairs = [
            { concept: "GPON", definition: "Gigabit Passive Optical Network" },
            { concept: "OLT", definition: "Optical Line Terminal (Central)" },
            { concept: "ONT", definition: "Optical Network Terminal (Cliente)" },
            { concept: "Splitter 1:32", definition: "~17.5 dB de pérdida" },
            { concept: "λ Downstream", definition: "1490 nm" },
            { concept: "λ Upstream", definition: "1310 nm" },
            { concept: "Factor k", definition: "4/3 en atmósfera estándar" },
            { concept: "Fresnel 60%", definition: "Despejamiento mínimo" },
            { concept: "BER estándar", definition: "10⁻⁹" },
            { concept: "RFC 2544", definition: "Benchmarking Ethernet" },
            { concept: "E-Line", definition: "Punto a punto MEF" },
            { concept: "E-LAN", definition: "Multipunto a multipunto" },
            { concept: "XPIC", definition: "Cross-Polar Interference Canceller" },
            { concept: "CCDP", definition: "Co-Channel Dual Polarization" },
            { concept: "SFP", definition: "Small Form-Factor Pluggable" },
            { concept: "QSFP", definition: "Quad SFP (4 canales)" },
            { concept: "802.1X", definition: "Autenticación por puerto" },
            { concept: "MACsec", definition: "Cifrado capa 2 (802.1AE)" },
            { concept: "SNMP", definition: "Simple Network Management Protocol" },
            { concept: "IPv6", definition: "128 bits de dirección" },
            { concept: "FE80::/10", definition: "Link-local IPv6" },
            { concept: "FSL", definition: "Free Space Loss" },
            { concept: "EIRP", definition: "Potencia Radiada Isotrópica" },
            { concept: "4096-QAM", definition: "12 bits por símbolo" }
        ];
        
        let memoriaCards = [];
        let memoriaFlipped = [];
        let memoriaMatched = 0;
        let memoriaTotalPairs = 8;
        let memoriaAttempts = 0;
        let memoriaScore = 0;
        let memoriaLocked = false;
        let memoriaRecord = parseInt(localStorage.getItem('memoriaRecord') || '0');
        
        function initMemoria() {
            document.getElementById('memoria-record').textContent = memoriaRecord;
        }
        
        function showMemoriaStart() {
            document.getElementById('memoria-start').style.display = 'block';
            document.getElementById('memoria-game').style.display = 'none';
            document.getElementById('memoria-results').style.display = 'none';
            document.getElementById('memoria-record').textContent = memoriaRecord;
        }
        
        function startMemoria() {
            memoriaTotalPairs = parseInt(document.getElementById('memoria-pairs').value);
            memoriaMatched = 0;
            memoriaAttempts = 0;
            memoriaScore = 0;
            memoriaFlipped = [];
            memoriaLocked = false;
            
            // Seleccionar pares aleatorios
            const shuffledPairs = [...memoriaPairs];
            shuffleArray(shuffledPairs);
            const selectedPairs = shuffledPairs.slice(0, memoriaTotalPairs);
            
            // Crear cartas (concepto + definición)
            memoriaCards = [];
            selectedPairs.forEach((pair, index) => {
                memoriaCards.push({ id: index * 2, pairId: index, type: 'concept', text: pair.concept });
                memoriaCards.push({ id: index * 2 + 1, pairId: index, type: 'definition', text: pair.definition });
            });
            shuffleArray(memoriaCards);
            
            // Mostrar pantalla de juego
            document.getElementById('memoria-start').style.display = 'none';
            document.getElementById('memoria-game').style.display = 'block';
            document.getElementById('memoria-results').style.display = 'none';
            
            // Ajustar grid según cantidad
            const grid = document.getElementById('memoria-grid');
            if (memoriaTotalPairs <= 6) {
                grid.style.gridTemplateColumns = 'repeat(3, 1fr)';
            } else if (memoriaTotalPairs <= 8) {
                grid.style.gridTemplateColumns = 'repeat(4, 1fr)';
            } else {
                grid.style.gridTemplateColumns = 'repeat(4, 1fr)';
            }
            
            renderMemoriaCards();
            updateMemoriaHUD();
        }
        
        function renderMemoriaCards() {
            const grid = document.getElementById('memoria-grid');
            grid.innerHTML = memoriaCards.map(card => `
                <div class="memoria-card" data-id="${card.id}" onclick="flipMemoriaCard(${card.id})">
                    <div class="memoria-card-inner">
                        <div class="memoria-card-front">❓</div>
                        <div class="memoria-card-back ${card.type}">${card.text}</div>
                    </div>
                </div>
            `).join('');
        }
        
        function flipMemoriaCard(id) {
            if (memoriaLocked) return;
            
            const card = memoriaCards.find(c => c.id === id);
            const cardEl = document.querySelector(`.memoria-card[data-id="${id}"]`);
            
            if (cardEl.classList.contains('flipped') || cardEl.classList.contains('matched')) return;
            if (memoriaFlipped.length >= 2) return;
            
            cardEl.classList.add('flipped');
            memoriaFlipped.push(card);
            
            if (memoriaFlipped.length === 2) {
                memoriaAttempts++;
                checkMemoriaMatch();
            }
        }
        
        function checkMemoriaMatch() {
            memoriaLocked = true;
            const [card1, card2] = memoriaFlipped;
            
            if (card1.pairId === card2.pairId && card1.type !== card2.type) {
                // Match!
                setTimeout(() => {
                    document.querySelector(`.memoria-card[data-id="${card1.id}"]`).classList.add('matched');
                    document.querySelector(`.memoria-card[data-id="${card2.id}"]`).classList.add('matched');
                    memoriaMatched++;
                    memoriaScore += Math.max(100 - (memoriaAttempts * 2), 50);
                    updateMemoriaHUD();
                    memoriaFlipped = [];
                    memoriaLocked = false;
                    
                    if (memoriaMatched === memoriaTotalPairs) {
                        setTimeout(endMemoria, 500);
                    }
                }, 500);
            } else {
                // No match
                setTimeout(() => {
                    document.querySelector(`.memoria-card[data-id="${card1.id}"]`).classList.remove('flipped');
                    document.querySelector(`.memoria-card[data-id="${card2.id}"]`).classList.remove('flipped');
                    memoriaFlipped = [];
                    memoriaLocked = false;
                }, 1000);
            }
        }
        
        function updateMemoriaHUD() {
            document.getElementById('memoria-found').textContent = `${memoriaMatched}/${memoriaTotalPairs}`;
            document.getElementById('memoria-attempts').textContent = memoriaAttempts;
            document.getElementById('memoria-score').textContent = memoriaScore;
        }
        
        function endMemoria() {
            document.getElementById('memoria-game').style.display = 'none';
            document.getElementById('memoria-results').style.display = 'block';
            
            // Calcular bonus por eficiencia
            const efficiency = memoriaTotalPairs / memoriaAttempts;
            const bonus = Math.floor(efficiency * 100);
            memoriaScore += bonus;
            
            let emoji, title;
            if (memoriaAttempts <= memoriaTotalPairs + 2) {
                emoji = '🏆';
                title = '¡Memoria perfecta!';
            } else if (memoriaAttempts <= memoriaTotalPairs * 1.5) {
                emoji = '🎉';
                title = '¡Excelente!';
            } else {
                emoji = '👏';
                title = '¡Completado!';
            }
            
            document.getElementById('memoria-emoji').textContent = emoji;
            document.getElementById('memoria-title').textContent = title;
            document.getElementById('memoria-final-score').textContent = memoriaScore;
            document.getElementById('memoria-result-pairs').textContent = memoriaTotalPairs;
            document.getElementById('memoria-result-attempts').textContent = memoriaAttempts;
            
            if (memoriaScore > memoriaRecord) {
                memoriaRecord = memoriaScore;
                localStorage.setItem('memoriaRecord', memoriaRecord);
                document.getElementById('memoria-new-record').style.display = 'block';
            } else {
                document.getElementById('memoria-new-record').style.display = 'none';
            }
        }
        
        // ============ MODO SUPERVIVENCIA ============
        let supervivenciaLives = 3;
        let supervivenciaScore = 0;
        let supervivenciaStreak = 0;
        let supervivenciaMaxStreak = 0;
        let supervivenciaCorrect = 0;
        let supervivenciaQuestions = [];
        let supervivenciaCurrentQ = 0;
        let supervivenciaAnswered = false;
        let supervivenciaRecord = parseInt(localStorage.getItem('supervivenciaRecord') || '0');
        
        function initSupervivencia() {
            document.getElementById('supervivencia-record').textContent = supervivenciaRecord;
        }
        
        function showSupervivenciaStart() {
            document.getElementById('supervivencia-start').style.display = 'block';
            document.getElementById('supervivencia-game').style.display = 'none';
            document.getElementById('supervivencia-results').style.display = 'none';
            document.getElementById('supervivencia-record').textContent = supervivenciaRecord;
        }
        
        function startSupervivencia() {
            supervivenciaLives = 3;
            supervivenciaScore = 0;
            supervivenciaStreak = 0;
            supervivenciaMaxStreak = 0;
            supervivenciaCorrect = 0;
            supervivenciaCurrentQ = 0;
            supervivenciaAnswered = false;
            
            const category = document.getElementById('supervivencia-category').value;
            supervivenciaQuestions = prepareDesafioQuestions(category); // Reutilizamos
            
            document.getElementById('supervivencia-start').style.display = 'none';
            document.getElementById('supervivencia-game').style.display = 'block';
            document.getElementById('supervivencia-results').style.display = 'none';
            
            updateSupervivenciaHUD();
            showSupervivenciaQuestion();
        }
        
        function showSupervivenciaQuestion() {
            if (supervivenciaCurrentQ >= supervivenciaQuestions.length) {
                supervivenciaCurrentQ = 0;
                shuffleArray(supervivenciaQuestions);
            }
            
            const q = supervivenciaQuestions[supervivenciaCurrentQ];
            supervivenciaAnswered = false;
            
            document.getElementById('supervivencia-question-num').textContent = `Pregunta ${supervivenciaCorrect + 1}`;
            document.getElementById('supervivencia-question').textContent = q.question;
            document.getElementById('supervivencia-feedback').textContent = '';
            document.getElementById('supervivencia-feedback').className = 'supervivencia-feedback';
            
            const optionsContainer = document.getElementById('supervivencia-options');
            optionsContainer.innerHTML = q.options.map((opt, i) => `
                <button class="supervivencia-option" onclick="answerSupervivencia(${i})">${opt}</button>
            `).join('');
        }
        
        function answerSupervivencia(selected) {
            if (supervivenciaAnswered) return;
            supervivenciaAnswered = true;
            
            const q = supervivenciaQuestions[supervivenciaCurrentQ];
            const buttons = document.querySelectorAll('.supervivencia-option');
            const feedback = document.getElementById('supervivencia-feedback');
            
            buttons.forEach((btn, i) => {
                btn.style.pointerEvents = 'none';
                if (i === q.correct) btn.classList.add('correct');
                if (i === selected && selected !== q.correct) btn.classList.add('incorrect');
            });
            
            if (selected === q.correct) {
                supervivenciaCorrect++;
                supervivenciaScore += 10;
                supervivenciaStreak++;
                if (supervivenciaStreak > supervivenciaMaxStreak) {
                    supervivenciaMaxStreak = supervivenciaStreak;
                }
                feedback.textContent = `✅ ¡Correcto! +10 pts`;
                feedback.className = 'supervivencia-feedback correct';
            } else {
                supervivenciaLives--;
                supervivenciaStreak = 0;
                feedback.textContent = `❌ Incorrecto - Pierdes una vida`;
                feedback.className = 'supervivencia-feedback incorrect';
                
                // Animación de vida perdida
                document.querySelector('.hud-lives').classList.add('life-lost');
                setTimeout(() => {
                    document.querySelector('.hud-lives').classList.remove('life-lost');
                }, 500);
            }
            
            updateSupervivenciaHUD();
            supervivenciaCurrentQ++;
            
            if (supervivenciaLives <= 0) {
                setTimeout(endSupervivencia, 1200);
            } else {
                setTimeout(showSupervivenciaQuestion, 1200);
            }
        }
        
        function updateSupervivenciaHUD() {
            const hearts = '❤️'.repeat(supervivenciaLives) + '🖤'.repeat(3 - supervivenciaLives);
            document.getElementById('supervivencia-lives').textContent = hearts;
            document.getElementById('supervivencia-score').textContent = supervivenciaScore;
            document.getElementById('supervivencia-streak').textContent = supervivenciaStreak;
        }
        
        function endSupervivencia() {
            document.getElementById('supervivencia-game').style.display = 'none';
            document.getElementById('supervivencia-results').style.display = 'block';
            
            let emoji, title;
            if (supervivenciaCorrect >= 20) {
                emoji = '🏆';
                title = '¡LEYENDA!';
            } else if (supervivenciaCorrect >= 15) {
                emoji = '🎉';
                title = '¡Increíble!';
            } else if (supervivenciaCorrect >= 10) {
                emoji = '💪';
                title = '¡Muy bien!';
            } else if (supervivenciaCorrect >= 5) {
                emoji = '👍';
                title = 'Buen intento';
            } else {
                emoji = '💀';
                title = 'Game Over';
            }
            
            document.getElementById('supervivencia-emoji').textContent = emoji;
            document.getElementById('supervivencia-title').textContent = title;
            document.getElementById('supervivencia-final-score').textContent = supervivenciaScore;
            document.getElementById('supervivencia-result-correct').textContent = supervivenciaCorrect;
            document.getElementById('supervivencia-result-streak').textContent = supervivenciaMaxStreak;
            
            if (supervivenciaScore > supervivenciaRecord) {
                supervivenciaRecord = supervivenciaScore;
                localStorage.setItem('supervivenciaRecord', supervivenciaRecord);
                document.getElementById('supervivencia-new-record').style.display = 'block';
            } else {
                document.getElementById('supervivencia-new-record').style.display = 'none';
            }
        }
        
        // ============ EXAMEN SIMULADO ============
        let examenQuestions = [];
        let examenAnswers = [];
        let examenCurrentQ = 0;
        let examenTimeLimit = 20;
        let examenStartTime = null;
        let examenTimerId = null;
        let examenAprobacion = 70;
        
        function showExamenConfig() {
            document.getElementById('examen-config').style.display = 'block';
            document.getElementById('examen-active').style.display = 'none';
            document.getElementById('examen-results').style.display = 'none';
            if (examenTimerId) {
                clearInterval(examenTimerId);
                examenTimerId = null;
            }
        }
        
        function startExamen() {
            const cantidad = parseInt(document.getElementById('examen-cantidad').value);
            examenTimeLimit = parseInt(document.getElementById('examen-tiempo').value);
            const categoria = document.getElementById('examen-categoria').value;
            examenAprobacion = parseInt(document.getElementById('examen-aprobacion').value);
            
            // Preparar preguntas mezclando flashcards y pruebas
            examenQuestions = prepareExamenQuestions(categoria, cantidad);
            examenAnswers = new Array(examenQuestions.length).fill(null);
            examenCurrentQ = 0;
            examenStartTime = Date.now();
            
            document.getElementById('examen-config').style.display = 'none';
            document.getElementById('examen-active').style.display = 'block';
            document.getElementById('examen-results').style.display = 'none';
            
            // Iniciar timer
            updateExamenTimer();
            examenTimerId = setInterval(updateExamenTimer, 1000);
            
            showExamenQuestion();
        }
        
        function prepareExamenQuestions(categoria, cantidad) {
            let questions = [];
            
            // 1. Agregar preguntas del banco general (questionsDB) - Prioridad máxima
            Object.keys(questionsDB).forEach(topic => {
                const topicCat = mapTopicToCategory(topic);
                if (categoria === 'all' || topicCat === categoria) {
                    questionsDB[topic].forEach(q => {
                        questions.push({
                            question: q.q,
                            options: q.o,
                            correct: q.a,
                            explanation: q.e || '',
                            category: topicCat,
                            source: 'questionsDB',
                            priority: 1
                        });
                    });
                }
            });
            
            // 2. Agregar V/F reformuladas como preguntas claras
            vofQuestionsDB.forEach(vof => {
                if (categoria === 'all' || vof.category === categoria) {
                    // Reformular la afirmación como pregunta
                    let questionText = vof.statement;
                    if (!questionText.includes('?')) {
                        questionText = '¿Es correcto afirmar que: "' + vof.statement + '"?';
                    }
                    
                    questions.push({
                        question: questionText,
                        options: ['Sí, es correcto', 'No, es incorrecto'],
                        correct: vof.answer ? 0 : 1,
                        explanation: vof.explanation,
                        category: vof.category,
                        source: 'vof',
                        priority: 2
                    });
                }
            });
            
            // 3. Convertir SOLO flashcards con respuestas cortas a opción múltiple
            const flashcardsByCategory = {};
            flashcardsDB.forEach(fc => {
                // Solo usar flashcards con respuestas de menos de 50 caracteres
                if (fc.a.length <= 50) {
                    if (!flashcardsByCategory[fc.category]) {
                        flashcardsByCategory[fc.category] = [];
                    }
                    flashcardsByCategory[fc.category].push(fc);
                }
            });
            
            Object.keys(flashcardsByCategory).forEach(cat => {
                if (categoria === 'all' || cat === categoria) {
                    const fcList = flashcardsByCategory[cat];
                    fcList.forEach(fc => {
                        // Generar opciones incorrectas de la misma categoría
                        const otherAnswers = fcList
                            .filter(other => other.a !== fc.a && other.a.length <= 50)
                            .map(other => other.a);
                        
                        if (otherAnswers.length >= 3) {
                            shuffleArray(otherAnswers);
                            const incorrectOptions = otherAnswers.slice(0, 3);
                            
                            // Crear array de opciones y mezclar
                            const options = [fc.a, ...incorrectOptions];
                            
                            // Mezclar opciones manteniendo el índice correcto
                            const shuffledOptions = options.map((opt, i) => ({ opt, isCorrect: i === 0 }));
                            shuffleArray(shuffledOptions);
                            
                            const finalOptions = shuffledOptions.map(o => o.opt);
                            const finalCorrect = shuffledOptions.findIndex(o => o.isCorrect);
                            
                            questions.push({
                                question: fc.q,
                                options: finalOptions,
                                correct: finalCorrect,
                                explanation: fc.a,
                                category: cat,
                                source: 'flashcard',
                                priority: 3
                            });
                        }
                    });
                }
            });
            
            // Eliminar duplicados por pregunta
            const seen = new Set();
            questions = questions.filter(q => {
                const key = q.question.toLowerCase().trim().substring(0, 50);
                if (seen.has(key)) return false;
                seen.add(key);
                return true;
            });
            
            // Ordenar por prioridad y luego mezclar
            questions.sort((a, b) => a.priority - b.priority);
            
            // Tomar preguntas balanceadas de cada fuente
            const fromQuestionsDB = questions.filter(q => q.source === 'questionsDB');
            const fromVoF = questions.filter(q => q.source === 'vof');
            const fromFlashcards = questions.filter(q => q.source === 'flashcard');
            
            shuffleArray(fromQuestionsDB);
            shuffleArray(fromVoF);
            shuffleArray(fromFlashcards);
            
            // Balancear: 50% questionsDB, 30% V/F, 20% flashcards
            let balanced = [];
            const qdbCount = Math.ceil(cantidad * 0.5);
            const vofCount = Math.ceil(cantidad * 0.3);
            const fcCount = cantidad - qdbCount - vofCount;
            
            balanced = [
                ...fromQuestionsDB.slice(0, qdbCount),
                ...fromVoF.slice(0, vofCount),
                ...fromFlashcards.slice(0, fcCount)
            ];
            
            // Si no hay suficientes, completar con las que haya
            if (balanced.length < cantidad) {
                const remaining = [...fromQuestionsDB.slice(qdbCount), ...fromVoF.slice(vofCount), ...fromFlashcards.slice(fcCount)];
                shuffleArray(remaining);
                balanced = [...balanced, ...remaining.slice(0, cantidad - balanced.length)];
            }
            
            shuffleArray(balanced);
            return balanced.slice(0, cantidad);
        }
        
        function mapTopicToCategory(topic) {
            const map = {
                'propagacion': 'radio',
                'minilink': 'radio',
                'radio': 'radio',
                'redes': 'ip',
                'ip': 'ip',
                'ethernet': 'ip',
                'fibra': 'fibra',
                'transceptores': 'fibra',
                'optica': 'fibra',
                'bert': 'bert',
                'rfc2544': 'bert'
            };
            return map[topic.toLowerCase()] || 'ip';
        }
        
        function showExamenQuestion() {
            const q = examenQuestions[examenCurrentQ];
            const total = examenQuestions.length;
            
            document.getElementById('examen-question-num').textContent = `Pregunta ${examenCurrentQ + 1} de ${total}`;
            document.getElementById('examen-progress').style.width = `${((examenCurrentQ + 1) / total) * 100}%`;
            
            const catIcons = { radio: '📡', ip: '🌐', fibra: '💡', bert: '📊' };
            document.getElementById('examen-question-cat').textContent = `${catIcons[q.category] || '📚'} ${q.category.charAt(0).toUpperCase() + q.category.slice(1)}`;
            
            document.getElementById('examen-question-text').textContent = q.question;
            
            const answersContainer = document.getElementById('examen-answers');
            answersContainer.innerHTML = q.options.map((opt, i) => `
                <button class="examen-answer ${examenAnswers[examenCurrentQ] === i ? 'selected' : ''}" 
                        onclick="selectExamenAnswer(${i})">
                    ${opt}
                </button>
            `).join('');
            
            // Actualizar botones de navegación
            document.getElementById('examen-prev').style.visibility = examenCurrentQ === 0 ? 'hidden' : 'visible';
            
            const nextBtn = document.getElementById('examen-next');
            if (examenCurrentQ === total - 1) {
                nextBtn.textContent = '✓ Finalizar';
                nextBtn.className = 'examen-nav-btn examen-nav-finish';
                nextBtn.onclick = finishExamen;
            } else {
                nextBtn.textContent = 'Siguiente →';
                nextBtn.className = 'examen-nav-btn examen-nav-next';
                nextBtn.onclick = examenNext;
            }
        }
        
        function selectExamenAnswer(index) {
            examenAnswers[examenCurrentQ] = index;
            document.querySelectorAll('.examen-answer').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
        }
        
        function examenPrev() {
            if (examenCurrentQ > 0) {
                examenCurrentQ--;
                showExamenQuestion();
            }
        }
        
        function examenNext() {
            if (examenCurrentQ < examenQuestions.length - 1) {
                examenCurrentQ++;
                showExamenQuestion();
            }
        }
        
        function updateExamenTimer() {
            const elapsed = Math.floor((Date.now() - examenStartTime) / 1000);
            const remaining = (examenTimeLimit * 60) - elapsed;
            
            if (remaining <= 0) {
                clearInterval(examenTimerId);
                finishExamen();
                return;
            }
            
            const mins = Math.floor(remaining / 60);
            const secs = remaining % 60;
            const display = `${mins}:${secs.toString().padStart(2, '0')}`;
            document.getElementById('examen-time-display').textContent = display;
            
            const timerEl = document.getElementById('examen-timer');
            if (remaining <= 60) {
                timerEl.classList.add('warning');
            } else {
                timerEl.classList.remove('warning');
            }
        }
        
        function finishExamen() {
            clearInterval(examenTimerId);
            
            const elapsed = Math.floor((Date.now() - examenStartTime) / 1000);
            const mins = Math.floor(elapsed / 60);
            const secs = elapsed % 60;
            
            let correct = 0;
            let incorrect = 0;
            const wrongAnswers = [];
            
            examenQuestions.forEach((q, i) => {
                if (examenAnswers[i] === q.correct) {
                    correct++;
                } else {
                    incorrect++;
                    wrongAnswers.push({
                        question: q.question,
                        userAnswer: examenAnswers[i] !== null ? q.options[examenAnswers[i]] : 'Sin responder',
                        correctAnswer: q.options[q.correct],
                        explanation: q.explanation
                    });
                    // Agregar a repaso inteligente
                    addToRepaso(q);
                }
            });
            
            const percentage = Math.round((correct / examenQuestions.length) * 100);
            const passed = percentage >= examenAprobacion;
            
            document.getElementById('examen-active').style.display = 'none';
            document.getElementById('examen-results').style.display = 'block';
            
            document.getElementById('examen-result-emoji').textContent = passed ? '🎉' : '😔';
            document.getElementById('examen-result-title').textContent = passed ? '¡Aprobado!' : 'No aprobado';
            document.getElementById('examen-score-percent').textContent = `${percentage}%`;
            
            const scoreCircle = document.getElementById('examen-score-circle');
            scoreCircle.className = `examen-score-circle ${passed ? 'pass' : 'fail'}`;
            
            document.getElementById('examen-correct').textContent = correct;
            document.getElementById('examen-incorrect').textContent = incorrect;
            document.getElementById('examen-time-taken').textContent = `${mins}:${secs.toString().padStart(2, '0')}`;
            
            // Mostrar revisión de incorrectas
            const reviewContainer = document.getElementById('examen-review');
            if (wrongAnswers.length > 0) {
                reviewContainer.innerHTML = '<h3 style="margin-bottom: 20px;">📝 Revisión de respuestas incorrectas:</h3>' +
                    wrongAnswers.map(w => `
                        <div class="examen-review-item incorrect">
                            <p><strong>Pregunta:</strong> ${w.question}</p>
                            <p style="color: #ff6b6b; margin-top: 10px;">❌ Tu respuesta: ${w.userAnswer}</p>
                            <p style="color: #81c784; margin-top: 5px;">✅ Correcta: ${w.correctAnswer}</p>
                            ${w.explanation ? `<p style="opacity: 0.8; margin-top: 10px; font-style: italic;">💡 ${w.explanation}</p>` : ''}
                        </div>
                    `).join('');
            } else {
                reviewContainer.innerHTML = '<div style="text-align: center; padding: 30px;"><span style="font-size: 3em;">🏆</span><p style="margin-top: 15px;">¡Perfecto! No tuviste errores.</p></div>';
            }
            
            // Guardar estadísticas
            saveExamenStats(percentage, correct, incorrect);
        }
        
        function saveExamenStats(percentage, correct, incorrect) {
            let stats = JSON.parse(localStorage.getItem('examenStats') || '[]');
            stats.push({
                date: new Date().toISOString(),
                percentage,
                correct,
                incorrect,
                total: examenQuestions.length
            });
            localStorage.setItem('examenStats', JSON.stringify(stats));
        }
        
        // ============ REPASO INTELIGENTE ============
        let repasoQueue = JSON.parse(localStorage.getItem('repasoQueue') || '[]');
        let repasoSessionData = [];
        let repasoCurrentIndex = 0;
        let repasoSessionCorrect = 0;
        let repasoTotalSessions = parseInt(localStorage.getItem('repasoTotalSessions') || '0');
        
        function addToRepaso(question) {
            // Verificar si ya existe
            const exists = repasoQueue.some(q => q.question === question.question);
            if (!exists) {
                repasoQueue.push({
                    question: question.question,
                    options: question.options,
                    correct: question.correct,
                    explanation: question.explanation,
                    category: question.category,
                    failCount: 1,
                    lastFailed: Date.now(),
                    priority: 'high'
                });
                saveRepasoQueue();
            } else {
                // Incrementar contador de fallos
                const item = repasoQueue.find(q => q.question === question.question);
                if (item) {
                    item.failCount++;
                    item.lastFailed = Date.now();
                    item.priority = 'high';
                    saveRepasoQueue();
                }
            }
        }
        
        function saveRepasoQueue() {
            localStorage.setItem('repasoQueue', JSON.stringify(repasoQueue));
        }
        
        function showRepasoMain() {
            document.getElementById('repaso-main').style.display = 'block';
            document.getElementById('repaso-session').style.display = 'none';
            document.getElementById('repaso-results').style.display = 'none';
            updateRepasoStats();
        }
        
        function updateRepasoStats() {
            const pendientes = repasoQueue.filter(q => q.priority !== 'mastered').length;
            const dominadas = repasoQueue.filter(q => q.priority === 'mastered').length;
            
            document.getElementById('repaso-pendientes').textContent = pendientes;
            document.getElementById('repaso-dominadas').textContent = dominadas;
            document.getElementById('repaso-total-sesiones').textContent = repasoTotalSessions;
            
            if (pendientes === 0) {
                document.getElementById('repaso-empty').style.display = 'block';
                document.getElementById('repaso-queue').style.display = 'none';
            } else {
                document.getElementById('repaso-empty').style.display = 'none';
                document.getElementById('repaso-queue').style.display = 'block';
                renderRepasoQueue();
            }
        }
        
        function renderRepasoQueue() {
            const container = document.getElementById('repaso-queue-items');
            const pendientes = repasoQueue.filter(q => q.priority !== 'mastered');
            
            // Ordenar por prioridad
            const sorted = pendientes.sort((a, b) => {
                const priorityOrder = { high: 0, medium: 1, low: 2 };
                return priorityOrder[a.priority] - priorityOrder[b.priority];
            });
            
            container.innerHTML = sorted.slice(0, 20).map((item, i) => `
                <div class="repaso-queue-item priority-${item.priority}">
                    <div style="flex: 1;">
                        <div style="font-size: 0.9em; opacity: 0.7;">${item.category ? item.category.toUpperCase() : 'GENERAL'}</div>
                        <div style="margin-top: 5px;">${item.question.substring(0, 80)}${item.question.length > 80 ? '...' : ''}</div>
                    </div>
                    <span class="repaso-priority-badge ${item.priority}">
                        ${item.priority === 'high' ? '🔴 Alta' : item.priority === 'medium' ? '🟡 Media' : '🟢 Baja'}
                    </span>
                </div>
            `).join('');
            
            if (sorted.length > 20) {
                container.innerHTML += `<div style="text-align: center; padding: 15px; opacity: 0.7;">...y ${sorted.length - 20} más</div>`;
            }
        }
        
        function clearRepasoQueue() {
            if (confirm('¿Estás seguro de que quieres limpiar toda la cola de repaso?')) {
                repasoQueue = [];
                saveRepasoQueue();
                updateRepasoStats();
            }
        }
        
        function startRepasoSession() {
            const pendientes = repasoQueue.filter(q => q.priority !== 'mastered');
            if (pendientes.length === 0) return;
            
            // Tomar hasta 10 preguntas para la sesión
            repasoSessionData = pendientes.slice(0, Math.min(10, pendientes.length));
            repasoCurrentIndex = 0;
            repasoSessionCorrect = 0;
            
            document.getElementById('repaso-main').style.display = 'none';
            document.getElementById('repaso-session').style.display = 'block';
            document.getElementById('repaso-results').style.display = 'none';
            
            showRepasoQuestion();
        }
        
        function showRepasoQuestion() {
            const q = repasoSessionData[repasoCurrentIndex];
            
            document.getElementById('repaso-session-num').textContent = `${repasoCurrentIndex + 1} / ${repasoSessionData.length}`;
            document.getElementById('repaso-progress').style.width = `${((repasoCurrentIndex + 1) / repasoSessionData.length) * 100}%`;
            
            document.getElementById('repaso-question').textContent = q.question;
            document.getElementById('repaso-feedback').style.display = 'none';
            
            const answersContainer = document.getElementById('repaso-answers');
            answersContainer.innerHTML = q.options.map((opt, i) => `
                <button class="examen-answer" onclick="answerRepaso(${i})">${opt}</button>
            `).join('');
        }
        
        function answerRepaso(selected) {
            const q = repasoSessionData[repasoCurrentIndex];
            const buttons = document.querySelectorAll('#repaso-answers .examen-answer');
            
            buttons.forEach((btn, i) => {
                btn.style.pointerEvents = 'none';
                if (i === q.correct) btn.style.background = 'rgba(76, 175, 80, 0.3)';
                if (i === selected && selected !== q.correct) btn.style.background = 'rgba(244, 67, 54, 0.3)';
            });
            
            const feedback = document.getElementById('repaso-feedback');
            const feedbackText = document.getElementById('repaso-feedback-text');
            feedback.style.display = 'block';
            
            if (selected === q.correct) {
                repasoSessionCorrect++;
                feedback.style.background = 'rgba(76, 175, 80, 0.1)';
                feedbackText.innerHTML = `<div style="color: #81c784; font-size: 1.2em; margin-bottom: 10px;">✅ ¡Correcto!</div>
                    ${q.explanation ? `<p style="opacity: 0.8;">${q.explanation}</p>` : ''}`;
            } else {
                feedback.style.background = 'rgba(244, 67, 54, 0.1)';
                feedbackText.innerHTML = `<div style="color: #ff6b6b; font-size: 1.2em; margin-bottom: 10px;">❌ Incorrecto</div>
                    <p>La respuesta correcta era: <strong>${q.options[q.correct]}</strong></p>
                    ${q.explanation ? `<p style="opacity: 0.8; margin-top: 10px;">${q.explanation}</p>` : ''}`;
            }
        }
        
        function rateRepaso(difficulty) {
            const q = repasoSessionData[repasoCurrentIndex];
            const queueItem = repasoQueue.find(item => item.question === q.question);
            
            if (queueItem) {
                if (difficulty === 'easy') {
                    queueItem.priority = 'mastered';
                } else if (difficulty === 'medium') {
                    queueItem.priority = 'low';
                } else {
                    queueItem.priority = 'high';
                }
                saveRepasoQueue();
            }
            
            repasoCurrentIndex++;
            
            if (repasoCurrentIndex >= repasoSessionData.length) {
                endRepasoSession();
            } else {
                showRepasoQuestion();
            }
        }
        
        function endRepasoSession() {
            repasoTotalSessions++;
            localStorage.setItem('repasoTotalSessions', repasoTotalSessions);
            
            document.getElementById('repaso-session').style.display = 'none';
            document.getElementById('repaso-results').style.display = 'block';
            
            const remaining = repasoQueue.filter(q => q.priority !== 'mastered').length;
            
            document.getElementById('repaso-session-correct').textContent = repasoSessionCorrect;
            document.getElementById('repaso-session-reviewed').textContent = repasoSessionData.length;
            document.getElementById('repaso-session-remaining').textContent = remaining;
        }
        
        // ============ CONCEPTOS Y TEORÍA ============
        function initConceptos() {
            document.querySelectorAll('#conceptos-tabs .filter-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    document.querySelectorAll('#conceptos-tabs .filter-tab').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    showConceptos(this.dataset.topic);
                });
            });
            showConceptos('radio'); // Mostrar radio por defecto
        }
        
        function showConceptos(topic) {
            const container = document.getElementById('conceptos-content');
            const conceptos = conceptosDB[topic] || [];
            
            if (conceptos.length === 0) {
                container.innerHTML = '<div class="concepto-card"><p>No hay conceptos disponibles para este tema.</p></div>';
                return;
            }
            
            container.innerHTML = conceptos.map(c => `
                <div class="concepto-card">
                    <h3>${c.titulo}</h3>
                    ${c.contenido}
                </div>
            `).join('');
        }
        
        // ============ FLASHCARDS ============
        function initFlashcards() {
            document.querySelectorAll('#fc-tabs .tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    document.querySelectorAll('#fc-tabs .tab').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    filterFlashcards(this.dataset.category);
                });
            });
            filterFlashcards('all');
        }
        
        function filterFlashcards(category) {
            fcCards = category === 'all' ? [...flashcardsDB] : flashcardsDB.filter(c => c.category === category);
            shuffleArray(fcCards);
            fcIndex = 0; fcCorrect = 0; fcIncorrect = 0;
            updateFcStats();
            showFlashcard();
        }
        
        function showFlashcard() {
            if (fcIndex >= fcCards.length) {
                alert(`¡Terminaste! Correctas: ${fcCorrect}, A repasar: ${fcIncorrect}`);
                filterFlashcards('all');
                return;
            }
            
            const card = fcCards[fcIndex];
            const cats = { radio: '📡 Radio', ip: '🌐 IP', fibra: '💡 Fibra', formulas: '🧮 Fórmulas' };
            
            document.getElementById('fc-category').textContent = cats[card.category] || card.category;
            document.getElementById('fc-category-back').textContent = cats[card.category] || card.category;
            document.getElementById('fc-number').textContent = `${fcIndex + 1}/${fcCards.length}`;
            document.getElementById('fc-number-back').textContent = `${fcIndex + 1}/${fcCards.length}`;
            document.getElementById('fc-question').textContent = card.q;
            document.getElementById('fc-answer').innerHTML = card.a.replace(/\n/g, '<br>');
            
            fcFlipped = false;
            document.getElementById('flashcard').classList.remove('flipped');
            document.getElementById('fc-progress').style.width = (fcIndex / fcCards.length * 100) + '%';
        }
        
        function flipCard() {
            fcFlipped = !fcFlipped;
            document.getElementById('flashcard').classList.toggle('flipped');
        }
        
        function markCard(correct) {
            if (correct) fcCorrect++; else fcIncorrect++;
            fcIndex++;
            updateFcStats();
            showFlashcard();
            saveProgress('flashcard', { correct: fcCorrect, incorrect: fcIncorrect, total: fcCards.length });
        }
        
        function skipCard() { fcIndex++; showFlashcard(); }
        
        function resetFlashcards() { filterFlashcards('all'); }
        
        function updateFcStats() {
            document.getElementById('fc-correct').textContent = fcCorrect;
            document.getElementById('fc-incorrect').textContent = fcIncorrect;
            document.getElementById('fc-remaining').textContent = Math.max(0, fcCards.length - fcIndex);
        }
        
        // ============ PRUEBAS ============
        function initTests() {
            document.querySelectorAll('#test-tabs .tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    document.querySelectorAll('#test-tabs .tab').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    loadTest(this.dataset.test);
                });
            });
            loadTest('propagacion');
        }
        
        let currentTestTopic = '';
        
        function loadTest(testId) {
            currentTestTopic = testId;
            testQuestions = questionsDB[testId] ? [...questionsDB[testId]] : [];
            shuffleArray(testQuestions);
            testCorrect = 0; testIncorrect = 0;
            renderTest();
        }
        
        function renderTest() {
            const container = document.getElementById('test-container');
            container.innerHTML = testQuestions.map((q, i) => `
                <div class="question-card" data-index="${i}" data-answer="${q.a}">
                    <div class="question-number">Pregunta ${i + 1}</div>
                    <div class="question-text">${q.q}</div>
                    <div class="options">
                        ${q.o.map((opt, j) => `<button class="option" onclick="selectTestOption(${i}, ${j})">${String.fromCharCode(97 + j)}) ${opt}</button>`).join('')}
                    </div>
                    <div class="explanation"><strong>💡</strong> ${q.e}</div>
                </div>
            `).join('');
            updateTestStats();
        }
        
        function selectTestOption(qIndex, optIndex) {
            const card = document.querySelector(`.question-card[data-index="${qIndex}"]`);
            const options = card.querySelectorAll('.option');
            const correct = parseInt(card.dataset.answer);
            
            if (options[0].classList.contains('disabled')) return;
            
            options.forEach((o, i) => {
                o.classList.add('disabled');
                if (i === correct) o.classList.add('correct');
                else if (i === optIndex) o.classList.add('incorrect');
            });
            
            card.querySelector('.explanation').classList.add('show');
            
            if (optIndex === correct) {
                testCorrect++;
            } else {
                testIncorrect++;
                // Agregar a repaso inteligente
                const q = testQuestions[qIndex];
                addToRepaso({
                    question: q.q,
                    options: q.options,
                    correct: q.answer,
                    explanation: q.exp || '',
                    category: currentTestTopic
                });
            }
            updateTestStats();
            
            if (testCorrect + testIncorrect === testQuestions.length) {
                saveProgress('test', { correct: testCorrect, total: testQuestions.length });
            }
        }
        
        function resetTest() {
            const activeTab = document.querySelector('#test-tabs .tab.active');
            loadTest(activeTab.dataset.test);
        }
        
        function updateTestStats() {
            document.getElementById('test-correct').textContent = testCorrect;
            document.getElementById('test-incorrect').textContent = testIncorrect;
            const total = testCorrect + testIncorrect;
            const score = total > 0 ? Math.round(testCorrect / total * 100) : 0;
            document.getElementById('test-score').textContent = score + '%';
            document.getElementById('test-progress').style.width = (total / testQuestions.length * 100) + '%';
        }
        
        // ============ EJERCICIOS ============
        function initExercises() {
            document.querySelectorAll('#ex-tabs .tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    document.querySelectorAll('#ex-tabs .tab').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    filterExercises(this.dataset.category);
                });
            });
            filterExercises('all');
        }
        
        function filterExercises(category) {
            exList = category === 'all' ? [...exercisesDB] : exercisesDB.filter(e => e.cat === category);
            shuffleArray(exList);
            exIndex = 0; exCorrect = 0; exIncorrect = 0;
            updateExStats();
            showExercise();
        }
        
        function showExercise() {
            if (exIndex >= exList.length) {
                document.getElementById('exercise-container').innerHTML = `
                    <div style="text-align: center; padding: 50px;">
                        <h3>🎉 ¡Completado!</h3>
                        <p style="margin-top: 15px;">Correctas: ${exCorrect} | Incorrectas: ${exIncorrect}</p>
                        <button class="btn btn-primary" style="margin-top: 20px;" onclick="filterExercises('all')">Reiniciar</button>
                    </div>
                `;
                return;
            }
            
            const ex = exList[exIndex];
            const cats = { radio: '📡', optica: '💡', redes: '🌐' };
            
            document.getElementById('exercise-container').innerHTML = `
                <div style="text-align: center; margin-bottom: 20px;">
                    <span style="background: linear-gradient(135deg, var(--primary), var(--secondary)); padding: 5px 15px; border-radius: 20px; font-size: 0.9em;">
                        ${cats[ex.cat] || '📚'} Ejercicio ${exIndex + 1} de ${exList.length}
                    </span>
                </div>
                <h4 style="text-align: center; color: var(--warning); margin-bottom: 20px;">${ex.title}</h4>
                <div class="formula-exercise">${ex.formula}</div>
                <div class="feedback" id="ex-feedback">
                    <h4 id="ex-feedback-title"></h4>
                    <p>${ex.exp}</p>
                </div>
            `;
            
            document.getElementById('check-exercise-btn').disabled = false;
            document.getElementById('next-exercise-btn').disabled = true;
            document.getElementById('ex-progress').style.width = (exIndex / exList.length * 100) + '%';
            
            const firstInput = document.querySelector('.blank-input');
            if (firstInput) firstInput.focus();
        }
        
        function checkExercise() {
            const inputs = document.querySelectorAll('.blank-input');
            let allCorrect = true;
            
            inputs.forEach(input => {
                const answer = input.value.trim().toLowerCase();
                const correct = input.dataset.answer.split(',').map(a => a.trim().toLowerCase());
                
                if (correct.includes(answer)) {
                    input.classList.add('correct');
                } else {
                    input.classList.add('incorrect');
                    allCorrect = false;
                }
                input.disabled = true;
            });
            
            const feedback = document.getElementById('ex-feedback');
            const title = document.getElementById('ex-feedback-title');
            
            if (allCorrect) {
                exCorrect++;
                feedback.classList.add('correct', 'show');
                title.textContent = '✅ ¡Correcto!';
            } else {
                exIncorrect++;
                feedback.classList.add('incorrect', 'show');
                title.textContent = '❌ Incorrecto';
            }
            
            updateExStats();
            document.getElementById('check-exercise-btn').disabled = true;
            document.getElementById('next-exercise-btn').disabled = false;
        }
        
        function nextExercise() { exIndex++; showExercise(); }
        function prevExercise() { if (exIndex > 0) { exIndex--; showExercise(); } }
        
        function updateExStats() {
            document.getElementById('ex-correct').textContent = exCorrect;
            document.getElementById('ex-incorrect').textContent = exIncorrect;
        }
        
        // ============ VERDADERO O FALSO ============
        function initVoF() {
            document.querySelectorAll('#vof-tabs .tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    document.querySelectorAll('#vof-tabs .tab').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    currentVofCategory = this.dataset.category;
                    // Reset y mostrar inicio
                    document.getElementById('vof-start').style.display = 'block';
                    document.getElementById('vof-question').style.display = 'none';
                    document.getElementById('vof-result').style.display = 'none';
                });
            });
        }
        
        function startVoF() {
            // Filtrar por categoría
            vofList = currentVofCategory === 'all' 
                ? [...vofQuestionsDB] 
                : vofQuestionsDB.filter(q => q.category === currentVofCategory);
            
            shuffleArray(vofList);
            vofList = vofList.slice(0, 20); // Máximo 20 preguntas
            vofIndex = 0;
            vofCorrect = 0;
            vofIncorrect = 0;
            vofAnswers = [];
            
            updateVoFStats();
            
            document.getElementById('vof-start').style.display = 'none';
            document.getElementById('vof-question').style.display = 'block';
            document.getElementById('vof-result').style.display = 'none';
            
            showVoFQuestion();
        }
        
        function showVoFQuestion() {
            if (vofIndex >= vofList.length) {
                showVoFResult();
                return;
            }
            
            const q = vofList[vofIndex];
            document.getElementById('vof-counter').textContent = `Pregunta ${vofIndex + 1} de ${vofList.length}`;
            document.getElementById('vof-statement').textContent = q.statement;
            
            // Reset estado
            vofAnswered = false;
            document.getElementById('btn-verdadero').disabled = false;
            document.getElementById('btn-falso').disabled = false;
            document.getElementById('btn-verdadero').className = 'btn btn-success';
            document.getElementById('btn-falso').className = 'btn btn-danger';
            document.getElementById('vof-feedback').style.display = 'none';
            document.getElementById('vof-next-btn').style.display = 'none';
            
            updateVoFStats();
        }
        
        function answerVoF(userAnswer) {
            if (vofAnswered) return;
            vofAnswered = true;
            
            const q = vofList[vofIndex];
            const isCorrect = userAnswer === q.answer;
            
            // Deshabilitar botones
            document.getElementById('btn-verdadero').disabled = true;
            document.getElementById('btn-falso').disabled = true;
            
            // Marcar respuesta
            if (userAnswer === true) {
                document.getElementById('btn-verdadero').className = isCorrect ? 'btn btn-success' : 'btn btn-warning';
            } else {
                document.getElementById('btn-falso').className = isCorrect ? 'btn btn-danger' : 'btn btn-warning';
            }
            
            // Mostrar respuesta correcta
            if (!isCorrect) {
                if (q.answer === true) {
                    document.getElementById('btn-verdadero').style.border = '3px solid #4caf50';
                } else {
                    document.getElementById('btn-falso').style.border = '3px solid #4caf50';
                }
            }
            
            // Actualizar contadores
            if (isCorrect) {
                vofCorrect++;
            } else {
                vofIncorrect++;
                // Agregar a repaso inteligente
                addToRepaso({
                    question: q.statement,
                    options: ['Verdadero', 'Falso'],
                    correct: q.answer ? 0 : 1,
                    explanation: q.explanation,
                    category: q.category || 'general'
                });
            }
            
            // Guardar respuesta
            vofAnswers.push({
                statement: q.statement,
                correctAnswer: q.answer,
                userAnswer: userAnswer,
                isCorrect: isCorrect,
                explanation: q.explanation
            });
            
            // Mostrar feedback
            const feedback = document.getElementById('vof-feedback');
            feedback.style.display = 'block';
            feedback.style.background = isCorrect ? 'rgba(76,175,80,0.2)' : 'rgba(244,67,54,0.2)';
            feedback.innerHTML = `
                <div style="font-size: 1.5em; margin-bottom: 10px;">${isCorrect ? '✅ ¡Correcto!' : '❌ Incorrecto'}</div>
                <div style="opacity: 0.9;">La afirmación es <strong>${q.answer ? 'VERDADERA' : 'FALSA'}</strong></div>
                <div style="margin-top: 10px; opacity: 0.8; font-size: 0.95em;">${q.explanation}</div>
            `;
            
            document.getElementById('vof-next-btn').style.display = 'inline-block';
            updateVoFStats();
        }
        
        function nextVoF() {
            // Reset estilos de borde
            document.getElementById('btn-verdadero').style.border = '';
            document.getElementById('btn-falso').style.border = '';
            
            vofIndex++;
            showVoFQuestion();
        }
        
        function showVoFResult() {
            document.getElementById('vof-question').style.display = 'none';
            document.getElementById('vof-result').style.display = 'block';
            
            const total = vofCorrect + vofIncorrect;
            const pct = total > 0 ? Math.round((vofCorrect / total) * 100) : 0;
            
            let emoji, text;
            if (pct >= 90) { emoji = '🏆'; text = '¡Excelente! Dominas el tema.'; }
            else if (pct >= 70) { emoji = '🎉'; text = '¡Muy bien! Buen conocimiento.'; }
            else if (pct >= 50) { emoji = '👍'; text = 'Bien, pero puedes mejorar.'; }
            else { emoji = '📚'; text = 'Necesitas repasar más.'; }
            
            document.getElementById('vof-final-emoji').textContent = emoji;
            document.getElementById('vof-final-score').textContent = `${pct}%`;
            document.getElementById('vof-final-text').textContent = `${vofCorrect} de ${total} correctas - ${text}`;
            
            // Mostrar revisión
            let reviewHTML = '<div style="max-height: 400px; overflow-y: auto;">';
            vofAnswers.forEach((ans, i) => {
                reviewHTML += `
                    <div style="padding: 15px; margin-bottom: 10px; border-radius: 10px; background: ${ans.isCorrect ? 'rgba(76,175,80,0.1)' : 'rgba(244,67,54,0.1)'}; border-left: 4px solid ${ans.isCorrect ? '#4caf50' : '#f44336'};">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                            <span><strong>#${i+1}</strong></span>
                            <span>${ans.isCorrect ? '✅' : '❌'}</span>
                        </div>
                        <div style="margin-bottom: 8px;">"${ans.statement}"</div>
                        <div style="font-size: 0.9em; opacity: 0.8;">
                            <span style="color: ${ans.correctAnswer ? '#4caf50' : '#f44336'};">
                                Respuesta: <strong>${ans.correctAnswer ? 'VERDADERO' : 'FALSO'}</strong>
                            </span>
                            ${!ans.isCorrect ? `<span> | Tu respuesta: ${ans.userAnswer ? 'Verdadero' : 'Falso'}</span>` : ''}
                        </div>
                    </div>
                `;
            });
            reviewHTML += '</div>';
            document.getElementById('vof-review').innerHTML = reviewHTML;
            
            // Guardar progreso
            saveProgress('vof', pct, vofCorrect, total);
        }
        
        function updateVoFStats() {
            document.getElementById('vof-correct').textContent = vofCorrect;
            document.getElementById('vof-incorrect').textContent = vofIncorrect;
            document.getElementById('vof-remaining').textContent = Math.max(0, vofList.length - vofIndex - 1);
        }
        
        // ============ CALCULADORAS ============
        function initCalculators() {
            document.querySelectorAll('#calc-tabs .tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    document.querySelectorAll('#calc-tabs .tab').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    showCalculator(this.dataset.calc);
                });
            });
        }
        
        function showCalculator(calcId) {
            document.querySelectorAll('#calc-container > div').forEach(c => c.style.display = 'none');
            document.getElementById('calc-' + calcId).style.display = 'block';
        }
        
        function calcFresnel() {
            const d = parseFloat(document.getElementById('fresnel-d').value);
            const d1 = parseFloat(document.getElementById('fresnel-d1').value);
            const f = parseFloat(document.getElementById('fresnel-f').value);
            
            if (isNaN(d) || isNaN(d1) || isNaN(f) || d <= 0 || f <= 0) return showCalcError('fresnel-result');
            
            const d2 = d - d1;
            if (d2 <= 0 || d1 <= 0) return showCalcError('fresnel-result');
            
            const rF = 17.3 * Math.sqrt((d1 * d2) / (f * d));
            
            const result = document.getElementById('fresnel-result');
            result.classList.remove('error');
            result.classList.add('show');
            document.getElementById('fresnel-value').textContent = rF.toFixed(2) + ' m';
            document.getElementById('fresnel-details').innerHTML = `
                <p>Distancia total <span>${d} km</span></p>
                <p>d₁ <span>${d1} km</span></p>
                <p>d₂ <span>${d2.toFixed(2)} km</span></p>
                <p>Frecuencia <span>${f} GHz</span></p>
                <p style="color: var(--warning);">60% despejamiento <span>${(rF * 0.6).toFixed(2)} m</span></p>
            `;
        }
        
        function calcPowerBudget() {
            const tx = parseFloat(document.getElementById('pb-tx').value);
            const rx = parseFloat(document.getElementById('pb-rx').value);
            const dist = parseFloat(document.getElementById('pb-dist').value);
            const att = parseFloat(document.getElementById('pb-att').value);
            const splices = parseInt(document.getElementById('pb-splices').value) || 0;
            const conn = parseInt(document.getElementById('pb-conn').value) || 0;
            
            if (isNaN(tx) || isNaN(rx) || isNaN(dist) || isNaN(att)) return showCalcError('pb-result');
            
            const pb = tx - rx;
            const fiberLoss = dist * att;
            const spliceLoss = splices * 0.1;
            const connLoss = conn * 0.75;
            const totalLoss = fiberLoss + spliceLoss + connLoss + 3; // +3 margen
            const remaining = pb - totalLoss;
            
            const result = document.getElementById('pb-result');
            result.classList.remove('error');
            result.classList.add('show');
            
            if (remaining >= 0) {
                document.getElementById('pb-value').textContent = remaining.toFixed(2) + ' dB';
                document.getElementById('pb-status').textContent = '✅ Enlace viable';
            } else {
                result.classList.add('error');
                document.getElementById('pb-value').textContent = remaining.toFixed(2) + ' dB';
                document.getElementById('pb-status').textContent = '❌ Enlace NO viable';
            }
            
            document.getElementById('pb-details').innerHTML = `
                <p>Power Budget <span>${pb.toFixed(2)} dB</span></p>
                <p>Pérdida fibra <span>${fiberLoss.toFixed(2)} dB</span></p>
                <p>Pérdida empalmes <span>${spliceLoss.toFixed(2)} dB</span></p>
                <p>Pérdida conectores <span>${connLoss.toFixed(2)} dB</span></p>
                <p>Pérdida total (+ 3 dB margen) <span>${totalLoss.toFixed(2)} dB</span></p>
            `;
        }
        
        function calcPON() {
            const txPower = parseFloat(document.getElementById('pon-tx').value);
            const rxSens = parseFloat(document.getElementById('pon-rx').value);
            const fiberDist = parseFloat(document.getElementById('pon-dist').value);
            const fiberAtt = parseFloat(document.getElementById('pon-att').value);
            const splitter1 = parseFloat(document.getElementById('pon-splitter1').value);
            const splitter2 = parseFloat(document.getElementById('pon-splitter2').value) || 0;
            const connectors = parseInt(document.getElementById('pon-conn').value) || 0;
            const splices = parseInt(document.getElementById('pon-splices').value) || 0;
            
            if (isNaN(txPower) || isNaN(rxSens) || isNaN(fiberDist) || isNaN(fiberAtt) || isNaN(splitter1)) {
                return showCalcError('pon-result');
            }
            
            // Cálculos
            const powerBudget = txPower - rxSens;
            const fiberLoss = fiberDist * fiberAtt;
            const splitter1Loss = splitter1;
            const splitter2Loss = splitter2;
            const totalSplitterLoss = splitter1Loss + splitter2Loss;
            const connLoss = connectors * 0.5;
            const spliceLoss = splices * 0.1;
            const margin = 3; // Margen de seguridad
            const totalLoss = fiberLoss + totalSplitterLoss + connLoss + spliceLoss + margin;
            const remaining = powerBudget - totalLoss;
            
            const result = document.getElementById('pon-result');
            result.classList.remove('error');
            result.classList.add('show');
            
            if (remaining >= 0) {
                document.getElementById('pon-value').textContent = remaining.toFixed(2) + ' dB';
                document.getElementById('pon-status').textContent = '✅ Enlace PON viable';
            } else {
                result.classList.add('error');
                document.getElementById('pon-value').textContent = remaining.toFixed(2) + ' dB';
                document.getElementById('pon-status').textContent = '❌ Enlace PON NO viable';
            }
            
            document.getElementById('pon-details').innerHTML = `
                <p>Power Budget disponible <span>${powerBudget.toFixed(2)} dB</span></p>
                <p>Pérdida fibra (${fiberDist} km × ${fiberAtt} dB/km) <span>${fiberLoss.toFixed(2)} dB</span></p>
                <p>Pérdida splitter 1 <span>${splitter1Loss.toFixed(2)} dB</span></p>
                ${splitter2Loss > 0 ? `<p>Pérdida splitter 2 <span>${splitter2Loss.toFixed(2)} dB</span></p>` : ''}
                <p>Pérdida conectores (${connectors} × 0.5 dB) <span>${connLoss.toFixed(2)} dB</span></p>
                <p>Pérdida empalmes (${splices} × 0.1 dB) <span>${spliceLoss.toFixed(2)} dB</span></p>
                <p>Margen de seguridad <span>${margin.toFixed(2)} dB</span></p>
                <p><strong>Pérdida total</strong> <span><strong>${totalLoss.toFixed(2)} dB</strong></span></p>
            `;
        }
        
        function calcSubnet() {
            const ip = document.getElementById('subnet-ip').value;
            const cidr = parseInt(document.getElementById('subnet-cidr').value);
            
            if (!ip || !validateIP(ip)) return showCalcError('subnet-result');
            
            const hostBits = 32 - cidr;
            const hosts = Math.pow(2, hostBits) - 2;
            
            const mask = cidrToMask(cidr);
            const ipParts = ip.split('.').map(Number);
            const maskParts = mask.split('.').map(Number);
            const network = ipParts.map((p, i) => p & maskParts[i]).join('.');
            const broadcast = ipParts.map((p, i) => (p & maskParts[i]) | (255 - maskParts[i])).join('.');
            
            const result = document.getElementById('subnet-result');
            result.classList.remove('error');
            result.classList.add('show');
            document.getElementById('subnet-value').textContent = hosts;
            document.getElementById('subnet-details').innerHTML = `
                <p>Red <span>${network}/${cidr}</span></p>
                <p>Máscara <span>${mask}</span></p>
                <p>Broadcast <span>${broadcast}</span></p>
            `;
        }
        
        function calcLinkBudget() {
            const ptx = parseFloat(document.getElementById('lb-ptx').value);
            const freq = parseFloat(document.getElementById('lb-freq').value);
            const dist = parseFloat(document.getElementById('lb-dist').value);
            const sens = parseFloat(document.getElementById('lb-sens').value);
            const gtx = parseFloat(document.getElementById('lb-gtx').value);
            const grx = parseFloat(document.getElementById('lb-grx').value);
            
            if ([ptx, freq, dist, sens, gtx, grx].some(isNaN)) return showCalcError('lb-result');
            
            const abf = 92.4 + 20 * Math.log10(freq) + 20 * Math.log10(dist);
            const eirp = ptx + gtx - 2;
            const prx = eirp + grx - abf;
            const fade = prx - sens;
            
            const result = document.getElementById('lb-result');
            result.classList.remove('error');
            result.classList.add('show');
            
            if (fade >= 20) {
                document.getElementById('lb-value').textContent = fade.toFixed(2) + ' dB';
                document.getElementById('lb-status').textContent = '✅ Buen margen';
            } else if (fade >= 0) {
                document.getElementById('lb-value').textContent = fade.toFixed(2) + ' dB';
                document.getElementById('lb-status').textContent = '⚠️ Margen bajo';
            } else {
                result.classList.add('error');
                document.getElementById('lb-value').textContent = fade.toFixed(2) + ' dB';
                document.getElementById('lb-status').textContent = '❌ Enlace NO viable';
            }
            
            document.getElementById('lb-details').innerHTML = `
                <p>EIRP <span>${eirp.toFixed(2)} dBm</span></p>
                <p>ABF (pérdida espacio libre) <span>${abf.toFixed(2)} dB</span></p>
                <p>Potencia recibida <span>${prx.toFixed(2)} dBm</span></p>
            `;
        }
        
        function calcWavelength() {
            const freq = parseFloat(document.getElementById('wl-freq').value);
            if (isNaN(freq) || freq <= 0) return showCalcError('wl-result');
            
            const wl = 30 / freq;
            
            const result = document.getElementById('wl-result');
            result.classList.remove('error');
            result.classList.add('show');
            document.getElementById('wl-value').textContent = wl.toFixed(3) + ' cm';
            document.getElementById('wl-details').innerHTML = `
                <p>Frecuencia <span>${freq} GHz</span></p>
                <p>En metros <span>${(wl / 100).toFixed(4)} m</span></p>
                <p>En milímetros <span>${(wl * 10).toFixed(2)} mm</span></p>
            `;
        }
        
        function calcBER() {
            const errors = parseFloat(document.getElementById('ber-errors').value);
            const total = parseFloat(document.getElementById('ber-total').value.replace(/[^0-9]/g, ''));
            
            if (isNaN(errors) || isNaN(total) || total <= 0) return showCalcError('ber-result');
            
            const ber = errors / total;
            
            const result = document.getElementById('ber-result');
            result.classList.remove('error');
            result.classList.add('show');
            
            let status = '';
            if (ber <= 1e-13) status = '🏆 Excelente';
            else if (ber <= 1e-9) status = '✅ Bueno';
            else if (ber <= 1e-6) status = '⚠️ Aceptable';
            else { status = '❌ Pobre'; result.classList.add('error'); }
            
            document.getElementById('ber-value').textContent = ber.toExponential(2);
            document.getElementById('ber-status').textContent = status;
            document.getElementById('ber-details').innerHTML = `
                <p>Bits error <span>${errors}</span></p>
                <p>Bits totales <span>${total.toLocaleString()}</span></p>
            `;
        }
        
        function showCalcError(resultId) {
            const result = document.getElementById(resultId);
            result.classList.add('show', 'error');
            result.innerHTML = `<div class="result-value">⚠️</div><div class="result-label">Ingresa valores válidos</div>`;
        }
        
        function validateIP(ip) {
            const parts = ip.split('.');
            if (parts.length !== 4) return false;
            return parts.every(p => { const n = parseInt(p); return !isNaN(n) && n >= 0 && n <= 255; });
        }
        
        function cidrToMask(cidr) {
            const mask = [];
            for (let i = 0; i < 4; i++) {
                const bits = Math.min(8, Math.max(0, cidr - i * 8));
                mask.push(256 - Math.pow(2, 8 - bits));
            }
            return mask.join('.');
        }
        
        // ============ MAPAS ============
        function initMaps() {
            document.querySelectorAll('#map-tabs .tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    document.querySelectorAll('#map-tabs .tab').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    showMap(this.dataset.map);
                });
            });
        }
        
        function showMap(mapId) {
            document.querySelectorAll('#map-container > div').forEach(m => m.style.display = 'none');
            document.getElementById('map-' + mapId).style.display = 'block';
        }
        
        // ============ DASHBOARD ============
        function loadDashboard() {
            const history = JSON.parse(localStorage.getItem('study_history') || '[]');
            
            let totalCorrect = 0, totalQuestions = 0, sessions = history.length;
            history.forEach(h => { totalCorrect += h.correct || 0; totalQuestions += h.total || 0; });
            
            const avg = totalQuestions > 0 ? Math.round(totalCorrect / totalQuestions * 100) : 0;
            const streak = calculateStreak(history);
            
            document.getElementById('dash-streak').textContent = streak;
            document.getElementById('dash-sessions').textContent = sessions;
            document.getElementById('dash-correct').textContent = totalCorrect;
            document.getElementById('dash-avg').textContent = avg + '%';
            
            if (history.length > 0) {
                const recentHistory = history.slice(-10).reverse();
                document.getElementById('dash-history').innerHTML = `
                    <table style="width: 100%; border-collapse: collapse;">
                        <tr style="opacity: 0.7;">
                            <th style="text-align: left; padding: 10px;">Fecha</th>
                            <th style="text-align: left; padding: 10px;">Tipo</th>
                            <th style="text-align: left; padding: 10px;">Resultado</th>
                        </tr>
                        ${recentHistory.map(h => `
                            <tr style="border-top: 1px solid rgba(255,255,255,0.1);">
                                <td style="padding: 10px;">${new Date(h.date).toLocaleDateString()}</td>
                                <td style="padding: 10px;">${h.type}</td>
                                <td style="padding: 10px;">${h.correct}/${h.total} (${Math.round(h.correct/h.total*100)}%)</td>
                            </tr>
                        `).join('')}
                    </table>
                `;
            }
        }
        
        function calculateStreak(history) {
            if (history.length === 0) return 0;
            
            const today = new Date(); today.setHours(0, 0, 0, 0);
            const days = new Set();
            history.forEach(h => {
                const d = new Date(h.date); d.setHours(0, 0, 0, 0);
                days.add(d.getTime());
            });
            
            let streak = 0, check = new Date(today);
            while (days.has(check.getTime())) {
                streak++;
                check.setDate(check.getDate() - 1);
            }
            return streak;
        }
        
        function saveProgress(type, data) {
            const history = JSON.parse(localStorage.getItem('study_history') || '[]');
            history.push({ type, date: new Date().toISOString(), ...data });
            if (history.length > 100) history.splice(0, history.length - 100);
            localStorage.setItem('study_history', JSON.stringify(history));
        }
        
        function clearAllProgress() {
            if (confirm('¿Borrar todo el progreso? Esta acción no se puede deshacer.')) {
                localStorage.removeItem('study_history');
                loadDashboard();
            }
        }
        
        // ============ UTILIDADES ============
        function shuffleArray(arr) {
            for (let i = arr.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [arr[i], arr[j]] = [arr[j], arr[i]];
            }
        }
        
        function showRandomTip() {
            document.getElementById('daily-tip').textContent = tips[Math.floor(Math.random() * tips.length)];
        }
        
        // ============ TECLADO ============
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('section-flashcards').classList.contains('active')) {
                if (e.code === 'Space') { e.preventDefault(); flipCard(); }
                else if (e.code === 'ArrowLeft') markCard(false);
                else if (e.code === 'ArrowRight') markCard(true);
                else if (e.code === 'ArrowDown') skipCard();
            }
        });
        
        // ============ INICIALIZACIÓN ============
        document.addEventListener('DOMContentLoaded', function() {
            loadTextSize(); // Cargar tamaño de texto guardado
            showRandomTip();
            initDesafio();
            initMemoria();
            initSupervivencia();
            initConceptos();
            initFlashcards();
            initTests();
            initVoF();
            initExercises();
            initCalculators();
            initMaps();
            loadDashboard();
            updateRepasoStats(); // Inicializar repaso inteligente
            setInterval(showRandomTip, 30000);
            
            // Inicializar búsqueda
            const searchInput = document.getElementById('search-input');
            if (searchInput) {
                searchInput.addEventListener('input', function(e) {
                    performSearch(e.target.value);
                });
            }
            
            // Cerrar búsqueda al hacer clic fuera
            document.getElementById('search-modal').addEventListener('click', function(e) {
                if (e.target === this) closeSearch();
            });
        });
    </script>
</body>
</html>
